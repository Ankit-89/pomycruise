!function(e){var r=e.babelHelpers={};r.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r.jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(r,t,n,o){var i=r&&r.defaultProps,u=arguments.length-3;if(t||0===u||(t={}),t&&i)for(var a in i)void 0===t[a]&&(t[a]=i[a]);else t||(t=i||{});if(1===u)t.children=o;else if(u>1){for(var f=Array(u),l=0;l<u;l++)f[l]=arguments[l+3];t.children=f}return{$$typeof:e,type:r,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}}(),r.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var r=e[Symbol.asyncIterator];if(null!=r)return r.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},r.asyncGenerator=function(){function e(e){this.value=e}function r(r){function t(e,r){return new Promise(function(t,o){var a={key:e,arg:r,resolve:t,reject:o,next:null};u?u=u.next=a:(i=u=a,n(e,r))})}function n(t,i){try{var u=r[t](i),a=u.value;a instanceof e?Promise.resolve(a.value).then(function(e){n("next",e)},function(e){n("throw",e)}):o(u.done?"return":"normal",u.value)}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":i.resolve({value:r,done:!0});break;case"throw":i.reject(r);break;default:i.resolve({value:r,done:!1})}i=i.next,i?n(i.key,i.arg):u=null}var i,u;this._invoke=t,"function"!=typeof r.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(r.prototype[Symbol.asyncIterator]=function(){return this}),r.prototype.next=function(e){return this._invoke("next",e)},r.prototype.throw=function(e){return this._invoke("throw",e)},r.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new r(e.apply(this,arguments))}},await:function(r){return new e(r)}}}(),r.asyncGeneratorDelegate=function(e,r){function t(t,n){return o=!0,n=new Promise(function(r){r(e[t](n))}),{done:!1,value:r(n)}}var n={},o=!1;return"function"==typeof Symbol&&Symbol.iterator&&(n[Symbol.iterator]=function(){return this}),n.next=function(e){return o?(o=!1,e):t("next",e)},"function"==typeof e.throw&&(n.throw=function(e){if(o)throw o=!1,e;return t("throw",e)}),"function"==typeof e.return&&(n.return=function(e){return t("return",e)}),n},r.asyncToGenerator=function(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function n(o,i){try{var u=r[o](i),a=u.value}catch(e){return void t(e)}return u.done?void e(a):Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)})}return n("next")})}},r.classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},r.createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),r.defineEnumerableProperties=function(e,r){for(var t in r){var n=r[t];n.configurable=n.enumerable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,t,n)}return e},r.defaults=function(e,r){for(var t=Object.getOwnPropertyNames(r),n=0;n<t.length;n++){var o=t[n],i=Object.getOwnPropertyDescriptor(r,o);i&&i.configurable&&void 0===e[o]&&Object.defineProperty(e,o,i)}return e},r.defineProperty=function(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e},r.extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.get=function e(r,t,n){null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,t);if(void 0===o){var i=Object.getPrototypeOf(r);return null===i?void 0:e(i,t,n)}if("value"in o)return o.value;var u=o.get;if(void 0!==u)return u.call(n)},r.inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},r.instanceof=function(e,r){return null!=r&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](e):e instanceof r},r.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},r.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t]);return r.default=e,r},r.newArrowCheck=function(e,r){if(e!==r)throw new TypeError("Cannot instantiate an arrow function")},r.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},r.objectWithoutProperties=function(e,r){var t={};for(var n in e)r.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},r.selfGlobal="undefined"==typeof e?self:e,r.set=function e(r,t,n,o){var i=Object.getOwnPropertyDescriptor(r,t);if(void 0===i){var u=Object.getPrototypeOf(r);null!==u&&e(u,t,n,o)}else if("value"in i&&i.writable)i.value=n;else{var a=i.set;void 0!==a&&a.call(o,n)}return n},r.slicedToArray=function(){function e(e,r){var t=[],n=!0,o=!1,i=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r.slicedToArrayLoose=function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var t,n=[],o=e[Symbol.iterator]();!(t=o.next()).done&&(n.push(t.value),!r||n.length!==r););return n}throw new TypeError("Invalid attempt to destructure non-iterable instance")},r.taggedTemplateLiteral=function(e,r){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(r)}}))},r.taggedTemplateLiteralLoose=function(e,r){return e.raw=r,e},r.temporalRef=function(e,r,t){if(e===t)throw new ReferenceError(r+" is not defined - temporal dead zone");return e},r.temporalUndefined={},r.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},r.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,t=Array(e.length);r<e.length;r++)t[r]=e[r];return t}return Array.from(e)}}("undefined"==typeof global?self:global);
try{var ce=new window.CustomEvent("test");ce.preventDefault();if(!0!==ce.defaultPrevented)throw Error("Could not prevent default");}catch(e){var CustomEvent=function(d,a){var b,c;a=a||{bubbles:!1,cancelable:!1,detail:void 0};b=document.createEvent("CustomEvent");b.initCustomEvent(d,a.bubbles,a.cancelable,a.detail);c=b.preventDefault;b.preventDefault=function(){c.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(f){this.defaultPrevented=!0}};return b};CustomEvent.prototype=
window.Event.prototype;window.CustomEvent=CustomEvent};
!function(t,e){if(!t.ES6Promise){t.ES6Promise=e();t.ES6Promise.polyfill()}}(this,function(){"use strict";function t(t){return"function"==typeof t||"object"==typeof t&&null!==t}function e(t){return"function"==typeof t}function n(t){I=t}function r(t){J=t}function o(){return function(){return process.nextTick(a)}}function i(){return"undefined"!=typeof H?function(){H(a)}:c()}function s(){var t=0,e=new V(a),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function u(){var t=new MessageChannel;return t.port1.onmessage=a,function(){return t.port2.postMessage(0)}}function c(){var t=setTimeout;return function(){return t(a,1)}}function a(){for(var t=0;t<G;t+=2){var e=$[t],n=$[t+1];e(n),$[t]=void 0,$[t+1]=void 0}G=0}function f(){try{var t=require,e=t("vertx");return H=e.runOnLoop||e.runOnContext,i()}catch(n){return c()}}function l(t,e){var n=arguments,r=this,o=new this.constructor(p);void 0===o[et]&&k(o);var i=r._state;return i?!function(){var t=n[i-1];J(function(){return x(i,o,t,r._result)})}():E(r,o,t,e),o}function h(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(p);return g(n,t),n}function p(){}function v(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function _(t){try{return t.then}catch(e){return it.error=e,it}}function y(t,e,n,r){try{t.call(e,n,r)}catch(o){return o}}function m(t,e,n){J(function(t){var r=!1,o=y(n,e,function(n){r||(r=!0,e!==n?g(t,n):S(t,n))},function(e){r||(r=!0,j(t,e))},"Settle: "+(t._label||" unknown promise"));!r&&o&&(r=!0,j(t,o))},t)}function b(t,e){e._state===rt?S(t,e._result):e._state===ot?j(t,e._result):E(e,void 0,function(e){return g(t,e)},function(e){return j(t,e)})}function w(t,n,r){n.constructor===t.constructor&&r===l&&n.constructor.resolve===h?b(t,n):r===it?j(t,it.error):void 0===r?S(t,n):e(r)?m(t,n,r):S(t,n)}function g(e,n){e===n?j(e,v()):t(n)?w(e,n,_(n)):S(e,n)}function A(t){t._onerror&&t._onerror(t._result),P(t)}function S(t,e){t._state===nt&&(t._result=e,t._state=rt,0!==t._subscribers.length&&J(P,t))}function j(t,e){t._state===nt&&(t._state=ot,t._result=e,J(A,t))}function E(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+rt]=n,o[i+ot]=r,0===i&&t._state&&J(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?x(n,r,o,i):o(i);t._subscribers.length=0}}function T(){this.error=null}function M(t,e){try{return t(e)}catch(n){return st.error=n,st}}function x(t,n,r,o){var i=e(r),s=void 0,u=void 0,c=void 0,a=void 0;if(i){if(s=M(r,o),s===st?(a=!0,u=s.error,s=null):c=!0,n===s)return void j(n,d())}else s=o,c=!0;n._state!==nt||(i&&c?g(n,s):a?j(n,u):t===rt?S(n,s):t===ot&&j(n,s))}function C(t,e){try{e(function(e){g(t,e)},function(e){j(t,e)})}catch(n){j(t,n)}}function O(){return ut++}function k(t){t[et]=ut++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(t,e){this._instanceConstructor=t,this.promise=new t(p),this.promise[et]||k(this.promise),B(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):j(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function F(t){return new Y(this,t).promise}function D(t){var e=this;return new e(B(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function K(t){var e=this,n=new e(p);return j(n,t),n}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(t){this[et]=O(),this._result=this._state=void 0,this._subscribers=[],p!==t&&("function"!=typeof t&&L(),this instanceof U?C(this,t):N())}function W(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=t.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}t.Promise=U}var z=void 0;z=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var B=z,G=0,H=void 0,I=void 0,J=function(t,e){$[G]=t,$[G+1]=e,G+=2,2===G&&(I?I(a):tt())},Q="undefined"!=typeof window?window:void 0,R=Q||{},V=R.MutationObserver||R.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,$=new Array(1e3),tt=void 0;tt=X?o():V?s():Z?u():void 0===Q&&"function"==typeof require?f():c();var et=Math.random().toString(36).substring(16),nt=void 0,rt=1,ot=2,it=new T,st=new T,ut=0;return Y.prototype._enumerate=function(){for(var t=this.length,e=this._input,n=0;this._state===nt&&n<t;n++)this._eachEntry(e[n],n)},Y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===h){var o=_(t);if(o===l&&t._state!==nt)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===U){var i=new n(p);w(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},Y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===nt&&(this._remaining--,t===ot?j(r,n):this._result[e]=n),0===this._remaining&&S(r,this._result)},Y.prototype._willSettleAt=function(t,e){var n=this;E(t,void 0,function(t){return n._settledAt(rt,e,t)},function(t){return n._settledAt(ot,e,t)})},U.all=F,U.race=D,U.resolve=h,U.reject=K,U._setScheduler=n,U._setAsap=r,U._asap=J,U.prototype={constructor:U,then:l,"catch":function(t){return this.then(null,t)}},U.polyfill=W,U.Promise=U,U});
if (typeof Object.assign != 'function') {

  Object.assign = function(target) {
    'use strict';
    if (target == null) {
      throw new TypeError('Cannot convert undefined or null to object');
    }

   target = Object(target);
    for (var index = 1; index < arguments.length; index++) {
      var source = arguments[index];
      if (source != null) {
        for (var key in source) {
          if (Object.prototype.hasOwnProperty.call(source, key)) {
            target[key] = source[key];
          }
        }
      }
    }
    return target;
  };
}

(function(n){function i(a,d){this.setNotifyMethod(a);this.setNotifyContext(d)}function j(a,d,b){this.name=a;this.body=d;this.type=b}function k(){}function m(){}function l(){this.subCommands=[];this.initializeMacroCommand()}function g(a,d){this.mediatorName=a||this.constructor.NAME;this.viewComponent=d}function h(a,d){this.proxyName=a||this.constructor.NAME;null!=d&&this.setData(d)}function b(a){if(null!=b.instanceMap[a])throw Error(b.MULTITON_MSG);this.initializeNotifier(a);b.instanceMap[a]=this;
this.initializeFacade()}function c(a){if(null!=c.instanceMap[a])throw Error(c.MULTITON_MSG);this.multitonKey=a;c.instanceMap[this.multitonKey]=this;this.mediatorMap=[];this.observerMap=[];this.initializeView()}function e(a){if(e.instanceMap[a])throw Error(e.MULTITON_MSG);this.multitonKey=a;e.instanceMap[a]=this;this.proxyMap=[];this.initializeModel()}function f(a){if(null!=f.instanceMap[a])throw Error(f.MULTITON_MSG);this.multitonKey=a;f.instanceMap[this.multitonKey]=this;this.commandMap=[];this.initializeController()}
function p(a,d,b){for(var a=a.split("."),b=b||o.global,c,e,f=0,g=a.length;f<g;f++)c=b,e=a[f],b=null==b[e]?b[e]={}:b[e];return null==d?b:c[e]=d}null==n&&(n=window);if(!n.puremvc){i.prototype.setNotifyMethod=function(a){this.notify=a};i.prototype.setNotifyContext=function(a){this.context=a};i.prototype.getNotifyMethod=function(){return this.notify};i.prototype.getNotifyContext=function(){return this.context};i.prototype.notifyObserver=function(a){this.getNotifyMethod().call(this.getNotifyContext(),
a)};i.prototype.compareNotifyContext=function(a){return a===this.context};i.prototype.notify=null;i.prototype.context=null;j.prototype.getName=function(){return this.name};j.prototype.setBody=function(a){this.body=a};j.prototype.getBody=function(){return this.body};j.prototype.setType=function(a){this.type=a};j.prototype.getType=function(){return this.type};j.prototype.toString=function(){var a="Notification Name: "+this.getName(),a=a+("\nBody:"+(null==this.body?"null":this.body.toString()));return a+=
"\nType:"+(null==this.type?"null":this.type)};j.prototype.name=null;j.prototype.type=null;j.prototype.body=null;k.prototype.sendNotification=function(a,d,b){var c=this.getFacade();c&&c.sendNotification(a,d,b)};k.prototype.initializeNotifier=function(a){this.multitonKey=""+a;this.facade=this.getFacade()};k.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(k.MULTITON_MSG);return b.getInstance(this.multitonKey)};k.prototype.multitonKey=null;k.MULTITON_MSG="multitonKey for this Notifier not yet initialized!";
m.prototype=new k;m.prototype.constructor=m;m.prototype.execute=function(){};l.prototype=new k;l.prototype.constructor=l;l.prototype.subCommands=null;l.prototype.initializeMacroCommand=function(){};l.prototype.addSubCommand=function(a){this.subCommands.push(a)};l.prototype.execute=function(a){for(;0<this.subCommands.length;){var d=new (this.subCommands.shift());d.initializeNotifier(this.multitonKey);d.execute(a)}};g.NAME="Mediator";g.prototype=new k;g.prototype.constructor=g;g.prototype.getMediatorName=
function(){return this.mediatorName};g.prototype.setViewComponent=function(a){this.viewComponent=a};g.prototype.getViewComponent=function(){return this.viewComponent};g.prototype.listNotificationInterests=function(){return[]};g.prototype.handleNotification=function(){};g.prototype.onRegister=function(){};g.prototype.onRemove=function(){};g.prototype.mediatorName=null;g.prototype.viewComponent=null;h.NAME="Proxy";h.prototype=new k;h.prototype.constructor=h;h.prototype.getProxyName=function(){return this.proxyName};
h.prototype.setData=function(a){this.data=a};h.prototype.getData=function(){return this.data};h.prototype.onRegister=function(){};h.prototype.onRemove=function(){};h.prototype.proxyName=null;h.prototype.data=null;b.prototype.initializeFacade=function(){this.initializeModel();this.initializeController();this.initializeView()};b.getInstance=function(a){if(null==a)return null;null==b.instanceMap[a]&&(b.instanceMap[a]=new b(a));return b.instanceMap[a]};b.prototype.initializeController=function(){if(null==
this.controller)this.controller=f.getInstance(this.multitonKey)};b.prototype.initializeModel=function(){if(null==this.model)this.model=e.getInstance(this.multitonKey)};b.prototype.initializeView=function(){if(null==this.view)this.view=c.getInstance(this.multitonKey)};b.prototype.registerCommand=function(a,d){this.controller.registerCommand(a,d)};b.prototype.removeCommand=function(a){this.controller.removeCommand(a)};b.prototype.hasCommand=function(a){return this.controller.hasCommand(a)};b.prototype.registerProxy=
function(a){this.model.registerProxy(a)};b.prototype.retrieveProxy=function(a){return this.model.retrieveProxy(a)};b.prototype.removeProxy=function(a){var d=null;null!=this.model&&(d=this.model.removeProxy(a));return d};b.prototype.hasProxy=function(a){return this.model.hasProxy(a)};b.prototype.registerMediator=function(a){null!=this.view&&this.view.registerMediator(a)};b.prototype.retrieveMediator=function(a){return this.view.retrieveMediator(a)};b.prototype.removeMediator=function(a){var d=null;
null!=this.view&&(d=this.view.removeMediator(a));return d};b.prototype.hasMediator=function(a){return this.view.hasMediator(a)};b.prototype.sendNotification=function(a,d,b){this.notifyObservers(new j(a,d,b))};b.prototype.notifyObservers=function(a){null!=this.view&&this.view.notifyObservers(a)};b.prototype.initializeNotifier=function(a){this.multitonKey=a};b.hasCore=function(a){return null!=b.instanceMap[a]};b.removeCore=function(a){null!=b.instanceMap[a]&&(e.removeModel(a),c.removeView(a),f.removeController(a),
delete b.instanceMap[a])};b.prototype.controller=null;b.prototype.model=null;b.prototype.view=null;b.prototype.multitonKey=null;b.instanceMap=[];b.MULTITON_MSG="Facade instance for this Multiton key already constructed!";c.prototype.initializeView=function(){};c.getInstance=function(a){if(null==a)return null;null==c.instanceMap[a]&&(c.instanceMap[a]=new c(a));return c.instanceMap[a]};c.prototype.registerObserver=function(a,d){null!=this.observerMap[a]?this.observerMap[a].push(d):this.observerMap[a]=
[d]};c.prototype.notifyObservers=function(a){if(null!=this.observerMap[a.getName()]){for(var d=this.observerMap[a.getName()],b=[],c,e=0;e<d.length;e++)c=d[e],b.push(c);for(e=0;e<b.length;e++)c=b[e],c.notifyObserver(a)}};c.prototype.removeObserver=function(a,d){for(var b=this.observerMap[a],c=0;c<b.length;c++)if(!0==b[c].compareNotifyContext(d)){b.splice(c,1);break}0==b.length&&delete this.observerMap[a]};c.prototype.registerMediator=function(a){if(null==this.mediatorMap[a.getMediatorName()]){a.initializeNotifier(this.multitonKey);
this.mediatorMap[a.getMediatorName()]=a;var d=a.listNotificationInterests();if(0<d.length)for(var b=new i(a.handleNotification,a),c=0;c<d.length;c++)this.registerObserver(d[c],b);a.onRegister()}};c.prototype.retrieveMediator=function(a){return this.mediatorMap[a]};c.prototype.removeMediator=function(a){var d=this.mediatorMap[a];if(d){for(var b=d.listNotificationInterests(),c=0;c<b.length;c++)this.removeObserver(b[c],d);delete this.mediatorMap[a];d.onRemove()}return d};c.prototype.hasMediator=function(a){return null!=
this.mediatorMap[a]};c.removeView=function(a){delete c.instanceMap[a]};c.prototype.mediatorMap=null;c.prototype.observerMap=null;c.instanceMap=[];c.prototype.multitonKey=null;c.MULTITON_MSG="View instance for this Multiton key already constructed!";e.prototype.initializeModel=function(){};e.getInstance=function(a){if(null==a)return null;null==e.instanceMap[a]&&(e.instanceMap[a]=new e(a));return e.instanceMap[a]};e.prototype.registerProxy=function(a){a.initializeNotifier(this.multitonKey);this.proxyMap[a.getProxyName()]=
a;a.onRegister()};e.prototype.retrieveProxy=function(a){return this.proxyMap[a]};e.prototype.hasProxy=function(a){return null!=this.proxyMap[a]};e.prototype.removeProxy=function(a){var b=this.proxyMap[a];b&&(this.proxyMap[a]=null,b.onRemove());return b};e.removeModel=function(a){delete e.instanceMap[a]};e.prototype.proxyMap=null;e.instanceMap=[];e.MULTITON_MSG="Model instance for this Multiton key already constructed!";f.prototype.initializeController=function(){this.view=c.getInstance(this.multitonKey)};
f.getInstance=function(a){if(null==a)return null;null==this.instanceMap[a]&&(this.instanceMap[a]=new this(a));return this.instanceMap[a]};f.prototype.executeCommand=function(a){var b=this.commandMap[a.getName()];null!=b&&(b=new b,b.initializeNotifier(this.multitonKey),b.execute(a))};f.prototype.registerCommand=function(a,b){null==this.commandMap[a]&&this.view.registerObserver(a,new i(this.executeCommand,this));this.commandMap[a]=b};f.prototype.hasCommand=function(a){return null!=this.commandMap[a]};
f.prototype.removeCommand=function(a){this.hasCommand(a)&&(this.view.removeObserver(a,this),this.commandMap[a]=null)};f.removeController=function(a){delete this.instanceMap[a]};f.prototype.view=null;f.prototype.commandMap=null;f.prototype.multitonKey=null;f.instanceMap=[];f.MULTITON_MSG="controller key for this Multiton key already constructed";var o={global:function(){return this}(),extend:function(a,b){if("function"!==typeof a)throw new TypeError("#extend- child should be Function");if("function"!==
typeof b)throw new TypeError("#extend- parent should be Function");if(b!==a){var c=new Function;c.prototype=b.prototype;a.prototype=new c;return a.prototype.constructor=a}},decorate:function(a,b){for(var c in b)a[c]=b[c];return a}};n.puremvc={View:c,Model:e,Controller:f,SimpleCommand:m,MacroCommand:l,Facade:b,Mediator:g,Observer:i,Notification:j,Notifier:k,Proxy:h,define:function(a,b,c){a||(a={});var e=a.name,f=a.parent,g="function"===typeof f,h=a.scope||null;if("parent"in a&&!g)throw new TypeError("Class parent must be Function");
if(a.hasOwnProperty("constructor")){if(a=a.constructor,"function"!==typeof a)throw new TypeError("Class constructor must be Function");}else a=g?function(){f.apply(this,arguments)}:new Function;g&&o.extend(a,f);if(b)g=a.prototype,o.decorate(g,b),g.constructor=a;c&&o.decorate(a,c);if(e){if("string"!==typeof e)throw new TypeError("Class name must be primitive string");p(e,a,h)}return a},declare:p}}})(this);
if (!String.prototype.startsWith) {
  String.prototype.startsWith = function(searchString, position) {
    position = position || 0;
    return this.indexOf(searchString, position) === position;
  };
}
if (!String.prototype.endsWith) {
  String.prototype.endsWith = function(searchStr, position) {
      // This works much better than >= because
      // it compensates for NaN:
      if (!(position < this.length))
        position = this.length;
      else
        position |= 0; // round position
      return this.substr(position - searchStr.length, searchStr.length) === searchStr;
  };
}


(function(){function Kd(){var a,b,c,e=this;b=null;this.getSDK=function(){return b};this.setSDK=function(c){var e;b=c;a();for(e in b)c=b[e],window[e]=c;return b};this.saveSDK=function(a,b){var e,d;if(null!=b&&null!=a&&""!==a){if(null==b.main)for(e in b)if(d=b[e],(null!=d?d.VERSION:void 0)===a){b.main=d;break}null==b.version&&(b.version=a);c.push(b);return this[a]=b}};c=[];this.getVersions=function(){return c.slice()};this.getVersion=function(a){return this[a]};this.setVersion=function(a){b=this.getVersion(a);
if(null==b)return null;this.setSDK(b);return b};this.revert=function(){return this.setSDK(c[0])};this.noConflict=function(){var a;a=this.getSDK();this.revert();return a};this.create=function(){var a;a=function(a,b){this.prototype=a.prototype;return a.apply(this,b)};return function(c){return new a(b.main,arguments)}}();a=function(){var a,c,d;if(null!=(c=window.com)&&null!=(d=c.akamai)&&d.amp)for(a in window)if(c=window[a],(c===window.AMP||c===window.AMPremier)&&null!=(null!=c?c.VERSION:void 0)&&""!==
c.VERSION&&c.VERSION!==(null!=b?b.version:void 0)&&null==e[c.VERSION]){a={};a.main=c;a.com=window.com;window.AMP&&(a.AMP=window.AMP);window.AMPPremier&&(a.AMPremier=window.AMPPremier);window.Utils&&(a.Utils=window.Utils);window.QueryString&&(a.QueryString=window.QueryString);window.QueryParams&&(a.QueryParams=window.QueryParams);e.saveSDK(c.VERSION,a);break}};a()}var ic;null==window.AKAMAI_MEDIA_PLAYER&&(window.AKAMAI_MEDIA_PLAYER=new Kd);if(null==window.AKAMAI_MEDIA_PLAYER["AMP v4.82.17"]){ic=
window.AKAMAI_MEDIA_PLAYER["AMP v4.82.17"]={};var Ld=function(a){return{}.hasOwnProperty(a)},g=function(a,b){function c(){this.constructor=a}for(var e in b)Ld.call(b,e)&&(a[e]=b[e]);c.prototype=b.prototype;a.prototype=new c;a.__super__=b.prototype;return a},jc=function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},Md=function(a,b){return function(){return a.apply(b,arguments)}},La=function(){};La.construct=function(){var a,b,c;c=this.decode(window.location.search);
La.typed={};for(a in c)b=c[a],La[a]=b,La.typed[a]=this.parse(b);return!0};La.encode=function(a,b){var c,e,k,d;k=[];for(e in a)d=a[e],null!=d&&(c=b?b+"["+e+"]":e,k.push("object"===typeof d?this.encode(d,c):encodeURIComponent(c)+"\x3d"+encodeURIComponent(d)));return k.join("\x26")};La.decode=function(a){var b;null!=a&&(b={},a=a.replace(/^[^?]*\?/,""),a.replace(/([^?=&]+)(=([^&]*))?/g,function(a,e,k,d){b[decodeURIComponent(e)]=decodeURIComponent(d)}));return b};La.parse=function(a){var b;if("undefined"===
a)return!0;b=a.toLowerCase();if("true"===b||"false"===b)return"true"===b;b=parseFloat(a);if(!isNaN(b))return b;try{return b=JSON.parse(a)}catch(c){return a}};La.constructed=La.construct();var O=function(a,b){this.config=a;O.__super__.constructor.call(this,b)};g(O,puremvc.Proxy);O.NAME="ModuleProxy";O.prototype.defaults=null;O.prototype.config=null;O.prototype.initializeNotifier=function(a){O.__super__.initializeNotifier.call(this,a);this.createData()};O.prototype.createData=function(){this.setData(this.config)};
O.prototype.getDefaults=function(){return this.defaults||{}};O.prototype.setData=function(a){var b,c,e,k;null==a&&(a={});e={};k=this.getDefaults();for(c in k)b=k[c],b=c in a?a[c]:b,e[c]=b;O.__super__.setData.call(this,e);return a};O.prototype.destroy=function(){};var C=function(a){this.viewComponent=a;this.performance={init:Date.now()};C.__super__.constructor.call(this,this.getModuleName()+"-"+f.createUID());this.dispatcher=new ya(this);this.logger=Q.instance;this.moduleMap={}};g(C,puremvc.Facade);
C.prototype.logger=null;C.prototype.config=null;C.prototype.moduleName=null;C.prototype.moduleMap=null;C.prototype.viewComponent=null;C.prototype.dispatcher=null;C.prototype.oninitialized=null;C.prototype.onerror=null;C.prototype.parentModule=null;C.prototype.performance=null;C.prototype.initialize=function(a,b){this.config=a;this.parentModule=b;this.loadModuleResources().then(this.resourcesLoaded.bind(this))["catch"](this.resourcesError.bind(this))};C.prototype.loadModuleResources=function(a){var b,
c,e;null==a&&(a=this.config.resources);if(0<!(null!=a&&a.length))return Promise.resolve();c=0;for(e=a.length;c<e;c++)b=a[c],b.src=this.evaluatePaths(b.src),null!=b.debug&&(b.debug=this.evaluatePaths(b.debug));return B.addResources(a)};C.prototype.evaluatePaths=function(a){var b,c,e;if(null!=a)return b=this.config.paths||(null!=(c=this.parentModule)?null!=(e=c.config)?e.paths:void 0:void 0),null!=b&&(a=a.replace(/[\$#]{paths\.[^}]*}/g,function(a){return Qa.eval(a,null,null,null,b)})),a};C.prototype.resourcesError=
function(a){if("function"===typeof this.onerror)this.onerror(this)};C.prototype.resourcesLoaded=function(){this.createFramework();if("function"===typeof this.oninitialized)this.oninitialized(this)};C.prototype.createFramework=function(){this.createModel();this.createController();this.createView()};C.prototype.createModel=function(){this.registerProxy(new O(this.config))};C.prototype.createView=function(){};C.prototype.createController=function(){this.registerCommand(d.DISPATCH_EVENT,Qc)};C.prototype.getModuleName=
function(){return this.moduleName};C.prototype.getConfig=function(){return this.config};C.prototype.hasModule=function(a){return null!=this.moduleMap[a]};C.prototype.getModules=function(){var a,b,c,e;b={};e=this.moduleMap;for(a in e)c=e[a],b[a]=c.module;return b};C.prototype.registerModule=function(a){var b,c;c=a.getModuleName();null!=a&&null==this.moduleMap[c]&&(b=new Ra(a),this.moduleMap[c]=b,this.registerMediator(b),a.onRegister())};C.prototype.retrieveModule=function(a){return this.moduleMap[a].module};
C.prototype.removeModule=function(a){var b;b=this.moduleMap[a];if(null!=b)return delete this.moduleMap[a],this.removeMediator(a),a=b.module,a.onRemove.call(a),a};C.prototype.listNotificationInterests=function(){return[]};C.prototype.listNotificationPublications=function(){return[]};C.prototype.getViewComponent=function(){return this.viewComponent};C.prototype.setViewComponent=function(a){return this.viewComponent=a};C.prototype.onRegister=function(){};C.prototype.onRemove=function(){};C.prototype.destroy=
function(){var a,b,c,e;if(null!=this.getModules())for(a in c=this.getModules(),c)b=c[a],this.removeModule(a),b.destroy();null!=(e=this.retrieveProxy(O.NAME))&&"function"===typeof e.destroy&&e.destroy();puremvc.Facade.removeCore(this.multitonKey);null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="");for(a in this){try{this[a]=null}catch(k){}delete this[a]}};C.prototype.addEventListener=function(a,b){this.dispatcher.addEventListener(a,b)};C.prototype.once=function(a,
b){this.dispatcher.once(a,b)};C.prototype.logEvent=function(a){var b;!0!==/(timeupdate|progress|fragmentloaded|fragmentloadstart)/.test(a.type)&&(b=this.getModuleName().toUpperCase(),a.dispatcher&&(b+=" "+a.dispatcher),this.logger.log("["+b+" EVENT] "+a.type,a))};C.prototype.dispatchEvent=function(a){this.logEvent(a);this.dispatcher.dispatchEvent(a)};C.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};var ya=function(a){this._target=null!=a?a:this;this._listenerMap=
{}};ya.prototype.addEventListener=function(a,b,c){null!=b&&null!=a&&(null==this._listenerMap[a]&&(this._listenerMap[a]=[]),-1===this._listenerMap[a].indexOf(b)&&this._listenerMap[a].push(b))};ya.prototype.once=function(a,b){b.once=!0;this.addEventListener(a,b)};ya.prototype.dispatchEvent=function(a){var b,c,e,k,d,h;c=this._listenerMap[a.type];b=this._target["on"+a.type];a.target=this._target;e=[];null!=b&&b.apply(this._target,[a]);if(null!=c){h=c.slice();k=0;for(d=h.length;k<d;k++)b=h[k],b.apply(this._target,
[a]),!0===b.once&&e.push(b);if(0<e.length)for(a=0,k=e.length;a<k;a++)b=e[a],c.splice(c.indexOf(b),1)}};ya.prototype.removeEventListener=function(a,b,c){if(null!=b&&null!=a&&(a=this._listenerMap[a],null!=a&&(b=null!=a?a.indexOf(b):void 0,-1!==b)))return a.splice(b,1)};var za=function(a){this.list=null!=a?a:[];za.__super__.constructor.call(this);this.handlers={change:this.changeHandler.bind(this)}};g(za,ya);za.prototype.onchange=null;za.prototype.list=null;za.prototype.changeHandler=function(a){this.dispatchEvent(a)};
za.prototype.add=function(a,b){null==b&&(b=!0);this.list.push(a);a.addEventListener("change",this.handlers.change);!0===b&&this.dispatchEvent({type:"addtrack"})};za.prototype.set=function(a){var b,c,e,k;this.clear();if(null!=a&&0!==a.length){b=e=0;for(k=a.length;e<k;b=++e)c=a[b],this.add(c,!1),this[b]=null,delete this[b];this.dispatchEvent({type:"addtrack"})}};za.prototype.item=function(a){return this.list[a]};za.prototype.remove=function(a,b){var c;null==b&&(b=!0);if(0<=jc.call(this,a))return c=
this.list.splice(a,1),c.removeEventListener("change",this.handlers.change),!0===b&&this.dispatchEvent({type:"removetrack"}),c};za.prototype.clear=function(){var a,b,c,e;if(0!==this.list.length){a=c=0;for(e=this.length;c<e;a=++c)b=this[a],this.remove(b,!1),this.list[a]=null,delete this.list[a];this.dispatchEvent({type:"removetrack"})}};za.prototype.forEach=function(a,b){var c,e,k,d,h;if(null!=a)for(h=this.list,c=k=0,d=h.length;k<d;c=++k)e=h[c],a.call(b,e,c,this.list)};za.prototype.getTrackById=function(a){var b,
c,e,k;k=this.list;c=0;for(e=k.length;c<e;c++)if(b=k[c],b.id===a)return b};za.prototype.getLength=function(){return this.list.length};var Ed=function(a){a.className=Ob.PREFIX+"player";a=va.create("install-flash",a);va.create(null,a,"p","To view this page ensure that Adobe Flash Player version 10.2.0 or greater is installed.");a=va.create(null,a,"a");a.href="http://www.adobe.com/go/getflashplayer";a=va.create(null,a,"img");a.src="//www.adobe.com/images/shared/download_buttons/get_flash_player.gif";
a.alt="Get Adobe Flash player"};Ed.prototype.initialize=function(){};Ed.prototype.getModules=function(){return[]};var Tb=function(){this.map={}};Tb.prototype.map=null;Tb.prototype.add=function(a,b){this.map[a]=b};Tb.prototype.item=function(a){return this.map[a]};Tb.prototype.remove=function(a){var b;b=this.map[a];null!=b&&(this.map[a]=null,delete this.map[a]);return b};var Rc=function(a,b,c){this.key=a;this.token=b;this.expiration=c};Rc.prototype.key=null;Rc.prototype.token=null;Rc.prototype.expiration=
null;var sb=function(){sb.__super__.constructor.call(this)};g(sb,Tb);sb.prototype.js=function(a,b){return f.loadScript(a,document.body)};sb.prototype.css=function(a,b){return new Promise(function(c,e){try{f.loadStyleSheet(a)}catch(k){e()}c(b)})};sb.prototype.json=function(a,b){return f.requestJson(b.src).then(function(a){b.data=a;return b})};sb.prototype.add=function(a){var b,c,e,k=this;e=Q.instance.enabled&&null!=a.debug?a.debug:a.src;b=this.item(e);if("function"===typeof(null!=b?b.then:void 0))return b;
if(!1===a.enabled||b instanceof Object)return Promise.resolve();b=a.type||f.getMimeType(e);b===f.mimeTypes.js||/javascript/.test(b)?c=this.js(e,a):b===f.mimeTypes.css?c=this.css(e,a):b===f.mimeTypes.json||/json/.test(b)?c=this.json(e,a):b!==f.mimeTypes.swf&&(c=f.request(e));if(null==c)return Promise.resolve();c=c.then(function(a){Tb.prototype.add.call(k,e);return a});sb.__super__.add.call(this,e,c);return c};sb.prototype.addResources=function(a){var b,c,e,k;if(0<!(null!=a&&a.length))return Promise.resolve();
b=[];e=0;for(k=a.length;e<k;e++)c=a[e],b.push(this.add.bind(this,c));return f.chain(b)};var kc=function(){kc.__super__.constructor.call(this)};g(kc,puremvc.SimpleCommand);kc.prototype.execute=function(a){var b;this.facade.performance.ready=Date.now();this.sendNotification(d.READY,this.facade.config);a=null!=(b=this.facade.config)?b.media:void 0;null!=a&&setTimeout(this.sendNotification.bind(this,d.SET_MEDIA,a),0)};var A=function(){A.__super__.constructor.call(this)};g(A,puremvc.SimpleCommand);A.prototype.applicationState=
null;A.prototype.media=null;A.prototype.player=null;A.prototype.playback=null;A.prototype.config=null;A.prototype.logger=null;A.prototype.bindings=null;A.prototype.params=null;A.prototype.playerCore=null;A.prototype.security=null;A.prototype.tracks=null;A.prototype.initializeNotifier=function(a){var b;A.__super__.initializeNotifier.call(this,a);this.player=this.facade.player||this.facade;this.applicationState=this.player.appState;this.media=this.player.mediaProxy;this.config=this.player.configuration;
this.logger=this.player.logger;this.bindings=this.player.bindings;this.params=this.player.params;this.playerCore=this.player.playerCore;this.security=this.player.security;this.tracks=this.player.tracks;this.playback=(null!=(b=this.player.playerCore)?b.getActivePlaybackCore():void 0)||this.player.playback};var Sc=function(){Sc.__super__.constructor.call(this)};g(Sc,A);Sc.prototype.execute=function(a){var b;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case L.ENDED:b=
d.REPLAY;break;case L.PAUSED:case L.READY:b=d.PLAY;break;case L.PLAYING:b=d.PAUSE}this.applicationState.getWaiting()&&!0===this.facade.getMediaElement().paused&&(b=d.PLAY);this.sendNotification(b,!0)}};var Tc=function(){Tc.__super__.constructor.call(this)};g(Tc,A);Tc.prototype.execute=function(a){a=this.applicationState.getDisplayState()===R.FULL_SCREEN?R.NORMAL:R.FULL_SCREEN;this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};var s=function(){s.__super__.constructor.call(this)};g(s,A);s.prototype.dispatchEvent=
function(a,b){var c;"string"!==typeof a&&(b=null!=a.getBody()?a.getBody():{},a=a.getName());c=new H(a,b);this.sendNotification(d.DISPATCH_EVENT,c)};s.prototype.dispatchEventAfterCommand=function(a,b){setTimeout(this.dispatchEvent.bind(this,a,b),0)};s.prototype.execute=function(a){this.dispatchEvent(a)};var lc=function(){lc.__super__.constructor.call(this)};g(lc,s);lc.prototype.execute=function(a){!0!==this.applicationState.getIsUserActive()&&(0===this.facade.getMediaElement().currentTime&&!1===this.media.started&&
!1===this.applicationState.getSeeking()&&(this.media.started=!0,this.sendNotification(d.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()===L.PLAYING?lc.__super__.execute.call(this,a):this.sendNotification(d.CHANGE_PLAY_STATE,L.PLAYING))};var mc=function(){mc.__super__.constructor.call(this)};g(mc,s);mc.prototype.execute=function(a){this.playback.pause();this.sendNotification(d.CHANGE_ACTIVE_STATE,tb.ACTIVE);mc.__super__.execute.call(this,a)};var Uc=function(){Uc.__super__.constructor.call(this)};
g(Uc,A);Uc.prototype.execute=function(a){this.config.setAutoplay(a.getBody())};var Vc=function(){Vc.__super__.constructor.call(this)};g(Vc,A);Vc.prototype.execute=function(a){this.config.setLoop(a.getBody())};var Wc=function(){Wc.__super__.constructor.call(this)};g(Wc,A);Wc.prototype.execute=function(a){this.playback.setVolume(f.clamp(a.getBody(),0,1))};var nc=function(){nc.__super__.constructor.call(this)};g(nc,A);nc.prototype.execute=function(a){var b,c,e,k,eb=this;a=a.getBody();c=this.facade.getMediaElement();
this.sendNotification(d.MEDIA_CHANGE,a);a=!1===this.applicationState.getLocked()&&!0===this.facade.getAutoplay();e=this.config.getPlaysInline();c.playsInline=null!=e?e:!0;c=this.config.getMuted();null!=c&&this.playback.setMuted(c);a&&c&&(b=this.facade.getContainer(),k=function(){eb.config.setMuted(!1);eb.facade.setMuted(!1);b.removeEventListener("click",k)},b.addEventListener("click",k));a&&setTimeout(this.sendNotification.bind(this,d.PLAY,!0),0)};var oc=function(){oc.__super__.constructor.call(this)};
g(oc,A);oc.prototype.execute=function(a){var b;a=a.getBody();0===a&&this.media.getType()===f.mimeTypes.m3u8&&(a=0.25);a!==this.playback.getCurrentTime()&&(!0===this.playback.getStarted()&&this.sendNotification(d.WAITING),this.sendNotification(d.DISPLAY_TIME,{currentTime:a,duration:this.playback.getDuration()}),this.sendNotification(d.CHANGE_ACTIVE_STATE,tb.ACTIVE),b=this.facade.getMediaElement(),this.applicationState.pausedBeforeSeek=b.paused,this.playback.setCurrentTime(a),!0!==this.playback.getStarted()&&
this.sendNotification(d.TIME_UPDATE,a))};var pc=function(){pc.__super__.constructor.call(this)};g(pc,s);pc.prototype.execute=function(a){!0===this.applicationState.getSeeking()?this.applicationState.setSeekRequested(!0):(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),this.applicationState.setSeeking(!0),pc.__super__.execute.call(this,a))};var Xc=function(){Xc.__super__.constructor.call(this)};g(Xc,s);Xc.prototype.execute=
function(a){var b=this;!0===this.applicationState.getIsUserActive()?setTimeout(this.sendNotification.bind(this,a.getName(),a.getBody()),100):setTimeout(function(){var c;b.applicationState.setSeeking(!1);b.dispatchEvent(a);b.applicationState.setSeekRequested(!1);b.sendNotification(Ha.SEEKED,a.getBody());b.applicationState.getPlayState()!==L.READY&&(c=!0===b.applicationState.pausedBeforeSeek||!0===b.facade.retrieveProxy(p.NAME).getPaused()?L.PAUSED:L.PLAYING,"full-screen"===b.applicationState.displayState&&
"ipad"===b.applicationState.device&&b.facade.retrieveProxy(p.NAME).getPaused()!==b.facade.getMediaElement().paused&&(c=!0===b.facade.getMediaElement().paused?L.PAUSED:L.PLAYING),b.sendNotification(d.CHANGE_PLAY_STATE,c))},1)};var Yc=function(){Yc.__super__.constructor.call(this)};g(Yc,A);Yc.prototype.execute=function(a){"function"===typeof this.playback.replay?this.playback.replay():this.sendNotification(d.SET_MEDIA,this.media.getData())};var Zc=function(){Zc.__super__.constructor.call(this)};g(Zc,
A);Zc.prototype.execute=function(a){this.applicationState.getEnded()||(this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,d.ENDED)))};var qc=function(){qc.__super__.constructor.call(this)};g(qc,s);qc.prototype.execute=function(a){this.applicationState.getEnded()||(this.applicationState.setEnded(!0),qc.__super__.execute.call(this,a),!0===this.config.getLoop()?this.sendNotification(d.REPLAY):!1===this.applicationState.getHasPostContent()&&
this.sendNotification(d.MEDIA_SEQUENCE_ENDED))};var $c=function(){$c.__super__.constructor.call(this)};g($c,A);$c.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST);this.sendNotification(d.DISPLAY_TIME,{currentTime:0,duration:this.media.getDuration()});this.sendNotification(d.STARTED,a.getBody())};var ad=function(){ad.__super__.constructor.call(this)};g(ad,A);ad.prototype.execute=function(a){this.applicationState.setIsUserActive(a.getBody())};var rc=function(){rc.__super__.constructor.call(this)};
g(rc,s);rc.prototype.execute=function(a){this.applicationState.getWaiting()||(this.applicationState.setWaiting(!0),rc.__super__.execute.call(this,a))};var bd=function(){bd.__super__.constructor.call(this)};g(bd,A);bd.prototype.execute=function(a){this.playback.setMuted(a.getBody())};var sc=function(){sc.__super__.constructor.call(this)};g(sc,s);sc.prototype.execute=function(a){null==this.security.getSession()&&(this.security.setSession(va.createUID()),this.sendNotification(d.MEDIA_VALIDATED,this.media.getData()),
sc.__super__.execute.call(this,a))};var cd=function(){cd.__super__.constructor.call(this)};g(cd,A);cd.prototype.execute=function(a){this.playback.initialized=!0};var dd=function(){dd.__super__.constructor.call(this)};g(dd,A);dd.prototype.execute=function(a){this.playerCore.registerPlaybackCore(a.getBody())};var ed=function(){ed.__super__.constructor.call(this)};g(ed,A);ed.prototype.execute=function(a){a=a.getBody();this.sendNotification(d.CHANGE_CONTENT,{from:this.media.getData(),to:a});this.media.updateData(a);
this.sendNotification(d.UPDATE_DATA_BINDINGS);this.sendNotification(d.CHANGE_CONTENT,this.media.getData())};var tc=function(){tc.__super__.constructor.call(this)};g(tc,s);tc.prototype.execute=function(a){this.sendNotification(d.DISPLAY_TIME,{currentTime:this.playback.getCurrentTime(),duration:this.playback.getDuration()});tc.__super__.execute.call(this,a)};var fd=function(){fd.__super__.constructor.call(this)};g(fd,A);fd.prototype.execute=function(a){this.playback.setMuted(!this.playback.getMuted())};
var uc=function(){uc.__super__.constructor.call(this)};g(uc,s);uc.prototype.execute=function(a){!0!==this.media.started&&(this.media.started=!0,uc.__super__.execute.call(this,a),this.sendNotification(d.WAITING),this.sendNotification(d.MEDIA_SEQUENCE_STARTED))};var gd=function(){gd.__super__.constructor.call(this)};g(gd,A);gd.prototype.execute=function(a){var b,c,e,k;c=this.player.getMediaElement();b=a.getBody();e=0;for(k=b.length;e<k;e++)a=b[e],c.addEventListener(a,this.playback.handlers[a])};var hd=
function(){hd.__super__.constructor.call(this)};g(hd,A);hd.prototype.execute=function(a){var b,c,e,k;c=this.player.getMediaElement();b=a.getBody();e=0;for(k=b.length;e<k;e++)a=b[e],c.removeEventListener(a,this.playback.handlers[a])};var vc=function(){vc.__super__.constructor.call(this)};g(vc,s);vc.prototype.execute=function(a){this.applicationState.setVolume(a.getBody());vc.__super__.execute.call(this,a)};var id=function(){id.__super__.constructor.call(this)};g(id,A);id.prototype.execute=function(a){this.applicationState.setHasPostContent(a.getBody())};
var Ub=function(){Ub.__super__.constructor.call(this)};g(Ub,s);Ub.prototype.execute=function(a){!0===this.config.getLoop()?(Ub.__super__.execute.call(this,a),this.sendNotification(d.REPLAY)):(this.sendNotification(d.CHANGE_PLAY_STATE,L.ENDED),this.sendNotification(d.CHANGE_ACTIVE_STATE,tb.ACTIVE),Ub.__super__.execute.call(this,a))};var jd=function(){jd.__super__.constructor.call(this)};g(jd,A);jd.prototype.execute=function(a){a=a.getBody();this.sendNotification(a?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,
"locked");this.applicationState.setLocked(a)};var kd=function(){kd.__super__.constructor.call(this)};g(kd,A);kd.prototype.execute=function(a){var b;"function"===typeof(b=this.playback).goLive&&b.goLive()};var ld=function(){ld.__super__.constructor.call(this)};g(ld,A);ld.prototype.execute=function(a){a="persistent"!==this.config.getControls().mode?a.getBody():tb.ACTIVE;this.applicationState.setActiveState(a)};var Sa=function(){Sa.__super__.constructor.call(this)};g(Sa,s);Sa.interval=null;Sa.prototype.execute=
function(a){var b,c,e,k=this;a=a.getBody();a!==this.applicationState.getDisplayState()&&(this.applicationState.setDisplayState(a),"external"!==this.config.getFullscreen().mode&&(b=this.facade.getMediaElement(),e=this.facade.getViewComponent(),c=f.getFullScreenApi(e,b),a===R.FULL_SCREEN?(null!=c.event?null!=e.mozRequestFullScreen?document[c.event]=function(a){if(!document.mozFullScreen)return k.sendNotification(d.CHANGE_DISPLAY_STATE,R.NORMAL)}:e[c.event]=function(a){if(null==document[c.element])return k.sendNotification(d.CHANGE_DISPLAY_STATE,
R.NORMAL)}:(clearInterval(Sa.interval),Sa.interval=setInterval(function(){!0!==b.webkitDisplayingFullscreen&&(k.sendNotification(d.CHANGE_DISPLAY_STATE,R.NORMAL),clearInterval(Sa.interval))},100)),null!=c.error&&document.addEventListener(c.error,this.facade.logger.error.bind(this.facade.logger)),c.enter()):a===R.NORMAL&&(null!=c&&"function"===typeof c.exit&&c.exit(),b[c.event]=null,clearInterval(Sa.interval))),this.sendNotifications(a))};Sa.prototype.sendNotifications=function(a){setTimeout(this.sendNotification.bind(this,
d.FULL_SCREEN_CHANGE,a),100);this.dispatchEvent("fullscreenchange",a===R.FULL_SCREEN)};var wc=function(){wc.__super__.constructor.call(this)};g(wc,s);wc.prototype.execute=function(a){var b;!0!==this.applicationState.getLocked()&&((b=a.getBody())&&!0!==this.playback.initialized&&this.sendNotification(d.INITIALIZED),!0===this.playback.initialized&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(d.START),this.playback.play(),wc.__super__.execute.call(this,
a)))};var md=function(){md.__super__.constructor.call(this)};g(md,A);md.prototype.execute=function(a){a=this.applicationState.getActiveState()===tb.ACTIVE?tb.INACTIVE:tb.ACTIVE;this.sendNotification(d.CHANGE_ACTIVE_STATE,a)};var Ta=function(a){this.data=null!=a?a:{};Ta.__super__.constructor.call(this)};g(Ta,ya);Ta.prototype.getKind=function(){return this.data.kind};Ta.prototype.getLabel=function(){return this.data.label};Ta.prototype.getLanguage=function(){return this.data.language};Ta.prototype.getId=
function(){return this.data.id};Ta.prototype.setEnabled=function(a){a!==this.data.enabled&&(this.data.enabled=a,this.changeEnabled(a),this.dispatchEvent("change"))};Ta.prototype.changeEnabled=function(a){};Ta.prototype.getEnabled=function(){return this.data.enabled};var Ma=function(){};Ma.createTextContent=function(a,b){return/[\&<>]/.test(b)?a.createCDATASection(b):a.createTextNode(b)};Ma.updateTextContent=function(a,b){var c;c=Ma.createTextContent(a.ownerDocument,b);a.removeChild(a.childNodes[0]);
a.appendChild(c);return a};Ma.serialize=function(a){var b;if(null!=a){if("string"===typeof a)return a;try{return b=new XMLSerializer,b.serializeToString(a)}catch(c){try{return document.implementation.createLSSerializer(),xmlSerializer.writeToString(a)}catch(e){try{return a.xml}catch(k){}}}}};Ma.parse=function(a){var b;window.DOMParser?(b=new DOMParser,b=b.parseFromString(a,"text/xml")):(b=new ActiveXObject("Microsoft.XMLDOM"),b.async=!1,b.loadXML(a));return b};var fb=function(){fb.__super__.constructor.call(this,
null,{});this.data.audioTracks=new za;this.data.videoTracks=new za;this.data.textTracks=new za};g(fb,puremvc.Proxy);fb.NAME="TracksProxy";fb.prototype.clear=function(){this.data.audioTracks.clear();this.data.videoTracks.clear();this.data.textTracks.clear()};fb.prototype.getAudioTracks=function(){return this.data.audioTracks};fb.prototype.getVideoTracks=function(){return this.data.videoTracks};fb.prototype.getTextTracks=function(){return this.data.textTracks};var n=function(a){n.__super__.constructor.call(this,
a)};g(n,C);n.prototype.moduleName="amp";n.prototype.playerType=null;n.prototype.hidden=!1;n.prototype.l10n=null;n.prototype.appState=null;n.prototype.mediaProxy=null;n.prototype.bindings=null;n.prototype.configuration=null;n.prototype.params=null;n.prototype.security=null;n.prototype.createModel=function(){this.appState=new v;this.registerProxy(this.appState);this.bindings=new ia;this.registerProxy(this.bindings);this.security=new U;this.registerProxy(this.security);this.mediaProxy=new q;this.registerProxy(this.mediaProxy);
this.params=new ub(this.config.params);this.registerProxy(this.params);this.configuration=new K(this.config);this.registerProxy(this.configuration)};n.prototype.resourcesLoaded=function(){n.__super__.resourcesLoaded.call(this);Object.defineProperties(this,{src:{get:this.getSrc,set:this.setSrc,enumerable:!0,configurable:!1},media:{get:this.getMedia,set:this.setMedia,enumerable:!0,configurable:!1},currentTime:{get:this.getCurrentTime,set:this.setCurrentTime,enumerable:!0,configurable:!1},autoplay:{get:this.getAutoplay,
set:this.setAutoplay,enumerable:!0,configurable:!1},duration:{get:this.getDuration,enumerable:!0,configurable:!1},playState:{get:this.getPlayState,enumerable:!0,configurable:!1},seeking:{get:this.getSeeking,enumerable:!0,configurable:!1},paused:{get:this.getPaused,enumerable:!0,configurable:!1},ended:{get:this.getEnded,enumerable:!0,configurable:!1},volume:{get:this.getVolume,set:this.setVolume,enumerable:!0,configurable:!1},muted:{get:this.getMuted,set:this.setMuted,enumerable:!0,configurable:!1},
mediaElement:{get:this.getMediaElement,enumerable:!0,configurable:!1},textTracks:{get:function(){return this.getMediaElement().textTracks},enumerable:!0,configurable:!1},container:{get:this.getContainer,enumerable:!0,configurable:!1},loop:{get:this.getLoop,set:this.setLoop,enumerable:!0,configurable:!1},displayState:{get:this.getDisplayState,set:this.setDisplayState,enumerable:!0,configurable:!1},playbackRate:{get:this.getPlaybackRate,set:this.setPlaybackRate,enumerable:!0,configurable:!1},language:{get:this.getLanguage,
set:this.setLanguage,enumerable:!0,configurable:!1},localization:{get:function(){return this.retrieveProxy(T.NAME)},enumerable:!0,configurable:!1},version:{get:this.getVersion,enumerable:!0,configurable:!1},error:{get:this.getError,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},mediaTransforms:{get:this.getMediaTransforms,enumerable:!0,configurable:!1},waiting:{get:this.getWaiting,enumerable:!0,configurable:!1},cues:{get:this.getCues,set:this.setCues,
enumerable:!0,configurable:!1},quality:{get:this.getQuality,set:this.setQuality,enumerable:!0,configurable:!1},qualityMode:{get:this.getQualityMode,set:this.setQualityMode,enumerable:!0,configurable:!1},qualityLevels:{get:this.getQualityLevels,enumerable:!0,configurable:!1},debug:{get:this.getDebug,enumerable:!0,configurable:!1},settings:{get:this.getSettings,enumerable:!0,configurable:!1},mode:{get:this.getMode,enumerable:!0,configurable:!1}})};n.prototype.createView=function(){null!=this.config.settings&&
!1!==this.config.settings.enabled&&(this._settings=new vb,this.registerMediator(this._settings))};n.prototype.createController=function(){n.__super__.createController.call(this);this.registerCommand(d.SETTINGS_CHANGE,s);this.registerCommand(d.CUES_CHANGE,s)};n.prototype.setViewComponent=function(a){a.amp=this;return n.__super__.setViewComponent.call(this,a)};n.prototype.getPlayerType=function(){return this.playerType};n.prototype.getVersion=function(){return B.getVersion()};n.prototype.getDebug=function(){return this.config.debug};
n.prototype.getMode=function(){return this.config.mode};n.prototype.createPlugins=function(){this.sendNotification(Ca.REGISTER_PLUGINS,this.config)};n.prototype.createMediaElement=function(){return null};n.prototype.createFramework=function(){n.__super__.createFramework.call(this);this.setMediaElement(this.createMediaElement());this.createPlugins()};n.prototype.getLanguage=function(){return this.retrieveProxy(T.NAME).getLanguage()};n.prototype.setLanguage=function(a){this.retrieveProxy(T.NAME).setLanguage(a);
return a};n.prototype.getLocalizedString=function(a){try{return this.retrieveProxy(T.NAME).getString(a)}catch(b){return a}};n.prototype.getMediaElement=function(){return this.appState.getMediaElement()};n.prototype.setMediaElement=function(a){this.appState.setMediaElement(a);null==a.once&&(a.once=function(a,c){var e;e=f.createUID();this[e]=function(a,b,c,e){this.removeEventListener(b,this[a]);delete this[a];c(e)}.bind(this,e,a,c);this.addEventListener(a,this[e])},a.once=a.once.bind(a));a.amp=this;
return a};n.prototype.getContainer=function(){return this.getViewComponent()};n.prototype.getAudioTracks=function(){};n.prototype.evaluateBinding=function(a){};n.prototype.evaluateBindings=function(a,b){return B.evaluateBindings(a,this.bindings.data,b)};n.prototype.canPlayType=function(a){};n.prototype.load=function(){};n.prototype.play=function(){};n.prototype.replay=function(){};n.prototype.pause=function(){};n.prototype.end=function(){};n.prototype.setParams=function(a){};n.prototype.getParams=
function(){};n.prototype.setAutoplay=function(a){};n.prototype.getAutoplay=function(){};n.prototype.setLoop=function(a){};n.prototype.getLoop=function(){};n.prototype.setMuted=function(a){};n.prototype.getMuted=function(){};n.prototype.mute=function(){return this.setMuted(!0)};n.prototype.unmute=function(){return this.setMuted(!1)};n.prototype.setMedia=function(a){};n.prototype.getMedia=function(){};n.prototype.setCurrentTime=function(a){};n.prototype.getCurrentTime=function(){};n.prototype.getCurrentTimeUTC=
function(){};n.prototype.getDuration=function(){};n.prototype.setSrc=function(a){};n.prototype.getSrc=function(){};n.prototype.setSource=function(a){};n.prototype.getSource=function(){};n.prototype.setVolume=function(a){};n.prototype.getVolume=function(){};n.prototype.getSeeking=function(){};n.prototype.getPaused=function(){};n.prototype.getEnded=function(){};n.prototype.setDisplayState=function(a){};n.prototype.getDisplayState=function(){};n.prototype.getError=function(){};n.prototype.enterFullScreen=
function(){};n.prototype.exitFullScreen=function(){};n.prototype.setHidden=function(a){var b;a!==this.appState.getHidden()&&(this.appState.setHidden(a),b=this.viewComponent.style,!0===a?(this.hiddenData={width:b.width,height:b.height,paused:this.getPaused()},b.width=b.height="0px",!1===this.hiddenData.paused&&this.pause()):(b.width=this.hiddenData.width,b.height=this.hiddenData.height,!1===this.hiddenData.paused&&this.play(),this.hiddenData=null))};n.prototype.getHidden=function(){return this.appState.getHidden()};
n.prototype.recordContentChange=function(a){};n.prototype.setPlaybackRate=function(){};n.prototype.getPlaybackRate=function(){};n.prototype.setCues=function(a){this.mediaProxy.setCues(a);return a};n.prototype.getCues=function(){return this.mediaProxy.getCues()};n.prototype.setQuality=function(a){};n.prototype.getQuality=function(){};n.prototype.getQualityLevels=function(){};n.prototype.getQualityMode=function(){};n.prototype.setQualityMode=function(a){};n.prototype.getPlaystate=function(){};n.prototype.getMediaTransforms=
function(){return this.mediaProxy.getTransforms()};n.prototype.authorize=function(a){this.security.authorize(a)};n.prototype.goLive=function(){};n.prototype.appendChild=function(a){this.mediator.addLayer(a)};n.prototype.removeChild=function(a){this.mediator.removeLayer(a)};n.prototype.getSettings=function(){var a;return(null!=(a=this._settings)?a.getSettings():void 0)||{change:function(){}}};var r=function(a){r.__super__.constructor.call(this,a);this.fps=Pb};g(r,n);r.prototype.playerType="html";r.prototype.playerCore=
null;r.prototype.tracks=null;r.prototype.mediator=null;r.prototype.createMediaElement=function(){var a;this.mediator=new gb("html5","video");this.sendNotification(d.PLAYBACK_CORE_CHANGE,this.mediator);a=this.mediator.getViewComponent();null==a.dataset&&(a.dataset={});return a};r.prototype.createModel=function(){var a;r.__super__.createModel.call(this);this.registerProxy(new T(this.config));a=new aa;this.registerProxy(a);this.playerCore=new V(a,this.config.getPlaybackOrder);this.registerProxy(this.playerCore);
this.tracks=new fb;this.registerProxy(this.tracks);this.appState.setRenderMode(Gd.HTML);this.bindings.initialize()};r.prototype.createView=function(){r.__super__.createView.call(this);this.mediator=new ra("html5",this.getViewComponent());this.registerMediator(this.mediator);this.registerMediator(new Da);this.registerMediator(new wb);this.registerMediator(new Ua)};r.prototype.createController=function(){r.__super__.createController.call(this);this.registerCommand(Ca.PLUGINS_INITIALIZED,kc);this.registerCommand(d.PLAY,
wc);this.registerCommand(d.PLAYING,lc);this.registerCommand(d.PAUSE,mc);this.registerCommand(d.CHANGE_PLAY_STATE,Vb);this.registerCommand(d.TOGGLE_FULL_SCREEN,Tc);this.registerCommand(d.CHANGE_DISPLAY_STATE,Sa);this.registerCommand(d.TOGGLE_ACTIVE,md);this.registerCommand(d.CHANGE_ACTIVE_STATE,ld);this.registerCommand(d.SET_MEDIA,xc);this.registerCommand(d.CHANGE_MEDIA,yc);this.registerCommand(d.MEDIA_VALIDATED,nc);this.registerCommand(d.MEDIA_CHANGE,Wb);this.registerCommand(d.UPDATE_DATA_BINDINGS,
Xb);this.registerCommand(d.START,$c);this.registerCommand(d.SEEK,oc);this.registerCommand(d.SEEKING,pc);this.registerCommand(d.SEEKED,Xc);this.registerCommand(d.CHANGE_VOLUME,Wc);this.registerCommand(d.CHANGE_MUTED,bd);this.registerCommand(d.CHANGE_AUTOPLAY,Uc);this.registerCommand(d.CHANGE_LOOP,Vc);this.registerCommand(d.END,Zc);this.registerCommand(d.ENDED,qc);this.registerCommand(d.REPLAY,Yc);this.registerCommand(d.ERROR,Yb);this.registerCommand(d.READY,zc);this.registerCommand(d.WAITING,rc);this.registerCommand(d.CHANGE_DURATION,
nd);this.registerCommand(d.CHANGE_PARAMS,Ac);this.registerCommand(d.IS_USER_ACTIVE,ad);this.registerCommand(Ea.AUTHORIZED,sc);this.registerCommand(d.INITIALIZED,cd);this.registerCommand(d.REGISTER_PLAYBACK_CORE,dd);this.registerCommand(Ha.TOGGLE_PLAY_PAUSE,Sc);this.registerCommand(Ha.SEEK,oc);this.registerCommand(d.CHANGE_PLAYBACK_TARGET,Bc);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Zb);this.registerCommand(d.RECORD_CONTENT_CHANGE,ed);this.registerCommand(d.TIME_UPDATE,tc);this.registerCommand(d.TOGGLE_MUTED,
fd);this.registerCommand(d.VOLUME_CHANGE,vc);this.registerCommand(d.PLAY_REQUEST,uc);this.registerCommand(d.HAS_POST_CONTENT,id);this.registerCommand(d.LOCK,jd);this.registerCommand(Ha.GO_LIVE,kd);this.registerCommand(d.PLAY_STATE_CHANGE,s);this.registerCommand(d.PROGRESS,s);this.registerCommand(d.CAN_PLAY,s);this.registerCommand(d.CAN_PLAY_THROUGH,s);this.registerCommand(d.LOAD_START,s);this.registerCommand(d.STARTED,s);this.registerCommand(d.LOADED_METADATA,s);this.registerCommand(d.DURATION_CHANGE,
s);this.registerCommand(d.MEDIUM_CHANGE,s);this.registerCommand(d.TEMPORAL_TYPE_CHANGE,s);this.registerCommand(d.LANGUAGE_CHANGE,s);this.registerCommand(d.PLAYBACK_TARGET_AVAILABLE,s);this.registerCommand(Ea.AUTHORIZE,s);this.registerCommand(Ea.AUTHORIZATION_FAILED,s);this.registerCommand(Ea.AUTHENTICATION_FAILED,s);this.registerCommand(Ea.AUTHORIZATION_EXPIRED,s);this.registerCommand(d.FAIL_OVER_ATTEMPT,s);this.registerCommand(d.IS_LIVE,s);this.registerCommand(d.TIMED_METADATA,s);this.registerCommand(d.PAUSED,
s);this.registerCommand(d.STALLED,s);this.registerCommand(d.QUALITY_CHANGE,s);this.registerCommand(d.QUALITY_CHANGING,s);this.registerCommand(d.QUALITY_LEVELS_LOADED,s);this.registerCommand(d.MUTE_CHANGE,s);this.registerCommand(d.RESUME,s);this.registerCommand(d.FRAGMENT_LOAD_START,s);this.registerCommand(d.FRAGMENT_LOADED,s);this.registerCommand(d.MEDIA_SEQUENCE_STARTED,s);this.registerCommand(d.MEDIA_SEQUENCE_ENDED,Ub);this.registerCommand(d.ENABLE_VIDEO_EVENTS,gd);this.registerCommand(d.DISABLE_VIDEO_EVENTS,
hd)};r.prototype.setMediaElement=function(a){var b;b=this.getMediaElement();null!=b&&b.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged);a.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged);r.__super__.setMediaElement.call(this,a);return a};r.prototype.presentationModeChanged=function(a){"inline"===a.target.webkitPresentationMode&&(a.target.controls=!1)};r.prototype.evaluateBinding=function(a){return this.bindings.evaluateBinding(a)};r.prototype.recordContentChange=
function(a){this.sendNotification(d.RECORD_CONTENT_CHANGE,a)};r.prototype.canPlayType=function(a){return this.retrieveProxy(p.NAME).canPlayType(a)};r.prototype.getAudioTracks=function(){return this.retrieveProxy(fb.NAME).getAudioTracks()};r.prototype.load=function(){this.sendNotification(d.LOAD)};r.prototype.play=function(){this.sendNotification(d.PLAY,!0)};r.prototype.replay=function(){this.sendNotification(d.REPLAY)};r.prototype.pause=function(){this.sendNotification(d.PAUSE)};r.prototype.end=function(){this.sendNotification(d.END)};
r.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};r.prototype.getParams=function(){return this.params.getData()};r.prototype.setAutoplay=function(a){this.sendNotification(d.CHANGE_AUTOPLAY,a);return a};r.prototype.getAutoplay=function(){var a,b;a=this.retrieveProxy(p.NAME);return(f.isAutoplaySupported()&&this.configuration.getMuted()||a.initialized)&&(this.configuration.getAutoplay()||!0===(null!=(b=this.getMedia())?b.autoplay:void 0))};r.prototype.setLoop=function(a){this.sendNotification(d.CHANGE_LOOP,
a);return a};r.prototype.getLoop=function(){return this.configuration.getLoop()};r.prototype.setMuted=function(a){this.sendNotification(d.CHANGE_MUTED,a);return a};r.prototype.getMuted=function(){return this.retrieveProxy(p.NAME).getMuted()};r.prototype.setMedia=function(a){this.sendNotification(d.SET_MEDIA,a);return a};r.prototype.getMedia=function(){return this.mediaProxy.getData()};r.prototype.setCurrentTime=function(a){this.sendNotification(d.SEEK,a);return a};r.prototype.getCurrentTime=function(){return this.retrieveProxy(p.NAME).getCurrentTime()};
r.prototype.getDuration=function(){return this.mediaProxy.getDuration()};r.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,{src:a});return a};r.prototype.getSrc=function(){return this.mediaProxy.getSrc()};r.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};r.prototype.getSource=function(){return this.mediaProxy.getSource()};r.prototype.setVolume=function(a){this.sendNotification(d.CHANGE_VOLUME,a);return a};r.prototype.getVolume=function(){return this.retrieveProxy(p.NAME).getVolume()};
r.prototype.getSeeking=function(){return this.retrieveProxy(p.NAME).getSeeking()};r.prototype.getPaused=function(){return this.retrieveProxy(p.NAME).getPaused()};r.prototype.getEnded=function(){return this.appState.getEnded()};r.prototype.getWaiting=function(){return this.appState.getWaiting()};r.prototype.getError=function(){return this.getMediaElement().error};r.prototype.setDisplayState=function(a){this.sendNotification(d.CHANGE_DISPLAY_STATE,a)};r.prototype.getDisplayState=function(a){return this.appState.getDisplayState()};
r.prototype.enterFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,R.FULL_SCREEN)};r.prototype.exitFullScreen=function(){this.sendNotification(d.CHANGE_DISPLAY_STATE,R.NORMAL)};r.prototype.setPlaybackRate=function(a){var b;!0!==(null!=(b=this.ads)?b.inProgress:void 0)&&a!==this.getMediaElement().playbackRate&&(this.getMediaElement().playbackRate=a,this.dispatchEvent(new H(Events.PLAYBACK_RATE_CHANGE,a)))};r.prototype.getPlaybackRate=function(){return this.getMediaElement().playbackRate};
r.prototype.getQualityLevels=function(){return this.retrieveProxy(p.NAME).getQualityLevels()};r.prototype.setQuality=function(a){return this.retrieveProxy(p.NAME).setQuality(a)};r.prototype.getQuality=function(){return this.retrieveProxy(p.NAME).getQuality()};r.prototype.getQualityMode=function(){return this.retrieveProxy(p.NAME).getQualityMode()};r.prototype.setQualityMode=function(a){return this.retrieveProxy(p.NAME).setQualityMode(a)};r.prototype.getPlayState=function(){return this.appState.getPlayState()};
r.prototype.goLive=function(){return this.retrieveProxy(p.NAME).goLive()};r.prototype.destroy=function(){var a,b;null!=(a=this.retrieveProxy(V.NAME))&&null!=(b=a.activePlaybackCore)&&"function"===typeof b.destroy&&b.destroy();r.__super__.destroy.call(this)};var x={READY:"jsApiReady",RESET:"mediaPlayerReset",LOADING:"mediaPlayerLoading",PLAYER_ERROR:"mediaPlayerError",MEDIA_ERROR:"mediaError",ERROR_STREAM_NOT_FOUND:"mediaPlayerErrorStreamNotFound",CAPABILITY_CHANGE:"mediaPlayerCapabilityChange",PLAYBACK_OPEN:"mediaPlayerPlaybackOpen",
PLAYBACK_CLOSE:"mediaPlayerPlaybackClose",PLAYING:"mediaPlayerPlaying",ENDED:"mediaPlayerPlaybackClose",MEDIA_SEQUENCE_ENDED:"mediaPlayerPlaybackSequenceComplete",PAUSED:"mediaPlayerPaused",BUFFERING:"mediaPlayerBuffering",DURATION_CHANGE:"mediaPlayerDurationChange",TIME_UPDATE:"mediaPlayerPlayheadUpdate",SEEKING_CHANGE:"mediaPlayerSeekingChange",ERROR:"error",VOLUME_CHANGE:"mediaPlayerVolumeChanged",PLAY_STATE_CHANGE:"mediaPlayerPlayStateChange",STATE_CHANGE:"mediaPlayerStateChange",CAPTION_DATA_CHANGE:"mediaPlayerCaptiondataChange",
FAIL_OVER_ATTEMPT:"mediaPlayerFailoverAttempt",ELEMENT_EVENT:"mediaPlayerElementEvent",PLAY:"mediaPlayerResumeOrPausePlayback",APPLICATION_STATE_CHANGE:"mediaPlayerApplicationStateChange",INITIALIZED:"mediaPlayerInitialized",FULLSCREEN_CHANGE:"mediaPlayerFullscreenChange",AUTHORIZE:"mediaPlayerAuthenticate",CAPTIONING_REQUEST:"mediaPlayerCaptioningRequest",CAPTION_LANG_CHANGE:"mediaPlayerCaptionLangChange",RECOMMENDATIONS_LOADED:"mediaPlayerRecommendationsLoaded",RECOMMENDATION_SELECTED:"mediaPlayerRecommendationSelected",
SHARE:"mediaPlayerShare",SHARE_REQUEST:"mediaPlayerShareRequest",AUTO_ADVANCE:"mediaPlayerAutoAdvance",CREATE_FLASH_VARS:"createFlashVars",CREATE_XML:"createXML",FLASH_CREATED:"flashCreated",PLAY_REQUEST:"mediaPlayerPlaybackSequenceInitiated",LOAD_FEED:"mediaPlayerDataFeedRequested",FEED_UPDATED:"mediaPlayerDataFeedUpdated",FEED_LOADED:"mediaPlayerFeedLoaded",TIMED_METADATA:"mediaPlayerSendCuePoint",MEDIA_PLAYER_ID3_UPDATED:"mediaPlayerID3Updated"},p=function(){p.__super__.constructor.call(this,p.NAME);
this.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!1,seeking:!1,loading:!1,waiting:!1};"desktop"===f.getDevice()&&(this.initialized=!0);this.handlers={timeupdate:this.ontimeupdate.bind(this),durationchange:this.ondurationchange.bind(this),play:this.onplay.bind(this),playing:this.onplaying.bind(this),pause:this.onpause.bind(this),loadeddata:this.onloadeddata.bind(this),waiting:this.onwaiting.bind(this),seeking:this.onseeking.bind(this),seeked:this.onseeked.bind(this),
ended:this.onended.bind(this),progress:this.onprogress.bind(this),error:this.onerror.bind(this),loadstart:this.onloadstart.bind(this),canplay:this.oncanplay.bind(this),canplaythrough:this.oncanplaythrough.bind(this),loadedmetadata:this.onloadedmetadata.bind(this),stalled:this.onstalled.bind(this)};this.resume={event:-1===f.getIEVersion()||11===f.getIEVersion()?"loadedmetadata":"canplaythrough",listener:this.resumestart.bind(this)};this.textTrackHandlers={addtrack:this.onaddtrack.bind(this)};this.fps=
Pb;this.onneedkey=this.onneedkey.bind(this)};g(p,puremvc.Proxy);p.NAME="PlaybackProxy";p.prototype.data=null;p.prototype.initialized=!1;p.prototype.enabled=null;p.prototype.handlers=null;p.prototype.resume=null;p.prototype.playWhenLoaded=!1;p.prototype.metadataloaded=!1;p.prototype.activeCuesIndex=0;p.prototype.id3CueType=null;p.prototype.getEnabled=function(){return this.enabled};p.prototype.setEnabled=function(a){if(a!==this.enabled)return this.enabled=a,!0===this.enabled?this.load():this.applyHandlers(!1),
a};p.prototype.applyHandlers=function(a){var b,c,e,k;null==a&&(a=!0);e=this.getMediaElement();a=a?"addEventListener":"removeEventListener";k=this.handlers;for(c in k)b=k[c],e[a](c,b)};p.prototype.resumestart=function(a){var b=this;this.getMediaElement();this.handlers.durationchange(a);0<this.data.currentTime?setTimeout(function(){b.seek(b.data.currentTime).then(b.resumecomplete.bind(b))},50):this.resumecomplete()};p.prototype.resumecomplete=function(){this.data.loading=!1;this.applyHandlers(!0);!0===
this.playWhenLoaded&&setTimeout(this.play.bind(this),1)};p.prototype.onaddtrack=function(a){var b=this;a=a.track;"metadata"===a.kind&&(a.mode="hidden",a.addEventListener("cuechange",function(a){var e,k,eb;eb=a.target.activeCues;e=0;for(k=eb.length;e<k;e++)a=eb[e],b.sendNotification(d.TIMED_METADATA,a)}))};p.prototype.ontimeupdate=function(a){var b;b=this.facade.ads||{};!0!==(("function"===typeof b.getInProgress?b.getInProgress():void 0)||b.inProgress)&&(this.data.currentTime=a.target.currentTime,
this.sendNotification(d.TIME_UPDATE,this.data.currentTime))};p.prototype.ondurationchange=function(a){a=a.target.duration;a===this.data.duration||0===a||isNaN(a)||(this.data.duration=a,/Android [4-7]/.test(navigator.userAgent)&&-1!==this.getMediaElement().src.indexOf(".m3u8")&&Infinity===a||this.sendNotification(d.CHANGE_DURATION,a))};p.prototype.onplay=function(a){this.data.paused=!1};p.prototype.onplaying=function(a){this.data.paused=!1;this.data.seeking=!1;this.data.waiting=!1;this.sendNotification(d.PLAYING)};
p.prototype.onpause=function(a){!0===this.getMediaElement().ended||!0===this.data.waiting&&"hls"===this.playbackCoreName||(this.data.paused=!0,0<a.target.readyState&&(this.sendNotification(d.PAUSED),this.sendNotification(d.CHANGE_PLAY_STATE,L.PAUSED)))};p.prototype.onloadeddata=function(a){this.sendNotification(d.LOADED_DATA)};p.prototype.onwaiting=function(a){this.data.waiting=!0;this.sendNotification(d.WAITING)};p.prototype.onstalled=function(a){this.sendNotification(d.STALLED)};p.prototype.onseeking=
function(a){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate);this.data.seeking=!0;this.sendNotification(d.SEEKING)};p.prototype.onseeked=function(a){this.data.seeking=!1;this.sendNotification(d.SEEKED,a.target.currentTime);this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)};p.prototype.onended=function(a){this.data.ended=!0;this.sendNotification(d.ENDED)};p.prototype.onprogress=function(a){var b,c;try{c=this.getMediaElement(),b=c.buffered,
this.sendNotification(d.PROGRESS,b.end(b.length-1)/c.duration)}catch(e){}};p.prototype.onerror=function(a){this.sendNotification(d.ERROR,this.getMediaElement().error)};p.prototype.onloadstart=function(a){this.sendNotification(d.LOAD_START)};p.prototype.oncanplay=function(a){this.sendNotification(d.CAN_PLAY)};p.prototype.oncanplaythrough=function(a){this.sendNotification(d.CAN_PLAY_THROUGH);this.sendNotification(d.PROGRESS,this.getDuration())};p.prototype.onloadedmetadata=function(a){this.metadataloaded=
!0;this.createTracks();this.sendNotification(d.ENABLE_FULL_SCREEN);this.sendNotification(d.LOADED_METADATA)};p.prototype.applyTextTrackHandlers=function(a){var b;a=!0===a?"addEventListener":"removeEventListener";if(null!=(b=this.getMediaElement().textTracks))b[a]("addtrack",this.textTrackHandlers.addtrack)};p.prototype.createTracks=function(){var a,b,c,e,k,d,h;a=this.getMediaElement().audioTracks;k=this.facade.retrieveProxy(fb.NAME).getAudioTracks();if(null!=a)for(b=a.length||0,c=d=0,h=a.length;d<
h;c=++d)e=a[c],k.add(new Ta(e),c+1===b)};p.prototype.reset=function(){this.data.currentTime=0;this.data.duration=0;this.data.src=null;this.data.ended=!1;this.data.paused=!1;this.data.seeking=!1;this.data.started=!1;this.data.loading=!1;this.applyTextTrackHandlers(!1)};p.prototype.getStarted=function(){return this.data.started};p.prototype.getMediaElement=function(){return this.facade.getMediaElement()};p.prototype.canPlayMedium=function(a){return"video"===a};p.prototype.canPlayTemporalType=function(a){return"dvr"!==
a};p.prototype.canPlayType=function(a){var b;b=document.createElement("video").canPlayType(a)||"";(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&a===f.mimeTypes.m3u8&&(b="maybe");"probably"===b&&/video\/f4m|x-flv/.test(a)&&/UCBrowser/.test(navigator.userAgent)&&(b="");return b};p.prototype.getPaused=function(){return this.data.paused};p.prototype.getSeeking=function(){return this.data.seeking};p.prototype.getCurrentTime=function(){return this.data.currentTime};
p.prototype.setCurrentTime=function(a){if(a!==this.data.currentTime)return this.data.currentTime=a,this.getStarted()&&this.seek(a),a};p.prototype.seek=function(a){var b=this;null==a&&(a=this.data.currentTime);return new Promise(function(c,e){var k,d,h;try{h=b.getMediaElement(),h.once("seeked",function(){setTimeout(c,10,a)}),h.currentTime=a,d=navigator.userAgent,/Android.*Chrome/.test(d)&&(k=setInterval(function(){Math.round(h.currentTime)===Math.round(a)&&(clearInterval(k),h.dispatchEvent(new CustomEvent("seeked")))},
10))}catch(f){e(f)}})};p.prototype.goLive=function(){var a,b;a=this.getMediaElement();b=Infinity===a.duration?a.seekable.end(0):a.duration;a.currentTime=b};p.prototype.getVolume=function(){var a;a=this.getMediaElement();return!0===a.muted?0:a.volume};p.prototype.setVolume=function(a){this.getMuted()&&0<a?this.setMuted(!1):this.getMuted()||0!==a||this.setMuted(!0);this.sendNotification(d.VOLUME_CHANGE,this.getMediaElement().volume=a);return a};p.prototype.getMuted=function(){return this.data.muted};
p.prototype.setMuted=function(a){var b;if(this.data.muted!==a)return this.data.muted=a,!0===this.data.muted?(this.data.volume=this.getVolume(),b=0):b=this.data.volume,this.getMediaElement().muted=a,this.sendNotification(d.CHANGE_VOLUME,b),this.sendNotification(d.MUTE_CHANGE,this.data.muted),a};p.prototype.getDuration=function(){return this.data.duration};p.prototype.play=function(){if(!0!==this.data.started){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,!1===this.metadataloaded)return}else if(!0===
this.data.loading){this.playWhenLoaded=!0;return}this.getPaused()&&this.sendNotification(d.RESUME);this.getMediaElement().play()};p.prototype.pause=function(){this.data.paused=!0;this.getMediaElement().pause()};p.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()};p.prototype.load=function(){var a;this.sendNotification(d.WAITING);this.data.loading=!0;this.metadataloaded=this.playWhenLoaded=!1;a=this.getMediaElement();a.once(this.resume.event,this.resume.listener);a.addEventListener("loadedmetadata",
this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);a.addEventListener("webkitneedkey",this.onneedkey);a.addEventListener("error",this.handlers.error);this.applyTextTrackHandlers(!0);this.applySrc()};p.prototype.applySrc=function(){var a,b,c;b=this.getSrc();null!=b&&""!==b||this.sendNotification(d.ERROR,"The value of src is not supported: "+value);a=this.getMediaElement();a.src=b;!0===a.muted&&
(this.data.muted=!0);f.isIPad()&&8>(null!=(c=f.getIOSversion())?c[0]:void 0)?setTimeout(a.load.bind(a),100):a.load()};p.prototype.setQuality=function(a){};p.prototype.getQuality=function(){};p.prototype.getQualityLevels=function(){return[]};p.prototype.getQualityMode=function(){};p.prototype.setQualityMode=function(a){};p.prototype.destroy=function(){var a,b,c,e;a=this.getMediaElement();e=this.handlers;for(b in e)c=e[b],a.removeEventListener(b,c);a.removeEventListener(this.resume.event,this.resume.listener)};
p.prototype.onneedkey=function(a){var b,c,e,k,d,h,J=this;h=a.target;e=f.getKeySystem();k=this.facade.mediaProxy.getKeys()[e];null!=k&&"com.apple.fps.1_0"===e&&(c=a.initData,b=this.fps.extractContentId(c,k),d=this.fps.extractServerUrl(c,k),this.fps.requestCertificate(k).then(function(a){return J.fps.concatInitDataIdAndCertificate(c,b,a)}).then(function(a){var c;if(!WebKitMediaKeys.isTypeSupported(e,"video/mp4"))throw"Key System not supported";null==h.webkitKeys&&h.webkitSetMediaKeys(new WebKitMediaKeys(e));
if(null==h.webkitKeys)throw"Could not create MediaKeys";c=h.webkitKeys.createSession("video/mp4",a);if(null==c)throw"Could not create key session";c.addEventListener("webkitkeymessage",function(a){J.fps.requestLicense(a.message,b,d).then(function(a){c.update(a)})["catch"](function(a){J.facade.logger.error("[AMP DRM] A key request error was encountered.",a)})});c.addEventListener("webkitkeyadded",function(a){J.facade.logger.log("[AMP DRM] Decryption key was added to session.")});c.addEventListener("webkitkeyerror",
function(a){J.facade.logger.log("[AMP DRM] A decryption key error was encountered.",a)})})["catch"](function(a){J.facade.logger.error(a)}))};var od=function(){od.__super__.constructor.call(this)};g(od,puremvc.SimpleCommand);od.prototype.execute=function(a){setTimeout(this.facade.pluginsinitialized.bind(this.facade),0)};var pd=function(){pd.__super__.constructor.call(this)};g(pd,A);pd.prototype.execute=function(a){this.player.started=!0;this.sendNotification(d.STARTED,a.getBody());this.sendNotification(d.PLAY,
a.getBody())};var Bc=function(){Bc.__super__.constructor.call(this)};g(Bc,A);Bc.prototype.execute=function(a){a=a.getBody();this.applicationState.setPlaybackTarget(a);"amp"!==a?this.applicationState.getPlayState()!==L.PAUSED&&this.facade.pause():this.applicationState.getPlayState()===L.PLAYING&&this.facade.play()};var Va=function(a,b){this.player=a;this.config=b;Va.__super__.constructor.call(this,this.constructor.NAME);this.proxy=new T(this.config);this.player.registerProxy(this.proxy)};g(Va,puremvc.Mediator);
Va.prototype.player=null;Va.prototype.config=null;Va.prototype.proxy=null;Va.NAME="LocalizationWrapper";Va.prototype.getString=function(a){return this.proxy.getString(a)};Va.prototype.listNotificationInterests=function(){return[x.CREATE_FLASH_VARS,x.CREATE_XML]};Va.prototype.handleNotification=function(a){var b,c,e,k,d,h,f,t;Va.__super__.handleNotification.call(this,a);d=a.getName();a=a.getBody();switch(d){case x.CREATE_FLASH_VARS:c=a.flashvars;c.locale_setting=this.proxy.getLocaleId();break;case x.CREATE_XML:for(e in a=
a.xml,b=a.firstChild,d=a.getElementsByTagName("locales")[0],null==d&&(d=a.createElement("locales"),b.appendChild(d)),t=this.proxy.getLocales(),t)for(c in k=t[e],b=a.createElement("locale"),b.setAttribute("id",e),d.appendChild(b),k)f=k[c],h=a.createElement("property"),h.setAttribute("key",c),f=Ma.createTextContent(a,f),h.appendChild(f),b.appendChild(h)}};var Eb=function(a){null==this.cssPrefix&&(this.cssPrefix=Ob.PREFIX);Eb.__super__.constructor.call(this,this.mediatorName,a)};g(Eb,puremvc.Mediator);
Eb.prototype.config=null;Eb.prototype.cssPrefix=null;Eb.prototype.classList=null;Eb.prototype.initializeNotifier=function(a){Eb.__super__.initializeNotifier.call(this,a);this.config=(this.facade.player||this.facade).retrieveProxy(O.NAME);this.classList=this.classList=new ja(this.viewComponent)};var Qb=function(a){Qb.__super__.constructor.call(this,a)};g(Qb,Eb);Qb.prototype.localizationManager=null;Qb.prototype.initializeNotifier=function(a){Qb.__super__.initializeNotifier.call(this,a);this.localizationManager=
(this.facade.player||this.facade).retrieveProxy(T.NAME)};var P=function(a,b,c,e){this.componentName=null!=a?a:this.componentName;this.componentType=null!=b?b:this.componentType;this.parent=c;this.element=e;null==this.mediatorName&&(this.mediatorName=this.createMediatorName());P.__super__.constructor.call(this,this.viewComponent)};g(P,Qb);P.prototype.componentName=null;P.prototype.componentType=null;P.prototype.parent=null;P.prototype.element=null;P.prototype.classList=null;P.prototype.state=null;
P.prototype.disabled=!1;P.prototype.onRegister=function(){this.viewComponent=this.createViewComponent(this.parent,this.element);this.classList=this.viewComponent._classList;va.bindEvents(this.viewComponent,this)};P.prototype.createViewComponent=function(a,b){var c;c=this.getTypeList();return va.create(c,a,b)};P.prototype.createMediatorName=function(){var a;a=this.getTypeList();a.push("mediator");a.push(va.createUID());return a.join("-")};P.prototype.getTypeList=function(){var a;a=[];null!=this.componentName&&
a.push(this.componentName);null!=this.componentType&&(a=a.concat(this.componentType));return a};P.prototype.create=function(a,b,c,e){null==b&&(b=this);!1===b&&(b=null);return va.create(a,b,c,e)};P.prototype.createText=function(a,b,c,e){null==c&&(c=this);return va.create(a,c,e,b)};P.prototype.setState=function(a){if(a!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=a,null!=this.state&&this.classList.add(this.state),a};P.prototype.getState=function(){return this.state};
P.prototype.setDisabled=function(a){if(a!==this.disabled)return(this.disabled=a)?this.classList.add("disabled"):this.classList.remove("disabled"),a};P.prototype.getDisabled=function(){return this.disabled};var gb=function(a,b){this.mediatorName=""+this.componentType+"-mediator";gb.__super__.constructor.call(this,a,null,null,b)};g(gb,P);gb.prototype.componentType="media-element";gb.prototype.created=!1;gb.prototype.onRegister=function(){!0!==this.created&&(this.created=!0,gb.__super__.onRegister.call(this))};
var Na=function(){Na.__super__.constructor.call(this)};g(Na,P);Na.prototype.componentType="layer";Na.prototype.onRegister=function(){Na.__super__.onRegister.call(this);this.registerLayer()};Na.prototype.onRemove=function(){Na.__super__.onRemove.call(this);this.removeLayer()};Na.prototype.registerLayer=function(){this.sendNotification(d.ADD_LAYER,this.viewComponent)};Na.prototype.removeLayer=function(){this.sendNotification(d.REMOVE_LAYER,this.viewComponent)};var wb=function(){wb.__super__.constructor.call(this)};
g(wb,Na);wb.prototype.componentName="video";wb.prototype.listNotificationInterests=function(){return[d.PLAYBACK_CORE_CHANGE]};wb.prototype.mediator=null;wb.prototype.mediaElement=null;wb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName()),(b=null!=(null!=a?a.getViewComponent:void 0))?
(this.facade.registerMediator(a),this.mediator=a,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=a),null!=this.mediaElement&&this.viewComponent.appendChild(this.mediaElement)}};var ra=function(a,b){this.componentName=a;this.layers=[];ra.__super__.constructor.call(this,null,null,null,b)};g(ra,P);ra.prototype.componentType="player";ra.prototype.core=null;ra.prototype.medium=null;ra.prototype.layers=null;ra.prototype.ready=!1;ra.prototype.onRegister=function(){var a;
ra.__super__.onRegister.call(this);a=f.getDevice();null!=a&&this.classList.add(a);f.isTouchDevice()&&this.classList.add("touch")};ra.prototype.listNotificationInterests=function(){return[d.DISPLAY_STATE_CHANGE,d.ACTIVE_STATE_CHANGE,d.PLAY_STATE_CHANGE,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.MEDIUM_CHANGE,d.DURATION_CHANGE,d.TEMPORAL_TYPE_CHANGE,d.IS_LIVE,d.ADD_LAYER,d.REMOVE_LAYER,d.READY]};ra.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ACTIVE_STATE_CHANGE:case d.PLAY_STATE_CHANGE:case d.DISPLAY_STATE_CHANGE:case d.MEDIUM_CHANGE:b=
a.value;a=a.previous;null!=a&&this.classList.contains(a)&&this.classList.remove(a);null!=b&&this.classList.add(b);break;case d.ADD_APPLICATION_STATE:this.classList.add(a);break;case d.REMOVE_APPLICATION_STATE:this.classList.remove(a);break;case d.TEMPORAL_TYPE_CHANGE:a.previous&&this.sendNotification(d.REMOVE_APPLICATION_STATE,a.previous);a.value&&this.sendNotification(d.ADD_APPLICATION_STATE,a.value);break;case d.IS_LIVE:!0===a?this.sendNotification(d.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(d.REMOVE_APPLICATION_STATE,
"is-live");break;case d.DURATION_CHANGE:3600<a?this.sendNotification(d.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(d.REMOVE_APPLICATION_STATE,"long-form");break;case d.ADD_LAYER:this.addLayer(a);break;case d.REMOVE_LAYER:this.removeLayer(a);break;case d.READY:this.initialize(),this.viewCreated()}};ra.prototype.initialize=function(){var a,b,c,e;this.ready=!0;e=this.layers;b=0;for(c=e.length;b<c;b++)a=e[b],this.viewComponent.contains(a)||this.viewComponent.appendChild(a)};ra.prototype.viewCreated=
function(){this.sendNotification(d.VIEW_CREATED)};ra.prototype.addLayer=function(a){this.layers.push(a);this.ready&&this.viewComponent.appendChild(a)};ra.prototype.removeLayer=function(a){this.viewComponent.contains(a)&&this.viewComponent.removeChild(a);a=this.layers.indexOf(a);0<=a&&this.layers.splice(a,1)};var xb=function(a){xb.__super__.constructor.call(this,this.type,a)};g(xb,ra);xb.NAME="FlashPlayerMediator";xb.prototype.type="flash";xb.prototype.listNotificationInterests=function(){return xb.__super__.listNotificationInterests.call(this).concat([Ca.PLUGINS_INITIALIZED])};
xb.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.READY:this.viewCreated();return;case Ca.PLUGINS_INITIALIZED:this.initialize();return}xb.__super__.handleNotification.call(this,a)};var Zb=function(){Zb.__super__.constructor.call(this)};g(Zb,s);Zb.prototype.execute=function(a){var b;b="amp"===a.getBody().value?d.REMOVE_APPLICATION_STATE:d.ADD_APPLICATION_STATE;this.sendNotification(b,"remote-playback");Zb.__super__.execute.call(this,a)};var Cc=function(){Cc.__super__.constructor.call(this)};
g(Cc,s);Cc.prototype.execute=function(a){Cc.__super__.execute.call(this,a);a=f.clone(this.media.getData());a.src=this.media.getSrc();this.facade.getMediaElement().authenticationComplete({media:a})};var aa=function(a,b){this.supportedTypes=null!=a?a:this.supportedTypes;this.config=b;aa.__super__.constructor.call(this);this.temporalTypes=["vod","live","ondemand"]};g(aa,p);aa.prototype.temporalTypes=null;aa.prototype.supportedTypes=null;aa.prototype.playbackCoreName="default";aa.prototype.config=null;
aa.prototype.onRegister=function(){this.mediaProxy=this.facade.retrieveProxy(q.NAME)};aa.prototype.getUseMAE=function(){var a;a=this.config.mae;return null!=a&&!1!==a.enabled};aa.prototype.getPlaybackCoreName=function(){return this.playbackCoreName};aa.prototype.getSupportedTypes=function(){return this.supportedTypes||[]};aa.prototype.setSupportedTypes=function(a){return this.supportedTypes=a};aa.prototype.getTemporalTypes=function(){return this.temporalTypes||[]};aa.prototype.setTemporalTypes=function(a){return this.temporalTypes=
a};aa.prototype.canPlayTemporalType=function(a){return-1!==this.getTemporalTypes().indexOf(a)};aa.prototype.canPlayType=function(a){return null!=this.supportedTypes?-1!==this.getSupportedTypes().indexOf(a)?"maybe":"":aa.__super__.canPlayType.call(this,a)};var ba=function(a){this.player=a;ba.__super__.constructor.call(this)};g(ba,aa);ba.NAME=p.NAME;ba.prototype.player=null;ba.prototype.initialized=!0;ba.prototype.playbackCoreName="flash";ba.prototype.supportedTypes=["video/mp4","video/x-flv","video/f4m",
"application/smil","application/smil+xml"];ba.prototype.getPaused=function(){return this.player.getPaused()};ba.prototype.getEnded=function(){return this.player.getEnded()};ba.prototype.getSeeking=function(){return this.player.getSeeking()};ba.prototype.getCurrentTime=function(){return this.player.getCurrentTime()};ba.prototype.setCurrentTime=function(a){this.player.setCurrentTime(a);return a};ba.prototype.getSrc=function(){return this.player.getSrc()};ba.prototype.setSrc=function(a){this.player.setSrc(a);
return a};ba.prototype.getVolume=function(){return this.player.getVolume()};ba.prototype.setVolume=function(a){this.player.setVolume(a);return a};ba.prototype.getMuted=function(){return this.player.getMuted()};ba.prototype.setMuted=function(a){this.player.setMuted(a);return a};ba.prototype.getDuration=function(a){return this.player.getDuration()};ba.prototype.play=function(){this.player.play()};ba.prototype.pause=function(){this.player.pause()};ba.prototype.load=function(){this.player.load()};var m=
function(a){var b=this;this.flashObjectID+=Date.now();this.plugins={};this._displayState=R.NORMAL;this.debug=/debug\=true/.test(location.search);m.__super__.constructor.call(this,a);this.addEventListener("mediachange",function(a){var e,k,d,h,f;d=a.detail.track;k=b.getMediaElement();a=k.textTracks=[];if(null!=d)for(h=0,f=d.length;h<f;h++)e=d[h],e={kind:e.kind,label:e.label,language:e.srclang,_mode:e.mode},Object.defineProperty(e,"mode",{get:function(){return this._mode},set:function(a){this._mode=
a;(a="showing"===a)&&k.setTrackByLanguage(this.language);k.setPlayerProperty("captionDisplay",{visible:a})},enumerable:!0,configurable:!1}),a.push(e)})};g(m,n);m.prototype.initialize=function(a,b){var c,e;this.config=a;this.parentModule=b;this.createDefaults();this.logEvents=!0===(null!=(c=this.config.flash)?c.logEvents:void 0)||"true"===(null!=(e=La["amp-flash-log"])?e.toLowerCase():void 0);m.__super__.initialize.call(this,this.config,this.parentModule)};m.prototype.loadModuleResources=function(a){var b=
this;return m.__super__.loadModuleResources.call(this,a).then(function(){var a,e,k,d,h;e=b.config.locales;k=[];d=function(a,b){e[a]=b.data};for(a in e)h=e[a],"string"===typeof h&&k.push(B.addResource({src:b.evaluatePaths(h),type:f.mimeTypes.json}).then(d.bind(b,a))["catch"](function(a){return Promise.resolve()}));return Promise.all(k)})};m.prototype.pluginsinitialized=function(){var a,b,c,e;b=this.config.flash||{};a=!0===(null!=(c=b["static"])?c.enabled:void 0)?b["static"]:b;e=this.debug&&null!=a.debug?
a.debug:a.swf||"amp.swf";this.evaluatePaths(b.expressInstallSWF);c=this.createParams(b);a=this.createAttributes(b);this.flashvars=this.createFlashVars(b);null==this.flashvars.settings_url&&(b=this.createXML(this.config),null!=b&&(this.flashvars.settings_xml=b));a.data=this.evaluatePaths(e);this.createdHandler(f.createFlashObject({params:c,attributes:a,vars:this.flashvars},this.getMediaElement().parentNode))};m.prototype.playerType="flash";m.prototype.flashObjectID="flashObject";m.prototype.loaded=
!1;m.prototype.flashvars=null;m.prototype._paused=!1;m.prototype._ended=!1;m.prototype._muted=!1;m.prototype.plugins=null;m.prototype.debug=!1;m.prototype.started=!1;m.prototype._displayState=null;m.prototype.logEvents=!1;m.prototype._loop=!1;m.prototype.playback=null;m.prototype.flashPlugins=[{id:"AkamaiAdvancedStreamingPlugin",src:"http://players.edgesuite.net/flash/plugins/osmf/advanced-streaming-plugin/v3.10/osmf2.0/AkamaiAdvancedStreamingPlugin.swf",absolute:!0,host:"osmf",main:"com.akamai.osmf.AkamaiAdvancedStreamingPluginInfo",
type:"application/x-shockwave-flash"},{id:"ErrorMessagingPlugin",src:"#{paths.resources}plugins/ErrorMessagingPlugin.swf",blocking:!1,host:"akamai",main:"ErrorMessagingPlugin",type:"application/x-shockwave-flash"},{id:"VideoMetricsViewPlugin",src:"#{paths.resources}plugins/VideoMetricsViewPlugin.swf",blocking:!1,host:"akamai",main:"VideoMetricsViewPlugin",type:"application/x-shockwave-flash"},{id:"VideoStatsInfoOverlayPlugin",src:"#{paths.resources}plugins/VideoStatsInfoOverlayPlugin.swf",blocking:!1,
host:"akamai",main:"VideoStatsInfoOverlayPlugin",type:"application/x-shockwave-flash"}];m.prototype.flashView=null;m.prototype.createModel=function(){m.__super__.createModel.call(this);this.playback=new ba(this);this.registerProxy(this.playback);this.appState.setRenderMode(Gd.FLASH);this.bindings.initialize()};m.prototype.createView=function(){m.__super__.createView.call(this);this.mediator=new xb(this.getViewComponent());this.registerMediator(this.mediator);this.registerMediator(new wb);this.registerMediator(new Ua);
this.registerMediator(new Va(this,this.config))};m.prototype.createController=function(){var a,b=this;m.__super__.createController.call(this);null!=(null!=(a=this.config.plugins)?a.react:void 0)&&(this.registerCommand(d.CHANGE_DISPLAY_STATE,Sa),this.getDisplayState=function(){return b.appState.getDisplayState()},this.setDisplayState=function(a){return b.sendNotification(d.CHANGE_DISPLAY_STATE,a)});this.registerCommand(Ca.PLUGINS_INITIALIZED,od);this.registerCommand(Ea.AUTHORIZE,s);this.registerCommand(Ea.AUTHORIZED,
Cc);this.registerCommand(d.CHANGE_PLAY_STATE,Vb);this.registerCommand(d.PLAY_STATE_CHANGE,s);this.registerCommand(d.START,pd);this.registerCommand(d.STARTED,s);this.registerCommand(d.PLAY,s);this.registerCommand(d.PLAY_REQUEST,s);this.registerCommand(x.FLASH_CREATED,s);this.registerCommand(d.CHANGE_PLAYBACK_TARGET,Bc);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Zb);this.registerCommand(d.UPDATE_DATA_BINDINGS,Xb)};m.prototype.createMediaElement=function(){var a;a=new gb("flash","div");this.sendNotification(d.PLAYBACK_CORE_CHANGE,
a);a=a.getViewComponent();a.id=a.name=this.flashObjectID;return a};m.prototype.createDefaults=function(){var a,b,c,e,k,d;if(!(0<!(null!=(b=this.flashPlugins)&&b.length))){b=this.config.resources||[];null!=(null!=(c=this.config.flash)?c.resources:void 0)&&(b=b.concat(this.config.flash.resources));c=f.mimeTypes.swf;d=this.flashPlugins;e=0;for(k=d.length;e<k;e++)a=d[e],null!=a&&0===b.filter(function(b){return b.id===a.id}).length&&(null==a.type&&(a.type=c),b.push(a));this.config.resources=b}};m.prototype.createParams=
function(a){var b;b={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};null!=a.params&&(null!=a.params.allowFullScreen&&(b.allowFullScreen=a.params.allowFullScreen),null!=a.params.allowScriptAccess&&(b.allowScriptAccess=a.params.allowScriptAccess),null!=a.params.wmode&&(b.wmode=a.params.wmode),null!=a.params.bgColor&&(b.bgColor=a.params.bgColor));"direct"===b.wmode&&/MSIE/.test(navigator.userAgent)&&(b.wmode="transparent");return b};m.prototype.getModules=function(){return this.plugins};
m.prototype.createPlugins=function(){var a,b,c,e,k,d,h,J=this;h=this.getPlayerType();d=B.plugins;for(c in d)if(k=d[c],c in this.config&&null!=this.config[c]&&!1!==this.config[c].enabled)if(a=k[h],null==a)this.logger.debug("[AMP] Plugin could not be found: "+c);else try{e=this[c]=this.plugins[c]=new a(this,this.config[c]),this.registerMediator(this.plugins[c]),b="function"===typeof e.getFeatureName?e.getFeatureName():void 0,null!=b&&(this[b]=e),null!=e.flashView&&(this.flashView=f.override(this.flashView,
e.flashView)),this.logger.debug("[AMP] Plugin registered: "+c)}catch(g){this.logger.error("[AMP] Plugin could not be created: "+c+". "+g)}k=this.config.plugins||{};d=[];for(c in k)b=k[c],null!=b&&!1!==b.enabled&&(e=function(b,c,e){return J.loadResources(c.resources).then(function(){a=B.plugins[e][h];if(null==a)throw Error("[AMP] Plugin could not be found: "+e);return a(b,c,e).then(function(a){J.logger.debug("[AMP] Plugin registered: "+e);return{key:e,value:a}})})["catch"](function(a){return J.logger.error("[AMP] Plugin could not be created: "+
e+". "+a)})},d.push(e.bind(null,this,b,c)));d=d.map(function(a){return a()});Promise.all(d).then(function(a){var b,c,e;null!=J.config.flash.view&&(J.flashView=f.override(J.flashView,J.config.flash.view));c=0;for(e=a.length;c<e;c++)b=a[c],null!=b&&(J[b.key]=b.value,J.plugins[b.key]=b.value);return J.sendNotification(Ca.PLUGINS_INITIALIZED,J.plugins)})["catch"](function(a){return J.logger.error(a)})};m.prototype.createAttributes=function(a){var b;b={id:this.flashObjectID,name:this.flashObjectID};null!=
a.attributes&&(null!=a.attributes.id&&(b.id=a.attributes.id),null!=a.attributes.name&&(b.name=a.attributes.name));return b};m.prototype.createFlashJSON=function(a,b){var c,e;null==a&&(a=this.config);a=JSON.stringify(a);a=this.evaluatePaths(a);a=JSON.parse(a);e=function(a,b,e){switch(typeof e){case "string":a[b]=escape(e);break;case "object":c(e)}};c=function(a){var b,c,d,f;if(a instanceof Array)for(b=d=0,f=a.length;d<f;b=++d)c=a[b],e(a,b,c);else if("object"===typeof a)for(b in a)c=a[b],e(a,b,c)};
c(a);return encodeURIComponent(JSON.stringify(a,null,b))};m.prototype.createFlashVars=function(a){var b,c,e,k,d,h,J,g,l,n;b={};c=JSON.parse(JSON.stringify(this.config));c.flash=null;delete c.flash;c.locales=null;delete c.locales;c.params=null;delete c.params;c.rules=null;delete c.rules;b.settings_json=this.createFlashJSON(c);null!=this.config.autoplay&&(b.auto_play=this.config.autoplay);null!=this.config.rules&&f.mergeRules(this.config.rules);b.hinting_rules=escape(JSON.stringify(f.rules));null!=
this.config.volume&&(b.volume=f.clamp(this.config.volume,0,1));null!=this.config.target&&(b.external_target=this.config.target);null!=this.config.name&&(b.core_player_name=this.config.name);null!=this.config.domain&&(b.embed_domain=b.domain=this.config.domain);this._loop=b.auto_replay=!0===this.config.loop;null!=this.config.fullscreen&&(b.fullscreen_enabled=!1!==this.config.fullscreen.enabled&&"external"!==this.config.fullscreen.mode);null!=this.config.titlebar&&(b.titlebar_enabled=!1!==this.config.titlebar.enabled);
null!=this.config.params&&(b.params=escape(JSON.stringify(this.config.params)));null!=this.config.version&&(b.context_menu_label=this.config.version);null!=(null!=(k=this.config.controls)?k.displaySceneMarkers:void 0)&&(b.displaySceneMarkers=this.config.controls.displaySceneMarkers);null!=this.config.media&&(this.mediaProxy.setData(this.config.media),null!=this.config.media.src&&(this.setSrc(this.config.media.src),b.video_url=escape(this.config.media.src)),null!=this.config.media.source&&0<this.config.media.source.length&&
(this.setSource(this.config.media.source),b.video_url=escape(this.mediaProxy.getSrc())),null!=this.config.media.medium&&(this.setMedium(this.config.media.medium),b.medium=this.config.media.medium),null!=this.config.media.title&&(b.title=encodeURIComponent(this.config.media.title)),null!=this.config.media.poster&&(b.poster=escape(this.config.media.poster)),null!=this.config.media.temporalType&&(b.temporalType=this.config.media.temporalType));"audio"===this.getMedium()&&(b.controls=!0,b.auto_hide=-1);
null!=(null!=(d=this.config.ima)?null!=(h=d.overlay)?h.delay:void 0:void 0)&&(b.overlay_ad_delay=this.config.ima.overlay.delay);null!=this.config.ticker&&!1!==this.config.ticker.enabled&&(null!=this.config.ticker.url&&(b.ticker_text_url=this.config.ticker.url),null!=this.config.ticker.interval&&(b.ticker_polling_interval=this.config.ticker.interval),null!=this.config.ticker.speed&&(b.ticker_speed=this.config.ticker.speed));b.show_play_button_overlay=!1;b.auto_play_list=!1;b.next_video_timer=0;null==
b.context_menu_mode&&(b.context_menu_mode=!0===this.debug?"long":"short");if(null!=(null!=(J=this.config.flash)?null!=(g=J.view)?null!=(l=g.elements)?null!=(n=l.loadingView)?n.attributes:void 0:void 0:void 0:void 0)){c="";for(e in this.config.flash.view.elements.loadingView.attributes)c+=e+":"+this.config.flash.view.elements.loadingView.attributes[e]+" ";b.loadingView=c}this.sendNotification(x.CREATE_FLASH_VARS,{flashvars:b,config:this.config});return b=f.override(b,a.vars)};m.prototype.createXML=
function(a){var b,c,e,k,d,h,J,g,l,n,m,p,q;null==(null!=a?null!=(g=a.flash)?g.xml:void 0:void 0)&&(null==a.flash&&(a.flash={}),a.flash.xml="\x3capplication\x3e\x3c/application\x3e");m=Ma.parse(a.flash.xml);1<m.childNodes.length&&m.removeChild(m.firstChild);this.sendNotification(x.CREATE_XML,{config:a,xml:m});d=function(a){var b,c,k,h,J,g;h=a.resources;c=[];if(h instanceof Array&&0<(null!=h?h.length:void 0))for(J=0,g=h.length;J<g;J++)k=h[J],k.type===l&&(k=f.clone(k),!0===e?null!=k.main&&""!==k.main?
(k.src=k.main,k.type="static"):k.type="dynamic":null!=k.src&&""!==k.src?k.type="dynamic":(k.src=k.main,k.type="static"),delete k.main,c.push(k));for(b in a)k=a[b],"flash"!==b&&null!=(h=null!=k?k.resources:void 0)&&h instanceof Array&&0<h.length&&(c=c.concat(d(k)));return c};l=f.mimeTypes.swf;g=d(this.config);e=!0===(null!=(k=a.flash["static"])?k.enabled:void 0);if(0<(null!=g?g.length:void 0))for(k=m.getElementsByTagName("plugins"),1>k.length?(k=m.createElement("plugins"),m.firstChild.appendChild(k)):
k=k[0],p=0,q=g.length;p<q;p++)if(J=g[p],!1!==J.enabled){a=m.createElement("plugin");for(c in J)n=J[c],"loaded"!==c&&("src"!==c?a.setAttribute(c,""+n):("id"===c&&"AkamaiAdvancedStreamingPlugin"===n&&!0===this.debug&&(n=n.replace("AkamaiAdvancedStreamingPlugin.swf","AkamaiAdvancedStreamingPlugin-logging.swf")),a.appendChild(Ma.createTextContent(m,n))));k.appendChild(a)}h=function(a,b){var c,e,k,d;if(null!=a.attributes)for(e in c=a.attributes,c)k=c[e],b.setAttribute(e,""+k);if(null!=a.elements)for(e in d=
a.elements,d)k=d[e],null!=k&&(c=m.createElement("element"),c.setAttribute("id",e),"state"!==c.id&&(h(k,c),b.appendChild(c)));if(null!=a.state){c=m.createElement("state");if(a.state.attributes)for(e in d=a.state.attributes,d)k=d[e],null!=k&&c.setAttribute(e,""+k);b.appendChild(c)}return b};c=m.getElementsByTagName("view")[0];null==c&&(c=m.createElement("view"),m.firstChild.appendChild(c));h(this.flashView,c);if(null!=(null!=(b=this.config.fullscreen)?b.mode:void 0))for(c=m.getElementsByTagName("element"),
g=0,a=c.length;g<a;g++)b=c[g],"fullscreenBtn"===b.getAttribute("id")&&b.setAttribute("action","external");b=Ma.serialize(m);b=b.match(/<application>[\w\W\s\S\d\D]*<\/application>/)[0]||b;b=b.replace(/[\n\r\t]/g,"");b=this.evaluatePaths(b);return encodeURIComponent(b)};m.prototype.createdHandler=function(a){var b=this;a=this.getMediaElement().id;a=document.getElementById(a);this.setMediaElement(a);a.className=Ob.PREFIX+gb.prototype.componentType;a.eventHandler=function(a,e){return b.eventHandler(a,
e)};this.sendNotification(x.FLASH_CREATED);null!=this.getMedium()&&this.setMedium(this.getMedium())};m.prototype.eventHandler=function(a,b){var c,e,k,eb,h,f,g,l,m,n,p,q=this;this.logEvents&&!this.excludedFlashEvents.test(a)&&this.logger.log("[AMP FLASH EVENT] "+a,b);try{switch(a){case x.INITIALIZED:f=h="ready";break;case x.RESET:null==b&&(h="ready");this.started=!1;break;case x.LOADING:f="loadstart";break;case x.PLAYER_ERROR:f=h="error";break;case x.MEDIA_ERROR:f=h="error";break;case x.FEED_LOADED:b=
JSON.parse(b);k=new Fb;eb=null!=(l=k.createFeed(b))?null!=(m=l.item)?m[0]:void 0:void 0;null!=eb&&this.mediaProxy.setData(eb);break;case x.FEED_UPDATED:f="mediachange";b=this.getMedia();g=!0;break;case x.ERROR_STREAM_NOT_FOUND:f=h="error";break;case x.CAPABILITY_CHANGE:e=b.type;"canPlayChange"===e&&!0===b.enabled?(f="canplay",this.loaded=!0):"canSeekChange"===e&&!0===b.enabled?f="canplaythrough":"temporalChange"===e&&!0===b.enabled&&(f="loadedmetadata",this.started||this.sendNotification(d.START,
b));break;case x.PLAYING:this.started||this.sendNotification(d.START,b);f=h="playing";this._paused=this._ended=!1;!0===this.appState.getSeeking()&&(this.appState.setSeeking(!1),this.sendNotification(d.SEEKED),this.sendNotification(d.DISPATCH_EVENT,new H("seeked")));break;case x.ELEMENT_EVENT:"fullscreenBtn"===b.element&&"click"===b.type&&"external"===(null!=(n=this.config)?null!=(p=n.fullscreen)?p.mode:void 0:void 0)&&(h=this.getDisplayState()===R.FULL_SCREEN?R.NORMAL:R.FULL_SCREEN,this.setDisplayState(h));
break;case x.PLAY_REQUEST:this.sendNotification(d.PLAY_REQUEST);this.setPlayState("playing");f=d.MEDIA_SEQUENCE_STARTED;this.loaded=!0;this._ended=!1;break;case x.PLAY:"paused"!==this.getPlayState()&&this.started&&this.sendNotification(d.PLAY,b);break;case x.ENDED:f=d.ENDED;break;case x.MEDIA_SEQUENCE_ENDED:f=d.MEDIA_SEQUENCE_ENDED;h=d.ENDED;this._ended=!0;break;case x.PAUSED:f="pause";h="paused";this._paused=!0;break;case x.BUFFERING:"ended"!==this.className&&(f=h="waiting");break;case x.DURATION_CHANGE:isNaN(b.time)||
(0===b.time&&this.sendNotification(d.MEDIA_SEQUENCE_ABORTED),f="durationchange",b=b.time,setTimeout(function(){q.setCues(q.getCues().slice())},0));break;case x.VOLUME_CHANGE:f="volumechange";b=b.volume;break;case x.TIME_UPDATE:f="timeupdate";b=b.currentTime;break;case x.SEEKING_CHANGE:if(!1===this.appState.getSeeking()&&!1===b.seeking)return;f=b.seeking?"seeking":"seeked";this.appState.setSeeking(b.seeking);b.seeking&&(h="seeking");break;case x.FULLSCREEN_CHANGE:f="fullscreenchange";b="fullScreen"===
b.displayState;this.applyDisplayState(b?R.FULL_SCREEN:R.NORMAL);break;case x.FAIL_OVER_ATTEMPT:f="failoverattempt";break;case x.ERROR:a=null;break;case x.AUTHORIZE:f=Ea.AUTHORIZE;break;case x.TIMED_METADATA:f=d.TIMED_METADATA;b={startTime:b.time,endTime:b.time,data:b};break;case x.MEDIA_PLAYER_ID3_UPDATED:f=d.TIMED_METADATA,b={startTime:b.time,endTime:b.time,data:window.atob(b)}}null!=a&&a!==f&&(e=new H(a,b),e.dispatcher="FLASH",this.sendNotification(d.DISPATCH_EVENT,e),this.sendNotification(a,b));
null!=f&&("error"===f&&(c=b.error||b,this.logError("Flash Error",c)),this.sendNotification(f,b),this.sendNotification(d.DISPATCH_EVENT,new H(f,b)));null!=g&&this.sendNotification(d.UPDATE_DATA_BINDINGS);null!=h&&this.setPlayState(h)}catch(r){this.logError("Event Error: "+a,r)}};m.prototype.logError=function(a,b){this.logger.error("[AMP FLASH ERROR]",a,b)};m.prototype.excludedFlashEvents=/(mediaPlayerPlayheadUpdate|mediaPlayerElementEvent|adComponentPlaybackProgress)/;m.prototype.logFlashEvents=!1;
m.prototype.logEvent=function(a){"FLASH"===a.dispatcher&&!1===this.logFlashEvents||!0===this.excludedFlashEvents.test(a.type)||m.__super__.logEvent.call(this,a)};m.prototype.setPlayState=function(a){this.sendNotification(d.CHANGE_PLAY_STATE,a);return a};m.prototype.getPlayState=function(){return this.appState.getPlayState()};m.prototype.setMedia=function(a){var b=this;null!=this.getPlayState()&&this.setPlayState("ready");this.mediaProxy.transform(a).then(function(c){a=c;b.mediaProxy.setData(a);null!=
a.src&&b.setSrc(a.src);null!=a.source&&0<a.source.length&&b.setSource(a.source);b.sendNotification(d.MEDIA_CHANGE,a);return b.load(b.mediaProxy.getData())})["catch"](function(a){return b.sendNotification(d.ERROR,a)});return a};m.prototype.getMedia=function(){return this.mediaProxy.getData()};m.prototype.load=function(){var a,b,c;a=this.mediaProxy.getData();this.security.setMedia(a);if(this.security.getAuthorized()){this.loaded=!0;a=f.clone(a);null==a.autoplay&&(a.autoplay=this.config.autoplay);for(b in a)c=
a[b],void 0===c&&delete a[b];this.getMediaElement().loadURL(this.mediaProxy.getSrc(),a)}else this.sendNotification(Ea.AUTHORIZE,{media:a})};m.prototype.play=function(){this.loaded||this.load();this.getMediaElement().unpause()};m.prototype.setMuted=function(a){this._muted=a;try{!0===a?this.getMediaElement().mute():this.getMediaElement().unmute()}catch(b){this.logError("Flash muted error",b)}return a};m.prototype.getMuted=function(){return this._muted};m.prototype.getLoop=function(){return this._loop};
m.prototype.getSrc=function(a){return this.getMediaElement().getURL()};m.prototype.setSrc=function(a){this.mediaProxy.setSrc(a);this.loaded=!1;this.setMedium(f.getMimeType(a));return a};m.prototype.setAutoplay=function(a){this.getMediaElement().setPlayerProperty("autoplay",a);return a};m.prototype.getAutoplay=function(){return this.getMediaElement().getPlayerProperty("autoplay")};m.prototype.getMedium=function(){return this.mediaProxy.getData().medium};m.prototype.setMedium=function(a){var b,c;b=
this.mediaProxy.getData();if(a!==b.medium)return null!=b.medium&&(c="medium-"+b.medium),b.medium=/audio/.test(a)?"audio":"video",this.sendNotification(d.MEDIUM_CHANGE,{value:"medium-"+b.medium,previous:c}),a};m.prototype.setSource=function(a){var b,c=this;if(!(null==a||1>a.length)){b=this.mediaProxy.getData();b.source=a;this.loaded=!1;b=f.selectSource(a,function(a){return c.canPlayType(a)});if(null!=(null!=b?b.src:void 0)&&""!==b.src)this.setSrc(b.src),"undefined"!==typeof type&&null!==type&&this.setMedium(type);
else throw Error("No valid source could be found");return a}};m.prototype.getSource=function(){return this.mediaProxy.getData().source};m.prototype.getSeeking=function(){return this.appState.getSeeking()};m.prototype.getPaused=function(){return this._paused};m.prototype.getEnded=function(){return this._ended};m.prototype.getFlashXML=function(){var a,b;b=decodeURIComponent(this.flashvars.settings_xml);a=Ma.parse(b);try{a.toString=function(){return b}}catch(c){}return a};m.prototype.getFlashVars=function(){return this.flashvars};
m.prototype.getFlashJSON=function(){return JSON.parse(decodeURIComponent(this.flashvars.settings_json))};m.prototype.evaluateBinding=function(a){var b;try{b=this.getMediaElement().evaluateBinding(a),null!=b&&(b=JSON.parse(b))}catch(c){}return b};m.prototype.canPlayType=function(a){return 0<=jc.call(f.flashTypes,a)?"maybe":""};m.prototype.replay=function(){this.getMediaElement().replay()};m.prototype.pause=function(){this.getMediaElement().pause()};m.prototype.end=function(){this.getMediaElement().stopPlayer()};
m.prototype.getCurrentTime=function(){var a;return"function"===typeof(a=this.getMediaElement()).getCurrentTime?a.getCurrentTime():void 0};m.prototype.setCurrentTime=function(a){this.getMediaElement().jumpToTime(a);return a};m.prototype.getParams=function(){return this.getMediaElement().getParams()};m.prototype.setParams=function(a){this.getMediaElement().setParams(a);return a};m.prototype.getVolume=function(){var a;return(null!=(a=this.getMediaElement())?"function"===typeof a.getVolume?a.getVolume():
void 0:void 0)||0};m.prototype.setVolume=function(a,b){this.getMediaElement().setVolume(a,b||"");return a};m.prototype.getDuration=function(){var a;return"function"===typeof(a=this.getMediaElement()).getDuration?a.getDuration():void 0};m.prototype.getDisplayState=function(){return this._displayState};m.prototype.setDisplayState=function(a){var b;if(a!==this._displayState&&(this.applyDisplayState(a),"external"!==(null!=(b=this.config.fullscreen)?b.mode:void 0)))return this._displayState===R.FULL_SCREEN?
this.getMediaElement().enterFullScreen():this.getMediaElement().exitFullScreen(),a};m.prototype.applyDisplayState=function(a){var b;a!==this._displayState&&(b={value:a,previous:this._displayState},this._displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,b),this.sendNotification(d.DISPATCH_EVENT,new H("fullscreenchange",this._displayState===R.FULL_SCREEN)))};m.prototype.enterFullScreen=function(){this.setDisplayState(R.FULL_SCREEN)};m.prototype.exitFullScreen=function(){this.setDisplayState(R.NORMAL)};
m.prototype.recordContentChange=function(a){this.getMediaElement().recordContentChange(a)};m.prototype.setQuality=function(a){return this.getMediaElement().setQuality(a)};m.prototype.getQuality=function(){var a;try{a=this.getMediaElement().getQuality()}catch(b){}return a};m.prototype.getQualityLevels=function(){var a,b;try{a=("function"===typeof(b=this.getMediaElement()).getQualityLevels?b.getQualityLevels():void 0)||[]}catch(c){a=[]}return a};Events={LOADED_METADATA:"loadedmetadata",READY:"ready",
ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",
FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABLE:"playbacktargetavailable",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",PLAYBACK_RATE_CHANGE:"playbackratechange",QUALITY_CHANGE:"qualitychange",QUALITY_CHANGING:"qualitychanging",QUALITY_MODE_CHANGE:"qualitymodechange",QUALITY_LEVELS_LOADED:"qualitylevelsloaded",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",
MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",LANGUAGE_CHANGE:"languagechange",TIMED_METADATA:"timedmetadata",CUES_CHANGE:"cueschange",VIEW_CREATED:"viewcreated",MUTE_CHANGE:"mutechange",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",init:function(){var a,b;this.values=[];for(a in this)b=this[a],"values"!==a&&"init"!==a&&this.values.push(b)}};Events.init();var Ra=function(a){this.module=a;Ra.__super__.constructor.call(this,a.getModuleName(),this)};g(Ra,puremvc.Mediator);
Ra.prototype.module=null;Ra.prototype.mediator=null;Ra.prototype.initializeNotifier=function(a){var b,c=this;Ra.__super__.initializeNotifier.call(this,a);b=this.module.listNotificationPublications();null!=b&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return b},this.mediator.handleNotification=function(a){c.facade.sendNotification(a.getName(),a.getBody(),a.getType())})};Ra.prototype.onRegister=function(){null!=this.mediator&&
this.module.registerMediator(this.mediator)};Ra.prototype.onRemove=function(){null!=this.mediator&&this.module.removeMediator(this.mediator)};Ra.prototype.listNotificationInterests=function(){return this.module.listNotificationInterests()};Ra.prototype.handleNotification=function(a){this.module.sendNotification(a.getName(),a.getBody(),a.getType())};var Qa=function(){};Qa.SINGLE=/^\s*[#\$]{([^\$#{}]+)}\s*$/;Qa.TOKEN=/[#\$]{([^\$#}]*)}/g;Qa.RETURN="return ";Qa.EVENT="event";Qa.ELEMENT="element";Qa.PATHS=
"paths";Qa.eval=function(a,b,c,e,k){var d,h;if(null==a)return a;d=null!=(h=this.SINGLE.exec(a))?h[1]:null;return null!=d?this.evalBinding(d,b,c,e,k):this.evalString(a,b,c,e,k)};Qa.evalString=function(a,b,c,e,k){return a.replace(this.TOKEN,this.replaceBinding.bind(this,b,c,e,k))};Qa.replaceBinding=function(a,b,c,e,k,d,h,f){return this.evalBinding(d,a,b,c,e)};Qa.evalBinding=function(a,b,c,e,k){var d;try{d=this.exec(a,b,c,e,k)}catch(h){d="#{"+a+"}"}return d};Qa.exec=function(a,b,c,e,k){return(new Function(this.EVENT,
this.ELEMENT,this.PATHS,this.RETURN+a)).bind(b)(c,e,k)};var Qc=function(){Qc.__super__.constructor.call(this)};g(Qc,puremvc.SimpleCommand);Qc.prototype.execute=function(a){a=a.getBody();a.player=this.facade.player||this.facade;this.facade.dispatchEvent(a)};var d={STARTUP:"startup",LOAD:"load",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"togglePlayPause",CHANGE_PLAY_STATE:"chageplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"toggleFullScreen",
CHANGE_DISPLAY_STATE:"chageDisplayState",DISPLAY_STATE_CHANGE:"displayStateChange",DISABLE_FULL_SCREEN:"disableFullScreen",ENABLE_FULL_SCREEN:"enableFullScreen",TOGGLE_ACTIVE:"toggleActive",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changeMedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",SETTINGS_CHANGE:"settingschange",UPDATE_DATA_BINDINGS:"updatedatabindings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",
SEEK:"seek",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeAutoplay",AUTOPLAY_CHANGE:"autoplaychange",CHANGE_LOOP:"changeLoop",PLAYBACK_CORE_CHANGE:"playbackCoreChange",START:"start",END:"end",REPLAY:"replay",REGISTER_PLUGIN:"registerPlugin",REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",ADD_LAYER:"addLayer",REMOVE_LAYER:"removeLayer",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",ADD_CONTROL:"addControl",REMOVE_CONTROL:"removeControl",ADD_CONTROL_STATE:"addControlState",
REMOVE_CONTROL_STATE:"removeControlState",ADD_APPLICATION_STATE:"addApplicationState",REMOVE_APPLICATION_STATE:"removeApplicationState",DISPATCH_EVENT:"dispatchEvent",CHANGE_PARAMS:"changeParams",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerPlaybackCore",REMOVE_PLAYBACK_CORE:"removePlaybackCore",DISPLAY_TIME:"displaytime",IS_USER_ACTIVE:"isUserActive",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",
ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",init:function(){var a,b;for(a in Events)b=Events[a],"values"!==a&&"init"!==a&&(this[a]=b)}};d.init();var hb=function(a){var b,c;null==a&&(a={});null==akamai.amp.AMP.plugins.controls&&(c={plugins:{react:{resources:[{src:"https://unpkg.com/react@15/dist/react-with-addons.min.js",debug:"https://unpkg.com/react@15/dist/react-with-addons.js",type:"text/javascript"},{src:"https://unpkg.com/react-dom@15/dist/react-dom.min.js",
debug:"https://unpkg.com/react-dom@15/dist/react-dom.js",type:"text/javascript"},{src:"https://unpkg.com/prop-types/prop-types.min.js",debug:"https://unpkg.com/prop-types/prop-types.min.js",type:"text/javascript"},{src:"#{paths.plugins}react/React.min.css",debug:"#{paths.plugins}react/React.css",type:"text/css"},{src:"#{paths.plugins}react/React.min.js",debug:"#{paths.plugins}react/React.js",type:"text/javascript"}],autoHide:3}}},a=f.override(c,a));a=f.override(hb.defaults,a);!0===/amp\-debug\=true/.test(location.search.toLowerCase())&&
(a.debug=!0);a.mode=f.getPlaybackMode(a.mode);a.version=B.getVersion();for(b in a)c=a[b],this[b]=c};hb.create=function(a){return new hb(a)};hb.defaults={paths:{base:"../",root:"../",player:"../amp/",plugins:"../akamai/amp/",resources:"../resources/"},resources:[{src:"#{paths.player}amp.css",type:"text/css"}],rules:{android_4_gets_m3u8:{regexp:"Android 4"}},attributes:{},settings:{},autoplay:!0,loop:!1,playsinline:null,muted:null,target:"_blank",domain:"akamai.com",fullscreen:{},
contextmenu:{},captioning:{},controls:{},playoverlay:{},hls:{resources:[{type:"text/javascript",src:"#{paths.resources}js/hls.min.js",debug:"#{paths.resources}js/hls.js"}],quality:{startLevel:-1},data:{enableWorker:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v2.5.0/dash.all.min.js",debug:"//cdn.dashjs.org/v2.5.0/dash.all.debug.js"}],buffer:1},flash:{swf:"#{paths.player}AkamaiStandardPlayer.swf",debug:"#{paths.player}AkamaiStandardPlayer-debug.swf",
expressInstallSWF:"#{paths.player}playerProductInstall.swf","static":{enabled:!1,swf:"#{paths.player}AkamaiStandardPlayer-static.swf",debug:"#{paths.player}AkamaiStandardPlayer-static-debug.swf"},vars:{core_player_name:"amp",mbr_starting_index:2,use_last_known_bitrate:!1,use_netsession_client:!1,netsession_install_prompt_frequency_secs:-1,ad_server_timeout:20,ad_control_enabled:!0,dvr_enabled:1,branding_preload:"none",hds_live_low_latency:!0,fullscreen_enabled:!0,
show_feature_bar:!1,suppress_events:"mediaPlayerViewInitialized",hds_fragment_retry_data_gap_threshold:20},view:{attributes:{skin:"#{paths.player}standard.assets.swf"},elements:{adOptions:{attributes:{style:"backgroundColor: 'rgba(0, 0, 0, 0)'"},elements:{adChoices:null,adCountdown:null,adCount:null}},endSlate:{attributes:{enabled:"false",hideElements:"brandingLogo|viewAll"}},loadingView:{attributes:{enabled:"false",style:"backgroundColor: 'rgba(0, 0, 0, 0)'; color: 'rgba(0, 0, 0, 0)'",radius:0}}}}},
locales:{en:{MSG_TIME_SEPARATOR:" / ",MSG_EMAIL_TO:"To",MSG_EMAIL_FROM:"From",MSG_EMAIL_VIDEO:"Email this video",MSG_EMAIL_MESSAGE_DEFAULT:"Check out this video from xxx",MSG_EMAIL_MESSAGE:"Message",MSG_EMAIL_ADDRESS_INVALID:"Invalid Email Address",MSG_EMAIL_MESSAGE_INVALID:"Please limit your message to 500 characters or less.",MSG_EMAIL_CHARACTERS_REMAINING_TEXT:" characters left",MSG_EMAIL_SEND_FAILURE:"Message could not be sent.",MSG_EMAIL_SEND_SUCCESS_MESSAGE:"Your email has been sent!",MSG_SHARE_VIDEO_TEXT:"Share this video...",
MSG_POST_TEXT:"Post",MSG_EMBED_TEXT:"Embed",MSG_LINK_TEXT:"Link",MSG_SHARE_CONNECT_FAILURE:"Unable to connect. Please try again.",MSG_SHARE_CONTENT_DISABLED:"Share and embed are disabled.",MSG_VERSION_TEXT:"Version",MSG_BUFFERING_TEXT:"buffering",MSG_CUSTOMIZE_CLIP_POINTS:"Customize the start and end point of the video.",MSG_PAUSE:"Pause",MSG_PLAY:"Play",MSG_REWIND:"Rewind",MSG_PLAYBACK_RATE:"Playback Rate",MSG_FULLSCREEN:"Fullscreen",MSG_ENTER_FULLSCREEN:"Enter Fullscreen",MSG_EXIT_FULLSCREEN:"Exit Fullscreen",
MSG_MUTE:"Mute",MSG_JUMP_BACK:"Jump Back",MSG_JUMP_AHEAD:"Jump Ahead",MSG_VOLUME:"Volume",MSG_REPLAY:"Replay",MSG_SETTINGS:"Settings",MSG_SHARE:"Share",MSG_CLOSED_CAPTIONING:"Closed Captioning",MSG_SLIDER:"Slider",MSG_SEEK:"Seek",MSG_OF:"of",MSG_AD:"Ad",MSG_PREVIEW:"Preview",MSG_CURRENT:"Current",MSG_SEEK_TO:"Seek to",MSG_LIVE:"LIVE",MSG_ERROR:"Error",MSG_ERROR_ABORTED:"Media Aborted",MSG_ERROR_DECODE:"Decode Error",MSG_ERROR_NETWORK:"Network Error",MSG_ERROR_SRC:"Source not supported",MSG_ERROR_DEFAULT:"An error has occured",
MSG_STREAM_NOT_FOUND:"Stream not found",MSG_CURRENT_WORKING_BANDWIDTH:"Current working bandwidth",MSG_CURRENT_BITRATE_PLAYING:"Current bitrate playing",MSG_MAX_BITRATE_AVAILABLE:"Max bitrate available",MSG_NOT_AVAILABLE:"Not Available",MSG_GO_LIVE:"GO LIVE",MSG_NEXT_VIDEO:"Video starts in: ",MSG_RECOMMENDED:"Recommended",MSG_VIEW_ALL:"View all ",MSG_VIDEO:" videos",MSG_CC:"CC",MSG_CC_TITLE:"Caption",MSG_CC_LANGUAGE:"Track :",MSG_CC_PRESETS:"Presets :",MSG_CC_FONT:"Font :",MSG_CC_EDGE:"Edge :",MSG_CC_SIZE:"Size :",
MSG_CC_SCROLL:"Scroll :",MSG_CC_COLOR:"Color :",MSG_CC_BACKGROUND:"Background :",MSG_CC_WINDOW:"Window :",MSG_CC_OPACITY:"Opacity :",MSG_CC_SHOW_ADVANCED:"Show Advanced Settings",MSG_CC_HIDE_ADVANCED:"Hide Advanced Settings",MSG_NEXT_AD:"Next ad starts in: ",MSG_CC_RESET:"Default",MSG_CC_CANCEL:"Cancel",MSG_CC_APPLY:"Apply",MSG_CC_PREVIEW_TEXT:"Lorem ipsum dolor sit amet..",MSG_EN:"English",MSG_ES:"Spanish",MSG_DE:"German",MSG_FR:"French",MSG_IT:"Italian",MSG_RU:"Russian",MSG_ZH:"Chinese",MSG_CHROMECAST_MESSAGE:"Video playing on another screen",
MSG_RETRY_MESSAGE:"Content not yet available, retrying in",MSG_SECONDS:"seconds",MSG_RETRY_FAILED:"Retry failed",MSG_RECOMMENDATIONS_TITLE:"Recommended",MSG_VIEWER_ID:"Viewer ID: ",MSG_SIGN_IN:"Sign In",MSG_PREVIEW_INFO:"Free Preview",MSG_PREVIEW_EXPIRES:"Expires in"},es:"#{paths.player}es.json",fr:"#{paths.player}fr.json"}};var Rb=function(){};Rb.prototype.data=null;Rb.prototype.value=null;Rb.prototype.source=null;Rb.prototype.parse=function(a){};Rb.prototype.compile=function(a,b){};var ib=function(a){null!=
a&&this.parse(a)};g(ib,Rb);ib.prototype.data=null;ib.prototype.value=null;ib.prototype.source=null;ib.prototype.parse=function(a){return a instanceof Array?new $b(a):a instanceof Object?new Gb(a):new jb(a)};var Ea={AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",AUTHENTICATION_FAILED:"authenticationfailed",AUTHENTICATE:"authenticate",AUTHENTICATED:"authenticated",AUTHORIZATION_EXPIRED:"authorizationexpired"},l=function(a,b,c){var e;this.target=a;this.type=
b;this.handler=c;this.trigger=Md(this.trigger,this);l.instances.push(this);this.types=[];(e=this.type,0<=jc.call(l.EVENTS,e))?f.isTouchDevice()?(this.types.push(l.TOUCH_EVENTS[this.type]),this.type===l.TOUCH_EVENTS[1]&&this.types.push(l.TOUCH_EVENTS[4])):this.types.push(l.MOUSE_EVENTS[this.type]):this.type instanceof Array?this.types=this.type:this.types.push(this.type);this.bind()};l.PRESS=0;l.RELEASE=1;l.MOVE=2;l.CLICK=3;l.CONTEXTMENU=4;l.HOVER=5;l.HOVEROUT=6;l.EVENTS=[l.PRESS,l.RELEASE,l.MOVE,
l.CLICK,l.CONTEXTMENU,l.HOVER,l.HOVEROUT];l.MOUSE_EVENTS="mousedown mouseup mousemove click contextmenu mouseover mouseout".split(" ");l.TOUCH_EVENTS=["touchstart","touchend","touchmove","click","touchcancel"];l.instances=[];l.create=function(a,b,c){return new l(a,b,c)};l.bind=function(a,b){var c,e,k,d;d=l.instances;c=e=0;for(k=d.length;e<k;c=++e)c=d[c],c.target===a&&(null!=b&&c.type!==b||c.bind())};l.unbind=function(a,b){var c,e,k,d;d=l.instances;c=e=0;for(k=d.length;e<k;c=++e)c=d[c],c.target===
a&&(null!=b&&c.type!==b||c.unbind())};l.clear=function(a,b){var c,e,k,d,h;h=l.instances;c=k=0;for(d=h.length;k<d;c=++k)e=h[c],(null!=e?e.target:void 0)!==a||null!=b&&e.type!==b||(e.clear(),l.instances.splice(c,1))};l.prototype.types=null;l.prototype.bind=function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.addEventListener?this.target.addEventListener(a,this.trigger,!1):null!=this.target.attachEvent&&this.target.attachEvent("on"+a,this.trigger)};l.prototype.unbind=
function(){var a,b,c,e;e=this.types;b=0;for(c=e.length;b<c;b++)a=e[b],null!=this.target.removeEventListener?this.target.removeEventListener(a,this.trigger):null!=this.target.attachEvent&&this.target.removeEvent("on"+a,this.trigger)};l.prototype.clear=function(){this.unbind();this.types=this.type=this.handler=this.target=null};l.prototype.trigger=function(a){this.handler(a)};var vb=function(){vb.__super__.constructor.call(this,"setting");this.namespace="akamai_amp";this.defaults={volume:1,captions:{visible:!1,
fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0,0,0,0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"}}};g(vb,puremvc.Mediator);vb.prototype.onRegister=function(){var a,b;this.config=this.facade.retrieveProxy(O.NAME);b=this.config.getSettings()||{};null!=b.namespace&&(this.namespace=b.namespace);try{a=localStorage.getItem(this.namespace),
null!=a&&(this.settings=JSON.parse(a))}catch(c){}null==this.settings&&(this.settings=f.clone(this.defaults),this.save())};vb.prototype.listNotificationInterests=function(){return[d.READY,d.VOLUME_CHANGE,w.VISIBILITY_CHANGE,w.SETTINGS_CHANGE,w.TRACK_SELECTED]};vb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.READY:b=this.settings.volume;null!=b&&this.sendNotification(d.CHANGE_VOLUME,b);break;case d.VOLUME_CHANGE:if(this.settings.volume===a)break;this.change({volume:a});
break;case w.VISIBILITY_CHANGE:if(this.settings.captions.visible===a)break;this.change({captions:{visible:a}});break;case w.SETTINGS_CHANGE:this.change({captions:a});break;case w.TRACK_SELECTED:this.change({captions:{track:a}})}};vb.prototype.change=function(a){null==a||"object"!==typeof a||a instanceof Array||(f.override(this.settings,a,!1),this.save(),this.sendNotification(d.SETTINGS_CHANGE,a))};vb.prototype.getSettings=function(){return Object.freeze(Object.assign({defaults:Object.assign({},this.defaults),
change:this.change.bind(this)},this.settings))};vb.prototype.save=function(){try{localStorage.setItem(this.namespace,JSON.stringify(this.settings))}catch(a){}};var K=function(a){this.defaults=hb.defaults;K.__super__.constructor.call(this,a)};g(K,O);K.NAME=O.NAME;K.prototype.getContextName=function(){return"paths"};K.prototype.getContextData=function(){return this.getPaths()};K.prototype.onRegister=function(){this.facade.retrieveProxy(ia.NAME).registerContext(this)};K.prototype.setData=function(a){null!=
a.rules&&f.mergeRules(a.rules);K.__super__.setData.call(this,a);return a};K.prototype.getPlaysInline=function(){return this.data.playsinline};K.prototype.getMuted=function(){return this.data.muted};K.prototype.setMuted=function(a){return this.data.muted=a};K.prototype.getAutoplay=function(){return this.data.autoplay};K.prototype.setAutoplay=function(a){return this.data.autoplay=a};K.prototype.getLoop=function(){return this.data.loop};K.prototype.setLoop=function(a){return this.data.loop=a};K.prototype.getSettings=
function(){return this.data.settings};K.prototype.setSettings=function(a){return this.data.settings=a};K.prototype.getDomain=function(){return this.data.domain};K.prototype.setDomain=function(a){return this.data.domain=a};K.prototype.getTarget=function(){return this.data.target};K.prototype.setTarget=function(a){return this.data.target=a};K.prototype.getName=function(){return this.data.name};K.prototype.setName=function(a){return this.data.name=a};K.prototype.getPaths=function(){return this.data.paths};
K.prototype.setPaths=function(a){return this.data.paths=a};K.prototype.getVersion=function(){return this.data.version};K.prototype.getControls=function(){return this.data.controls};K.prototype.setControls=function(a){return this.data.controls=a};K.prototype.getFullscreen=function(){return this.data.fullscreen||{}};K.prototype.setFullscreen=function(a){return this.data.fullscreen=a};var Hb=function(){Hb.__super__.constructor.call(this)};g(Hb,aa);Hb.prototype.playbackCoreName="audio";Hb.prototype.onRegister=
function(){var a;a=new gb("html5","audio");this.sendNotification(d.PLAYBACK_CORE_CHANGE,a)};Hb.prototype.onRemove=function(){this.facade.createMediaElement()};Hb.prototype.canPlayMedium=function(a){return"audio"===a};Hb.prototype.canPlayType=function(a){return/audio/.test(a)?"maybe":""};var Pb=function(){};Pb.extractContentId=function(a,b){var c;c=document.createElement("a");c.href=f.arrayToString(a);return c.hostname};Pb.extractServerUrl=function(a,b){return b.serverURL||b.serverUrl};Pb.requestCertificate=
function(a){return f.request({url:a.cert,responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age\x3d0"}}).then(function(a){return new Uint8Array(a.response)})};Pb.concatInitDataIdAndCertificate=function(a,b,c){var e,k,d;"string"===typeof b&&(b=f.stringToArray(b));d=0;e=new ArrayBuffer(a.byteLength+4+b.byteLength+4+c.byteLength);k=new DataView(e);(new Uint8Array(e,d,a.byteLength)).set(a);d+=a.byteLength;k.setUint32(d,b.byteLength,!0);d+=4;a=new Uint16Array(e,d,
b.length);a.set(b);d+=a.byteLength;k.setUint32(d,c.byteLength,!0);(new Uint8Array(e,d+4,c.byteLength)).set(c);return new Uint8Array(e,0,e.byteLength)};Pb.requestLicense=function(a,b,c){a={url:c,method:"POST",responseType:"text",headers:{"Content-type":"application/x-www-form-urlencoded"},data:"spc\x3d"+f.base64EncodeUint8Array(a)+"\x26assetId\x3d"+encodeURIComponent(b)};return f.request(a).then(function(a){a=a.responseText.trim();"\x3cckc\x3e"===a.substr(0,5)&&"\x3c/ckc\x3e"===a.substr(-6)&&(a=a.slice(5,
-6));return f.base64DecodeUint8Array(a)})["catch"](function(a){throw"The license request failed.";})};var $b=function(a){$b.__super__.constructor.call(this,a)};g($b,ib);$b.prototype.parse=function(a){var b,c,e,k;this.data=[];b=e=0;for(k=a.length;e<k;b=++e)c=a[b],this.data[b]=$b.__super__.parse.call(this,c);return this.data};$b.prototype.compile=function(a,b){var c,e,k,d,h;null==a&&(a={});null==b&&(b=!1);this.value=[];h=this.data;c=k=0;for(d=h.length;k<d;c=++k){e=h[c];try{this.value[c]=e.compile(a,
b)}catch(f){this.value[c]=null,b||Q.error(f)}}return this.value};var W=function(){W.__super__.constructor.call(this)};g(W,aa);W.prototype.playbackCoreName="dvr";W.prototype.interval=null;W.prototype.ondurationchange=function(a){this.updateDuration()};W.prototype.ontimeupdate=function(a){this.updateCurrentTime()};W.prototype.onplay=function(a){this.stopTimer();W.__super__.onplay.call(this,a)};W.prototype.onplaying=function(a){this.stopTimer();W.__super__.onplaying.call(this,a)};W.prototype.onpause=
function(a){this.startTimer();W.__super__.onpause.call(this,a)};W.prototype.canPlayTemporalType=function(a){return"dvr"===a};W.prototype.getDuration=function(){Infinity===this.getMediaElement().duration&&this.updateDuration();return this.data.duration};W.prototype.getStartTime=function(){return this.getMediaElement().seekable.start(0)};W.prototype.getFragmentDuration=function(){return 10};W.prototype.getLiveTime=function(){return this.getDuration()-this.getFragmentDuration()};W.prototype.isLive=function(){return this.getStartTime()+
this.getCurrentTime()>=this.getLiveTime()};W.prototype.seek=function(a){var b=this;return W.__super__.seek.call(this,a+this.getStartTime()).then(function(a){b.sendNotification(d.IS_LIVE,b.isLive())})};W.prototype.updateCurrentTime=function(){var a,b;b=this.getMediaElement().seekable;0!==b.length&&(a=this.getMediaElement().currentTime,this.data.currentTime=a-b.start(0),this.sendNotification(d.TIME_UPDATE,this.data.currentTime),this.mediaProxy.setIsLive(this.isLive()))};W.prototype.updateDuration=function(){var a;
a=this.getMediaElement().seekable;0!==a.length&&(this.data.duration=a.end(0)-a.start(0),this.sendNotification(d.CHANGE_DURATION,this.data.duration))};W.prototype.startTimer=function(){this.interval=setInterval(this.updateCurrentTime.bind(this),1E3)};W.prototype.stopTimer=function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null,this.updateCurrentTime())};var kb=function(){kb.__super__.constructor.call(this);null==this.contextName&&(this.contextName=this.constructor.NAME)};g(kb,
puremvc.Proxy);kb.prototype.contextName=null;kb.prototype.contextData=null;kb.prototype.onRegister=function(){var a;null!=this.getContextName()&&(a=this.facade.player||this.facade,a=a.retrieveProxy(ia.NAME),a.registerContext(this))};kb.prototype.getContextName=function(){return this.contextName};kb.prototype.getContextData=function(){return this.contextData};var V=function(a,b){this.defaultPlaybackCore=a;this.getPlaybackOrder=b;V.__super__.constructor.call(this);this.playbackCoreMap=[];null==this.getPlaybackOrder&&
(this.getPlaybackOrder=function(a){if(/Edge|Android/.test(navigator.userAgent))return["hls","dash","dvr","default","audio"]})};g(V,kb);V.NAME="PlayerProxy";V.prototype.contextName="player";V.prototype.getPlaybackOrder=null;V.prototype.playbackCoreMap=null;V.prototype.defaultPlaybackCore=null;V.prototype.activePlaybackCore=null;V.prototype.onRegister=function(){V.__super__.onRegister.call(this);this.registerPlaybackCore(new W);this.registerPlaybackCore(this.defaultPlaybackCore);this.registerPlaybackCore(new Hb);
this.activePlaybackCore=this.defaultPlaybackCore};V.prototype.ready=function(){var a;a="function"===typeof this.getPlaybackOrder?this.getPlaybackOrder(this.playbackCoreMap.map(function(a){return a.getPlaybackCoreName()})):void 0;null!=a&&(this.playbackCoreMap=this.playbackCoreMap.sort(function(b,c){b=a.indexOf(b.getPlaybackCoreName());c=a.indexOf(c.getPlaybackCoreName());return b===c?0:-1===b&&-1!==c?1:-1!==b&&-1===c?-1:b-c}))};V.prototype.getActivePlaybackCore=function(){return this.activePlaybackCore};
V.prototype.registerPlaybackCore=function(a){var b;b=a.getPlaybackCoreName();null==a||this.playbackCoreMap.some(function(a){return a.getPlaybackCoreName()===b})||this.playbackCoreMap.push(a)};V.prototype.retrievePlaybackCore=function(a){var b,c,e,k;k=this.playbackCoreMap;c=0;for(e=k.length;c<e;c++)if(b=k[c],b.getPlaybackCoreName()===a)return b};V.prototype.removePlaybackCore=function(a){var b;a=this.retrievePlaybackCore(a);if(null==a)return null;b=this.playbackCoreMap.indexOf(a);this.playbackCoreMap.splice(b,
1);return a};V.prototype.setPlaybackCore=function(a){var b,c,e,k,d;d=this.playbackCoreMap;e=0;for(k=d.length;e<k;e++)if(b=d[e],!0===b.canPlayMedium(a.medium)&&!0===b.canPlayTemporalType(a.temporalType)&&""!==b.canPlayType(a.type)){c=b;break}if(null==c)throw a=Error(),a.code=MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,a;b=this.facade.retrieveProxy(p.NAME);b!==c&&("function"===typeof b.destroy&&b.destroy(),this.facade.removeProxy(p.NAME),this.facade.registerProxy(c),c.setData(b.getData()));this.activePlaybackCore=
c;return a};V.prototype.canPlayType=function(a){var b,c,e,k;k=this.playbackCoreMap;c=0;for(e=k.length;c<e;c++)if(b=k[c],b=b.canPlayType(a),""!==b)return b;return""};V.prototype.getContextData=function(){var a,b,c,e;a=this.facade.retrieveProxy(K.NAME);e=this.facade.retrieveProxy(p.NAME);c=this.facade.retrieveProxy(q.NAME);b=this.facade.getViewComponent();return{width:b.offsetWidth,height:b.offsetHeight,mode:"html5",autoplay:a.getAutoplay(),domain:a.getDomain(),name:a.getName(),currentTime:e.getCurrentTime(),
duration:e.getDuration(),version:a.getVersion(),timecode:{duration:f.formatTimecode(c.getDuration()),currentTime:f.formatTimecode(e.getCurrentTime())}}};var q=function(){this.data={metadata:{}};this.transforms=[this.defaultMediaTranform.bind(this)];q.__super__.constructor.call(this)};g(q,kb);q.NAME="MediaProxy";q.prototype.contextName="media";q.prototype.data=null;q.prototype.value=null;q.prototype.started=!1;q.prototype.authorized=!0;q.prototype.transforms=null;q.prototype.getContextData=function(){return this.data};
q.prototype.setData=function(a){this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(d.MEDIA_SEQUENCE_ABORTED);this.started=!1;this.setAutoplay(a.autoplay);this.setType(a.type);this.setIsLive(a.isLive);this.setTemporalType(a.temporalType);null!=a.source&&this.setSource(a.source);null!=a.src&&this.setSrc(a.src);this.setTitle(a.title);this.setDuration(a.duration);this.setPoster(a.poster);this.setGUID(a.guid);this.setLink(a.link);this.setEmbed(a.embed);this.setWidth(a.width);
this.setHeight(a.height);this.setCategory(a.category);this.setStartTime(a.startTime);this.setDescription(a.description);this.setStatus(a.status);this.setCategory(a.category);this.setMetadata(a.metadata);this.setAuthorization(a.authorization);this.setMedium(a.medium);this.setPubDate(a.pubDate);this.setTrack(a.track);this.setScenes(a.scenes);this.setKeys(a.keys);this.setCues(a.cues);return this.data};q.prototype.defaultMediaTranform=function(a){var b,c,e,k,d,h,g;if(null==a.src&&0<(null!=(e=a.source)?
e.length:void 0))if(c=this.facade.retrieveProxy(V.NAME)||this.facade,null!=c&&(b=f.selectSource(a.source,function(a){return c.canPlayType(a)})),null!=(null!=b?b.src:void 0)&&""!==b.src)a.src=b.src,a.type=b.type;else throw Error("No valid source could be found");null==a.type&&(a.type=f.getMimeType(a.src));null==a.medium&&(a.medium=/audio/.test(a.type)?"audio":"video");null==a.temporalType&&(a.temporalType="vod");a.isLive="live"===a.temporalType||"dvr"===a.temporalType;if(null!=a.scenes)for(g=a.scenes,
b=d=0,h=g.length;d<h;b=++d)e=g[b],e.start=isNaN(k=f.flattenTimecode(e.sceneStartTime))?0:k,e.end=isNaN(k=f.flattenTimecode(e.sceneEndTime))?0:k,e.title=e.sceneTitle||"",e.description=e.sceneDescription||"",e.position=b+1;a.startTime=0;null==a.status&&(a.status={});null==a.metadata&&(a.metadata={});a.originalSrc=a.src;return Promise.resolve(a)};q.prototype.transform=function(a){return f.chain(this.transforms,a)};q.prototype.updateData=function(a){var b,c;for(b in a)c=a[b],b in this.data&&(this.data[b]=
c)};q.prototype.getGUID=function(){return this.data.guid};q.prototype.setGUID=function(a){return this.data.guid=a};q.prototype.getLink=function(){return this.data.link};q.prototype.setLink=function(a){return this.data.link=a};q.prototype.getStartTime=function(){return this.data.startTime};q.prototype.setStartTime=function(a){return this.data.startTime=a};q.prototype.getEmbed=function(){return this.data.embed};q.prototype.setEmbed=function(a){return this.data.embed=a};q.prototype.getAutoplay=function(){return this.data.autoplay};
q.prototype.setAutoplay=function(a){return this.data.autoplay=a};q.prototype.getPubDate=function(){return this.data.pubDate};q.prototype.setPubDate=function(a){return this.data.pubDate=a};q.prototype.getCategory=function(){return this.data.category};q.prototype.setCategory=function(a){return this.data.category=a};q.prototype.getStatus=function(){return this.data.status};q.prototype.setStatus=function(a){return this.data.status=null!=a?a:{}};q.prototype.getSrc=function(){return this.facade.security.createURL(this.data.src)};
q.prototype.setSrc=function(a){return this.data.src=a};q.prototype.getType=function(){return this.data.type};q.prototype.setType=function(a){return this.data.type=a};q.prototype.getMedium=function(){return this.data.medium};q.prototype.setMedium=function(a){if(a!==this.data.medium)return this.data.medium=a,this.facade.retrieveProxy(v.NAME).setMedium(a)};q.prototype.getMetadata=function(){return this.data.metadata};q.prototype.setMetadata=function(a){return this.data.metadata=a};q.prototype.getSource=
function(){return this.data.source};q.prototype.setSource=function(a){return this.data.source=a};q.prototype.getTrack=function(){return this.data.track};q.prototype.setTrack=function(a){return this.data.track=a};q.prototype.getTitle=function(){return this.data.title};q.prototype.setTitle=function(a){return this.data.title=a};q.prototype.getWidth=function(){return this.data.width};q.prototype.setWidth=function(a){return this.data.width=a};q.prototype.getHeight=function(){return this.data.height};q.prototype.setHeight=
function(a){return this.data.height=a};q.prototype.getDescription=function(){return this.data.description};q.prototype.setDescription=function(a){return this.data.description=a};q.prototype.getCategory=function(){return this.data.category};q.prototype.setCategory=function(a){return this.data.category=a};q.prototype.getDuration=function(a){return this.data.duration};q.prototype.setDuration=function(a){var b;if(0!==a&&"live"!==this.data.temporalType&&(b=navigator.userAgent,1!==a||!/Android/.test(b)||
/Android.*Chrome/.test(b)))return a!==this.data.duration&&(this.data.duration=a,this.sendNotification(d.DURATION_CHANGE,a)),Infinity===a&&this.setTemporalType("live"),a};q.prototype.getPoster=function(a){return this.data.poster};q.prototype.setPoster=function(a){this.data.poster=a};q.prototype.getIsLive=function(){return this.data.isLive};q.prototype.setIsLive=function(a){if(a!==this.data.isLive)return this.data.isLive=a,this.sendNotification(d.IS_LIVE,a),a};q.prototype.getTemporalType=function(){return this.data.temporalType||
"vod"};q.prototype.setTemporalType=function(a){var b;a!==this.data.temporalType&&(b=this.data.temporalType,this.data.temporalType=a,this.sendNotification(d.TEMPORAL_TYPE_CHANGE,{previous:b,value:a}))};q.prototype.getScenes=function(){return this.data.scenes};q.prototype.setScenes=function(a){return this.data.scenes=a};q.prototype.getCues=function(){return this.data.cues};q.prototype.setCues=function(a){null==a&&(a=[]);if(this.data.cues!==a)return this.data.cues=a,this.sendNotification(d.CUES_CHANGE,
a),a};q.prototype.getScene=function(a){var b,c,e,k;if(null!=this.data.scenes)for(k=this.data.scenes,b=c=0,e=k.length;c<e;b=++c)if(b=k[b],b.start<=a&&a<b.end)return b};q.prototype.getKeys=function(){return this.data.keys};q.prototype.setKeys=function(a){this.data.keys=a};q.prototype.getAuthorization=function(){return this.data.authorization};q.prototype.setAuthorization=function(a){this.data.authorization=a};q.prototype.getTransforms=function(){return this.transforms};var U=function(){U.__super__.constructor.call(this,
this.constructor.NAME,{});this.setupHDN1()};g(U,puremvc.Proxy);U.NAME="SecurityProxy";U.prototype.authorized=!0;U.prototype.timeout=null;U.prototype.setupHDN1=function(){var a=this;return window.retrieveToken=function(b,c){var e;try{a.facade.logger.debug("[AMP AUTH] HDN1: Token Requested",b,c),e=a.getToken(),null!=e?a.facade.getMediaElement().tokenRetrievalSuccess("\x26primaryToken\x3d"+e):a.sendNotification(Ea.AUTHORIZE)}catch(k){a.facade.logger.error("[AMP AUTH ERROR]: Token Retrival Error",k)}return!0}};
U.prototype.setMedia=function(a){this.setSession(null);this.setAuthorized("blocked"!==a.status.state);this.setAuthorization(a.authorization)};U.prototype.authorize=function(a){this.setAuthorization(a);this.sendNotification(Ea.AUTHORIZED,a)};U.prototype.getAuthorization=function(){return this.data};U.prototype.setAuthorization=function(a){this.data=a||{};null!=this.data.expiration&&this.setExpiration(this.data.expiration);return a};U.prototype.getKey=function(){return this.data.key};U.prototype.setKey=
function(a){return this.data.key=a};U.prototype.getToken=function(){return this.data.token};U.prototype.setToken=function(a){return this.data.token=a};U.prototype.getExpiration=function(){return this.data.expiration};U.prototype.setExpiration=function(a){this.data.expiration=a;this.data.expiration>Date.now()&&this.startTimeout();return a};U.prototype.startTimeout=function(){var a=this;f.getUTC().then(function(b){return a.timeout=setTimeout(function(){a.sendNotification(Ea.AUTHORIZATION_EXPIRED);a.sendNotification(Ea.AUTHORIZE,
{media:a.facade.getMedia()})},a.getExpiration()-b)})};U.prototype.stopTimeout=function(){clearTimeout(this.timeout)};U.prototype.getSecret=function(){var a;if(null==this.data.token)return null;a="";null!=this.data.token&&(a=""+this.data.token);null!=this.data.key&&(a=""+this.data.key+"\x3d"+a);return a};U.prototype.createURL=function(a){var b;b=this.getSecret();null!=b&&(a+=/\?/.test(a)?"\x26":"?",a+=b);return a};U.prototype.getAuthorized=function(){return this.authorized};U.prototype.setAuthorized=
function(a){this.stopTimeout();return this.authorized=a};U.prototype.getSession=function(){return this.session};U.prototype.setSession=function(a){return this.session=a};var Dc=function(a){this.message=Dc.MESSAGE+a};g(Dc,Error);Dc.MESSAGE="Tokenization Error: Could not find token value for: ";var ac=function(a){ac.__super__.constructor.call(this,a)};g(ac,ib);ac.prototype.parse=function(a){return this.source=this.data=this.value=a};ac.prototype.compile=function(a,b){return this.value};var bc=function(a){bc.__super__.constructor.call(this,
a)};g(bc,ib);bc.prototype.exec=null;bc.prototype.parse=function(a){this.source=this.data=a;this.exec=new Function("context","var value; with(context){value \x3d "+this.data+";}return value;");return this.data};bc.prototype.compile=function(a,b){null==a&&(a={});null==b&&(b=!1);if(null==this.exec)return this.value;try{this.value=this.exec(a)}catch(c){if(this.value=null,!b)throw new Dc(this.data);}return this.value};var jb=function(a){this.token=RegExp(this.tokenStart.source+"([^$#]*)"+this.tokenEnd.source,
"g");jb.__super__.constructor.call(this,a)};g(jb,ib);jb.prototype.exec=null;jb.prototype.tokenStart=/[\$#]{/;jb.prototype.tokenEnd=/}/;jb.prototype.token=null;jb.prototype.parse=function(a){var b,c,e,k,d,h;this.source=a;this.data=[];if(this.token.test(this.source)){k=[];c=null;a=this.source.replace(this.token,function(a,b,e,d){k.push(b);c="\x3c\x3c\x3e\x3e";0<e&&e<d.length-a.length&&(c+="\x3c\x3c\x3e\x3e");return c});b=a.split("\x3c\x3c\x3e\x3e");d=e=0;for(h=b.length;d<h;d++)a=b[d],""===a&&k[e]?(this.data.push(new bc(k[e])),
e++):""!==a&&this.data.push(new ac(a));1===this.data.length&&(this.data=this.data[0])}else this.data=new ac(a);return this.data};jb.prototype.compile=function(a,b){var c,e,k,d;null==a&&(a={});null==b&&(b=!1);if(null==this.data)return this.value;try{if(this.data instanceof Rb)this.value=this.data.compile(a,b);else for(this.value="",d=this.data,e=0,k=d.length;e<k;e++)c=d[e],this.value+=c.compile(a,b)}catch(h){if(this.value=null,!b)throw new Dc(this.source);}return this.value};var Gb=function(a){Gb.__super__.constructor.call(this,
a)};g(Gb,ib);Gb.prototype.parse=function(a){var b,c;this.source=a;this.data={};for(b in a)c=a[b],this.data[b]=Gb.__super__.parse.call(this,c);return this.data};Gb.prototype.compile=function(a,b){var c,e,k;null==a&&(a={});null==b&&(b=!1);this.value={};k=this.data;for(c in k){e=k[c];try{this.value[c]=e.compile(a,b)}catch(d){this.value[c]=null,Q.instance.error(d)}}return this.value};var R={NORMAL:"normal",FULL_SCREEN:"full-screen"},oa=function(a){oa.__super__.constructor.call(this,a)};g(oa,O);oa.NAME=
O.NAME;oa.prototype.bindings=null;oa.prototype.configurationName=null;oa.prototype.configurationData=null;oa.prototype.contextName=null;oa.prototype.contextData=null;oa.prototype.value=null;oa.prototype.getConfigurationName=function(){return this.configurationName};oa.prototype.getConfigurationData=function(){return this.configurationData.value||{}};oa.prototype.getContextName=function(){return this.contextName};oa.prototype.getContextData=function(){return this.contextData};oa.prototype.onRegister=
function(){var a;a=this.facade.player||this.facade;null==this.getConfigurationName()&&(this.configurationName=this.facade.moduleName);this.bindings=a.retrieveProxy(ia.NAME);this.bindings.registerConfiguration(this);null!=this.getContextName()&&this.bindings.registerContext(this)};oa.prototype.setData=function(a){var b,c,e;null==a&&(a={});this.data={};e=this.getDefaults();for(b in e)c=e[b],this.data[b]=b in a?a[b]:c;this.configurationData=new Gb(this.data);return this.data};oa.prototype.getValue=function(a){var b;
this.bindings.update();this.value[a]=null!=(b=this.configurationData.data[a])?b.compile(this.bindings.getData()):void 0;return this.value[a]};oa.prototype.compile=function(a,b){null==b&&(b=!1);if(null==this.configurationData)return null;null==a&&(a=this.bindings.getData());null!=this.contextName&&null!=this.contextData&&(a=f.clone(a),a[this.contextName]=this.contextData);this.configurationData.compile(a,b);return this.value=this.configurationData.value};var ub=function(a){ub.__super__.constructor.call(this,
a)};g(ub,oa);ub.NAME="ParamsProxy";ub.prototype.defaults={};ub.prototype.configurationName="params";ub.prototype.setData=function(a){var b,c;this.data=(null!=(c=this.configurationData)?c.source:void 0)||{};for(b in a)this.data[b]=a[b];this.configurationData=new Gb(this.data);return this.data};var L={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"},ia=function(){ia.__super__.constructor.call(this,this.constructor.NAME,{});this.data={};
this.contextMap={};this.configurationMap={}};g(ia,puremvc.Proxy);ia.NAME="DataBindingProxy";ia.prototype.contextMap=null;ia.prototype.configurationMap=null;ia.prototype.paramsProxy=null;ia.prototype.initialize=function(){this.paramsProxy=this.facade.retrieveProxy(ub.NAME);this.update()};ia.prototype.registerContext=function(a){null!=a&&(this.contextMap[a.getContextName()]=a)};ia.prototype.retrieveContext=function(a){return this.contextMap[a]};ia.prototype.removeContext=function(a){var b;b=this.contextMap[a];
delete this.contextMap[a];return b};ia.prototype.registerConfiguration=function(a){null!=a&&(this.configurationMap[a.getConfigurationName()]=a,a.compile(this.context,!0))};ia.prototype.retrieveConfiguration=function(a){return this.configurationMap[a]};ia.prototype.removeConfiguration=function(a){var b;b=this.configurationMap[a];delete this.configurationMap[a];return b};ia.prototype.evaluateBinding=function(a){this.update();a=new jb(a);a.compile(this.data);return a.value};ia.prototype.update=function(a){var b,
c,e,k;this.data.now=Date.now();k=this.contextMap;for(e in k)b=k[e],-1!==(null!=a?"function"===typeof a.indexOf?a.indexOf(e):void 0:void 0)&&(this.data[e]=b.getContextData());this.paramsProxy.compile(this.data);b=this.paramsProxy.value;for(c in b)a=b[c],this.data[c]=a;return this.data};ia.prototype.compile=function(a,b){var c,e,k,d,h;null==b&&(b=!1);this.update(a);e=f.clone(this.data);d=this.paramsProxy.getConfigurationName();h=this.configurationMap;for(k in h)c=h[k],k!==d&&c.compile(e,b)};var Gd=
{FLASH:"flash",HTML:"html"},tb={ACTIVE:"active",INACTIVE:"inactive"},Ca={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},v=function(){v.__super__.constructor.call(this);this.device=f.getDevice()};g(v,puremvc.Proxy);v.NAME="ApplicationStateProxy";v.prototype.displayState=R.NORMAL;v.prototype.playState=null;v.prototype.renderMode=null;v.prototype.activeState=null;v.prototype.seeking=!1;v.prototype.seekrequested=!1;v.prototype.waiting=
!1;v.prototype.isUserActive=!1;v.prototype.device=null;v.prototype.volume=1;v.prototype.playbackTarget="amp";v.prototype.hasPostContent=!1;v.prototype.locked=!1;v.prototype.mediaElement=null;v.prototype.hidden=!1;v.prototype.pausedBeforeSeek=!1;v.prototype.ended=!1;v.prototype.getHasPostContent=function(){return this.hasPostContent};v.prototype.setHasPostContent=function(a){this.hasPostContent=a};v.prototype.getEnded=function(){return this.ended};v.prototype.setEnded=function(a){this.ended=a;!0===
this.ended&&!0===this.seeking&&(this.seeking=!1)};v.prototype.getDisplayState=function(){return this.displayState};v.prototype.setDisplayState=function(a){var b;a!==this.displayState&&(b=this.displayState,this.displayState=a,this.sendNotification(d.DISPLAY_STATE_CHANGE,{previous:b,value:this.displayState}))};v.prototype.getPlayState=function(){return this.playState};v.prototype.setPlayState=function(a){var b;!0===this.getWaiting()&&this.setWaiting(!1);if(a!==this.playState)switch(b=this.playState,
this.playState=a,this.sendNotification(d.PLAY_STATE_CHANGE,{previous:b,value:this.playState}),a){case L.PLAYING:this.sendNotification(d.DISPATCH_EVENT,new H("playing"));break;case L.ENDED:this.pausedBeforeSeek=!1}};v.prototype.getDevice=function(){return this.device};v.prototype.getSeeking=function(){return this.seeking};v.prototype.setSeeking=function(a){a!==this.seeking&&(this.seeking=a,!1===this.seeking&&this.playState===L.PAUSED&&!0===this.getWaiting()&&this.setWaiting(!1))};v.prototype.getSeekRequested=
function(){return this.seekrequested};v.prototype.setSeekRequested=function(a){a!==this.seekrequested&&(this.seekrequested=a)};v.prototype.getWaiting=function(){return this.waiting};v.prototype.setWaiting=function(a){var b,c=this;a!==this.waiting&&(this.waiting=a,a=!0===this.waiting?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,this.sendNotification(a,L.WAITING),!0===this.waiting&&(this.facade.getMediaElement(),b=function(a){c.facade.removeEventListener("playing",b);c.facade.removeEventListener("timeupdate",
b);c.facade.removeEventListener("ended",b);c.setWaiting(!1)},this.facade.addEventListener("playing",b),this.facade.addEventListener("timeupdate",b),this.facade.addEventListener("ended",b)))};v.prototype.getLocked=function(){return this.locked};v.prototype.setLocked=function(a){this.locked=a};v.prototype.getIsUserActive=function(){return this.isUserActive};v.prototype.setIsUserActive=function(a){a!==this.isUserActive&&(this.isUserActive=a)};v.prototype.getRenderMode=function(){return this.renderMode};
v.prototype.setRenderMode=function(a){a!==this.renderMode&&(this.renderMode=a)};v.prototype.getMedium=function(){return this.medium};v.prototype.setMedium=function(a){var b;a!==this.medium&&(b=null!=this.medium?"medium-"+this.medium:this.medium,this.medium=a,this.sendNotification(d.MEDIUM_CHANGE,{previous:b,value:"medium-"+this.medium}))};v.prototype.getVolume=function(){return this.volume};v.prototype.setVolume=function(a){if(a!==this.volume)return this.volume=a};v.prototype.getPlaybackTarget=function(){return this.playbackTarget};
v.prototype.setPlaybackTarget=function(a){var b;a!==this.playbackTarget&&(b=this.playbackTarget,this.playbackTarget=a,this.sendNotification(d.PLAYBACK_TARGET_CHANGE,{previous:b,value:this.playbackTarget}))};v.prototype.getActiveState=function(){return this.activeState};v.prototype.setActiveState=function(a){var b;a!==this.activeState&&(b=this.activeState,this.activeState=a,this.sendNotification(d.ACTIVE_STATE_CHANGE,{previous:b,value:this.activeState}))};v.prototype.getMediaElement=function(){return this.mediaElement};
v.prototype.setMediaElement=function(a){var b;a!==this.mediaElement&&(b=this.mediaElement,this.mediaElement=a,this.sendNotification(d.MEDIA_ELEMENT_CHANGE,{previous:b,value:this.mediaElement}))};v.prototype.getHidden=function(){return this.hidden};v.prototype.setHidden=function(a){var b;a!==this.hidden&&(b=this.hidden,this.hidden=a,this.sendNotification(d.HIDDEN_CHANGE,{previous:b,value:this.hidden}))};var Ec=function(){Ec.__super__.constructor.call(this)};g(Ec,q);Ec.NAME="MediaProxy";Ec.prototype.setSource=
function(a){if(!(null==a||1>a.length))return a=a.filter(function(a){return"external"===a.type}),Ec.__super__.setSource.call(this,a)};var wa=function(){wa.__super__.constructor.call(this)};g(wa,puremvc.Proxy);wa.NAME="PlaybackProxy";wa.prototype.src=null;wa.prototype.getPlaybackCoreName=function(){return"external"};wa.prototype.canPlayType=function(a){return"external"===a};wa.prototype.canPlayTemporalType=function(a){return!0};wa.prototype.getSrc=function(){return this.facade.mediaProxy.getSrc()};
wa.prototype.play=function(){window.open(this.getSrc(),"_blank")};wa.prototype.load=function(){};wa.prototype.setVolume=function(){};wa.prototype.pause=function(){};wa.prototype.setEnabled=function(){};wa.prototype.getCurrentTime=function(){return 0};wa.prototype.setCurrentTime=function(a){};wa.prototype.getDuration=function(){return 0};var Ha={TOGGLE_PLAY_PAUSE:"usertogglePlayPause",PLAY:"userplay",PAUSE:"userpause",SEEK:"userseek",SEEKED:"userseeked",GO_LIVE:"usergolive"},ga=function(a){ga.__super__.constructor.call(this,
a)};g(ga,oa);ga.NAME=O.NAME;ga.prototype.enabled=!0;ga.prototype.plugin=null;ga.prototype.appState=null;ga.prototype.getDefaults=function(){var a;a=ga.__super__.getDefaults.call(this);null==a.debug&&(a.debug=null);return a};ga.prototype.initializeNotifier=function(a){ga.__super__.initializeNotifier.call(this,a);this.appState=this.facade.player.appState};ga.prototype.getMediaElement=function(){return this.facade.player.getMediaElement()};ga.prototype.setEnabled=function(a){return this.enabled=a};ga.prototype.getEnabled=
function(){return this.enabled};ga.prototype.getDebug=function(){return null!=this.value.debug?this.value.debug:!0===this.facade.player.getConfig().debug};ga.prototype.createPlugin=function(){};ga.prototype.initialize=function(){this.plugin=this.createPlugin()};ga.prototype.error=function(a){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",a)};var Ob={PREFIX:"akamai-"},sa=function(){sa.__super__.constructor.call(this)};g(sa,C);sa.prototype.player=null;sa.prototype.proxy=
null;sa.prototype.initialize=function(a,b){this.player=b;this.logger=this.player.logger;sa.__super__.initialize.call(this,a,b)};sa.prototype.isAvailable=function(){return!0};sa.prototype.loadModuleResources=function(){return this.isAvailable()?sa.__super__.loadModuleResources.call(this):Promise.resolve()};sa.prototype.resourcesLoaded=function(){if("function"===typeof this.oninitialized)this.oninitialized(this)};sa.prototype.onRegister=function(){var a;this.isAvailable()&&(this.createFramework(),null!=
(a=this.retrieveProxy(ga.NAME))&&"function"===typeof a.initialize&&a.initialize());this.performance.ready=Date.now();this.sendNotification(Ca.PLUGIN_REGISTERED,this)};sa.prototype.logEvent=function(a){var b;!0!==/(timeupdate|timeremaining)/.test(a.type)&&(b=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase(),null!=a.dispatcher&&(b+=" "+a.dispatcher),this.logger.log("["+b+" EVENT] "+a.type,a))};sa.prototype.listNotificationPublications=function(){var a,b;return[d.ADD_LAYER,
d.REMOVE_LAYER,d.ADD_OVERLAY,d.REMOVE_OVERLAY,d.ADD_APPLICATION_STATE,d.REMOVE_APPLICATION_STATE,d.IS_USER_ACTIVE,d.PLAYBACK_CORE_CHANGE].concat(function(){var c;c=[];for(a in Ca)b=Ca[a],c.push(b);return c}())};var Vb=function(){Vb.__super__.constructor.call(this)};g(Vb,A);Vb.prototype.execute=function(a){this.applicationState.setPlayState(a.getBody())};var yc=function(){yc.__super__.constructor.call(this)};g(yc,A);yc.prototype.execute=function(a){try{this.media.setData(a.getBody())}catch(b){this.sendNotification(d.ERROR,
b.message);return}this.sendNotification(d.UPDATE_DATA_BINDINGS);a=this.media.getData();this.security.setMedia(a);this.security.getAuthorized()?this.sendNotification(Ea.AUTHORIZED,this.security.getAuthorization()):this.sendNotification(Ea.AUTHORIZE,{media:a})};var xc=function(){xc.__super__.constructor.call(this)};g(xc,A);xc.prototype.execute=function(a){var b=this;a=a.getBody();this.applicationState.setEnded(!1);this.playback.setEnabled(!1);this.playback.pause();this.sendNotification(d.HAS_POST_CONTENT,
!1);this.sendNotification(d.CHANGE_PLAY_STATE,L.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,tb.ACTIVE);this.media.transform(a).then(function(a){return b.sendNotification(d.CHANGE_MEDIA,a)})["catch"](function(a){return b.sendNotification(d.ERROR,a)})};var nd=function(){nd.__super__.constructor.call(this)};g(nd,A);nd.prototype.execute=function(a){a=a.getBody();this.media.getDuration()!==a&&this.media.setDuration(a)};var Yb=function(){Yb.__super__.constructor.call(this)};g(Yb,s);Yb.prototype.execute=
function(a){var b;this.playback.destroy();b=this.playback.getMediaElement();l.clear(b);b=a.getBody();this.logger.error("[AMP ERROR]",b);this.sendNotification(d.CHANGE_PLAY_STATE,L.ERROR);this.facade.error=b;Yb.__super__.execute.call(this,a)};var zc=function(){zc.__super__.constructor.call(this)};g(zc,s);zc.prototype.execute=function(a){var b,c;b=null!=(c=this.facade.config)?c.volume:void 0;null!=b&&this.sendNotification(d.CHANGE_VOLUME,b);this.playerCore.ready();!0===this.facade.config.autoplay&&
this.sendNotification(d.ADD_APPLICATION_STATE,"autoplay");this.sendNotification(d.CHANGE_DISPLAY_STATE,R.NORMAL);this.sendNotification(d.CHANGE_PLAY_STATE,L.READY);this.sendNotification(d.CHANGE_ACTIVE_STATE,tb.ACTIVE);this.dispatchEventAfterCommand(a)};var Xb=function(){Xb.__super__.constructor.call(this)};g(Xb,A);Xb.prototype.execute=function(a){a=a.getBody()||{};this.bindings.compile(a.contexts,a.suppressErrors)};var Ac=function(){Ac.__super__.constructor.call(this)};g(Ac,A);Ac.prototype.execute=
function(a){this.params.setData(a.getBody());this.sendNotification(d.UPDATE_DATA_BINDINGS,{suppressErrors:!0})};var Wb=function(){Wb.__super__.constructor.call(this)};g(Wb,s);Wb.prototype.execute=function(a){var b;b=a.getBody();this.playerCore.setPlaybackCore(b);this.playback.reset();this.playback.setCurrentTime(b.startTime||0);Wb.__super__.execute.call(this,a)};var Ua=function(){Ua.__super__.constructor.call(this)};g(Ua,Na);Ua.prototype.componentName="overlays";Ua.NAME="OverlayLayerMediator";Ua.prototype.createMediatorName=
function(){return Ua.NAME};Ua.prototype.listNotificationInterests=function(){return[d.ADD_OVERLAY,d.REMOVE_OVERLAY]};Ua.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.ADD_OVERLAY:this.viewComponent.appendChild(a);break;case d.REMOVE_OVERLAY:this.viewComponent.removeChild(a)}};var Da=function(){this.plugins=[];this.registered=0;Da.__super__.constructor.call(this,this.constructor.NAME,{})};g(Da,puremvc.Mediator);Da.NAME="PluginAdapter";Da.prototype.plugins=
null;Da.prototype.registered=null;Da.prototype.onRegister=function(){return Da.__super__.onRegister.call(this)};Da.prototype.listNotificationInterests=function(){return[Ca.REGISTER_PLUGINS,Ca.PLUGIN_REGISTERED]};Da.prototype.handleNotification=function(a){var b,c,e,k,d,h,f,g,l=this;c=a.getName();a=a.getBody();switch(c){case Ca.REGISTER_PLUGINS:h=this.facade.getPlayerType();g=B.plugins;for(k in g)if(f=g[k],k in a&&(c=a[k],null!=c&&!1!==c.enabled))if(b=f[h],null==b)this.facade.logger.debug("[AMP] Plugin could not be found: "+
k);else try{d=new b,d.oninitialized=this.onplugininitialized.bind(this,k),d.onerror=this.onpluginerror.bind(this,k),e=d.initialize.bind(d,c,this.facade),this.plugins.push(e)}catch(m){this.logger.error("[AMP] Plugin could not be created: "+k+". "+m)}d=a.plugins||{};for(k in d)c=d[k],null!=c&&!1!==c.enabled&&(e=function(a,c,e,k,d){return l.facade.loadResources(c.resources).then(function(){b=B.plugins[e][h];null==b&&d("[AMP] Plugin could not be found: "+e);return b(a,c,e)}).then(k)["catch"](d)},this.plugins.push(e.bind(null,
this.facade,c,k,this.onpluginregistered.bind(this,k),this.onpluginerror.bind(this,k))));this.plugins.forEach(function(a){return a()});break;case Ca.PLUGIN_REGISTERED:this.onpluginregistered(a.getModuleName(),a)}};Da.prototype.initializedCheck=function(){this.registered===this.plugins.length&&this.sendNotification(Ca.PLUGINS_INITIALIZED,this.plugins)};Da.prototype.onplugininitialized=function(a,b){b.oninitialized=null;b.onerror=null;this.facade.registerModule(b)};Da.prototype.onpluginerror=function(a,
b){this.registered++;this.facade.logger.error("[AMP] Plugin could not be registered: "+a);this.facade.logger.error(b);this.initializedCheck()};Da.prototype.onpluginregistered=function(a,b){var c;this.registered++;this.facade.logger.debug("[AMP] Plugin registered: "+a);this.facade[a]=b;c=("function"===typeof b.getFeatureName?b.getFeatureName():void 0)||b.feature;null!=c&&(this.facade[c]=b);this.initializedCheck()};var ja=function(a){this.element=a};ja.prototype.element=null;ja.prototype.prefix=Ob.PREFIX;
ja.prototype.contains=function(a){return this.constructor.contains(a,this.element,this.prefix)};ja.prototype.add=function(a){this.constructor.add(a,this.element,this.prefix)};ja.prototype.remove=function(a){this.constructor.remove(a,this.element,this.prefix)};ja.prototype.toggle=function(a){return this.constructor.contains(a,this.element,this.prefix)};ja.contains=function(a,b,c){var e;null==c&&(c="");a=c+a;return null!=(null!=(e=b.classList)?e.contains:void 0)?b.classList.contains(a):-1!==b.className.indexOf(a)};
ja.add=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.add:void 0)?b.classList.add(c):this.contains(a,b)||(b.className=""!==b.className?b.className+(" "+c):c)};ja.remove=function(a,b,c){var e;null==c&&(c="");c+=a;null!=(null!=(e=b.classList)?e.remove:void 0)?b.classList.remove(c):this.contains(a,b)&&(a=RegExp(" ?"+c),b.className=b.className.replace(a,""))};ja.toggle=function(a,b,c){var e;null!=(null!=(e=b.classList)?e.toggle:void 0)?b.classList.toggle(this.prefix+a):this.contains(a,
b)?this.remome(a,b):this.add(a,b)};var T=function(a){var b,c;T.__super__.constructor.call(this);this.data={language:navigator.language||navigator.browserLanguage,locales:hb.defaults.locales};if(null!=a&&(null!=a.language&&(this.data.language=a.language),null!=a.locales))for(c in a.locales)if(null!=this.data.locales[c])for(b in a.locales[c])this.data.locales[c][b]=a.locales[c][b];else this.data.locales[c]=a.locales[c]};g(T,kb);T.NAME="LocalizationProxy";T.prototype.contextName="l10n";T.prototype.locale=
null;T.prototype.localeId=null;T.prototype.onRegister=function(){T.__super__.onRegister.call(this);this.setLocale(this.data.language)};T.prototype.getContextData=function(){return this.locale};T.prototype.getLanguage=function(){return this.data.language};T.prototype.setLanguage=function(a){var b=this;this.setLocale(a).then(function(){b.data.language=a;b.sendNotification(d.LANGUAGE_CHANGE,a)});return a};T.prototype.setLocale=function(a){var b=this;return new Promise(function(c,e){var k,d,h;k=function(){b.localeId=
h;b.locale=b.facade.l10n=b.data.locales[h];c()};h=a;d=b.data.locales[h];null==d&&(h=a.substring(0,2),d=b.data.locales[h]);return"string"===typeof d?B.addResource({src:b.facade.evaluatePaths(d),type:f.mimeTypes.json}).then(function(a){b.data.locales[h]=a.data;return k()}):k()})};T.prototype.getLocaleId=function(){return this.localeId};T.prototype.getLocales=function(){return this.data.locales};T.prototype.setLocales=function(a){return this.data.locales=a};T.prototype.getString=function(a){var b;try{return b=
this.locale||this.data.locales.en,b[a]||""}catch(c){return""}};T.prototype.getLanguageString=function(a){var b;if("string"!==typeof a||null==a||""===a)return"";b="MSG_"+a.toUpperCase();b=this.getString(b);""===b&&(a=a.split("-").shift(),b="MSG_"+a.toUpperCase(),b=this.getString(b));return b};var va=function(){};va.create=function(a,b,c,e){var k,d,h,f,g;null==c&&(c="div");"string"===typeof c&&(c=document.createElement(c));k=new ja(c);if(null!=a)for("string"===typeof a&&(a=[a]),f=0,g=a.length;f<g;f++)d=
a[f],k.add(d);c._classList=k;null!=e&&(null!=c.innerText?c.innerText=e:c.textContent=e);null!=b&&(null!=b.getViewComponent&&(h=b.getViewComponent()),null!=h&&(b=h),b.appendChild(c));return c};va.bindEvents=function(a,b,c){var e,k;null==c&&(c=["onRemove","onRegister"]);for(e in b)k=b[e],0<=jc.call(c,e)||!/^on/.test(e)||null==(null!=k?k.bind:void 0)||(a[e]=k.bind(b))};va.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};
var cc=function(){cc.__super__.constructor.call(this)};g(cc,s);cc.prototype.execute=function(a){this.sendNotification(d.PLAY_REQUEST);this.playback.play();cc.__super__.execute.call(this,a)};var I=function(a,b,c){I.__super__.constructor.call(this,a,b,c)};g(I,n);I.prototype.playerType="external";I.prototype.createModel=function(){var a;I.__super__.createModel.call(this);this.registerProxy(new T(this.config));a=new wa;this.registerProxy(a);this.playerCore=new V(a);this.registerProxy(this.playerCore);
this.bindings.initialize()};I.prototype.createView=function(){var a,b=this;this.registerMediator(new ra("external",this.getViewComponent()));this.registerMediator(new Da);a=new Ua;this.registerMediator(a);l.create(a.viewComponent,l.CLICK,function(){return b.sendNotification(d.TOGGLE_ACTIVE)})};I.prototype.createController=function(){I.__super__.createController.call(this);this.registerCommand(d.UPDATE_DATA_BINDINGS,Xb);this.registerCommand(Ha.TOGGLE_PLAY_PAUSE,cc);this.registerCommand(d.PLAY,cc);
this.registerCommand(d.CHANGE_PLAY_STATE,Vb);this.registerCommand(d.SET_MEDIA,xc);this.registerCommand(d.CHANGE_MEDIA,yc);this.registerCommand(d.MEDIA_CHANGE,Wb);this.registerCommand(d.MEDIA_VALIDATED,nc);this.registerCommand(d.ERROR,Yb);this.registerCommand(Ca.PLUGINS_INITIALIZED,kc);this.registerCommand(d.READY,zc);this.registerCommand(d.CHANGE_PARAMS,Ac)};I.prototype.createMediaElement=function(){return document.createElement("div")};I.prototype.evaluateBinding=function(a){var b;return null!=(b=
this.retrieveProxy(ia.NAME))?b.evaluateBinding(a):void 0};I.prototype.canPlayType=function(a){return"maybe"};I.prototype.play=function(){this.sendNotification(d.PLAY)};I.prototype.setParams=function(a){this.sendNotification(d.CHANGE_PARAMS,a);return a};I.prototype.getParams=function(){return this.retrieveProxy(ub.NAME).getData()};I.prototype.setAutoplay=function(a){return!1};I.prototype.getAutoplay=function(){return!1};I.prototype.setLoop=function(a){return!1};I.prototype.getLoop=function(){return!1};
I.prototype.setMuted=function(a){return!1};I.prototype.getMuted=function(){return!1};I.prototype.setMedia=function(a){this.sendNotification(d.SET_MEDIA,a);return a};I.prototype.getMedia=function(a){var b;return null!=(b=this.retrieveProxy(q.NAME))?b.getData():void 0};I.prototype.setCurrentTime=function(a){return 0};I.prototype.getCurrentTime=function(a){return 0};I.prototype.getDuration=function(a){return this.retrieveProxy(q.NAME).getDuration()};I.prototype.setSrc=function(a){this.sendNotification(d.SET_MEDIA,
{src:a});return a};I.prototype.getSrc=function(a){return this.retrieveProxy(q.NAME).getSrc()};I.prototype.setSource=function(a){this.sendNotification(d.SET_MEDIA,{source:a});return a};I.prototype.getSource=function(){return this.retrieveProxy(q.NAME).getSource()};I.prototype.setVolume=function(a){return a};I.prototype.getVolume=function(a){return 1};I.prototype.getSeeking=function(){return!1};I.prototype.getPaused=function(){return!1};I.prototype.getEnded=function(){return!1};var H=function(a,b){this.type=
a;null!=b&&(this.detail=this.data=b)};H.prototype.type=null;H.prototype.target=null;H.prototype.detail=null;var Q=function(a){this.enabled=a;this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){})};Q.prototype.log=function(){try{1<arguments.length&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(a){}};Q.prototype.trace=function(){try{console.trace.apply(console,arguments)}catch(a){}};Q.prototype.debug=function(){try{console.log.apply(console,
arguments)}catch(a){this.log.apply(this,arguments)}};Q.prototype.info=function(){try{console.info.apply(console,arguments)}catch(a){}};Q.prototype.warn=function(){try{console.warn.apply(console,arguments)}catch(a){}};Q.prototype.error=function(){try{console.error.apply(console,arguments)}catch(a){this.log.apply(this,arguments)}};Q.prototype.fatal=function(){try{console.fatal.apply(console,arguments)}catch(a){}};var lb=function(){this.item=[];this.metadata={}};lb.prototype.title=null;lb.prototype.link=
null;lb.prototype.description=null;lb.prototype.category=null;lb.prototype.pubDate=null;lb.prototype.language=null;lb.prototype.ttl=null;lb.prototype.item=null;lb.prototype.metadata=null;var dc=function(){this.metadata={}};dc.prototype.src=null;dc.prototype.debug=null;dc.prototype.type=null;dc.prototype.metadata=null;var Aa={AUTO:"auto",HTML:"html",FLASH:"flash",EXTERNAL:"external",NONE:"none",HTML_AUTO:"html-auto"},ka=function(){return ka.__super__.constructor.apply(this,arguments)};g(ka,dc);ka.prototype.source=
null;ka.prototype.title=null;ka.prototype.description=null;ka.prototype.link=null;ka.prototype.guid=null;ka.prototype.pubDate=null;ka.prototype.poster=null;ka.prototype.thumbnail=null;ka.prototype.embed=null;ka.prototype.category=null;ka.prototype.type=null;ka.prototype.medium=null;ka.prototype.duration=null;ka.prototype.track=null;ka.prototype.metadata=null;ka.prototype.scenes=null;ka.prototype.startTime=null;var Fb=function(){};Fb.prototype.getFeed=function(a){return f.getFeed(a)};Fb.prototype.getMediaNode=
function(a,b,c){var e,k,d,h;null==c&&(c=!0);d="media-"+b;e=a["media-group"]||a;k=e["media-content"];null!=k&&null!=k[d]?h=k[d]:null!=e[d]?h=e[d]:null!=a[d]?h=a[d]:null!=a[b]&&c&&(h=a[b]);return h};Fb.prototype.createEmbed=function(a){var b,c,e,k,d,h;try{b=this.getMediaNode(a,"embed");if(null==b)return c;c={};c.url=b["@attributes"].url;c.width=b["@attributes"].width;c.height=b["@attributes"].height;c.params={};b["media-param"]instanceof Array||(b["media-param"]=[b["media-param"]]);h=b["media-param"];
k=0;for(d=h.length;k<d;k++)e=h[k],c.params[e["@attributes"].name]=e["#text"]}catch(f){Q.error("[AMP Feed Parse Error] embed parse error: "+f.message,f)}return c};Fb.prototype.createFeed=function(a){var b,c,e,d,f,h,g,t,l;try{if(b=a.channel,c=new lb,null!=b){c.title=b.title;c.description=b.description;c.language=b.language;c.category=b.category;c.pubDate=new Date(Date.parse(b.pubDate));c.ttl=b.ttl;d=b.item instanceof Array?b.item:[b.item];t=0;for(l=d.length;t<l;t++)e=d[t],h=this.createMedia(e),c.item.push(h);
for(f in b)g=b[f],f in c||(c.metadata[f]=g)}}catch(m){Q.error("[AMP Feed Parse Error] feed parse error: "+m.message,m)}return c};Fb.prototype.createMedia=function(a){var b,c,e,d,f,h,g,t,l,m,n,p,q,r,s,u,v,w,x,y;try{g=new ka;h=this.getMediaNode(a,"content");if(h instanceof Array)for(g.source=[],p=0,s=h.length;p<s;p++)e=h[p],l={src:e["@attributes"].url,type:e["@attributes"].type},c=e["media-category"],null!=c&&(b=c["@attributes"],"http://mrss.akamai.com/user_agent_hint"===b.schema&&(f=b.label||c["#text"],
null!=f&&""!==f&&(null==l.rules&&(l.rules=[]),l.rules.push(f)))),g.source.push(l),g.medium=e["@attributes"].medium,g.duration=parseFloat(e["@attributes"].duration);else g.type=h["@attributes"].type,g.src=h["@attributes"].url,g.medium=h["@attributes"].medium,g.duration=parseFloat(h["@attributes"].duration);g.guid=a.guid;g.title=this.getMediaNode(a,"title");g.link=a.link;g.description=this.getMediaNode(a,"description");g.pubDate=new Date(Date.parse(a.pubDate));g.thumbnail=g.poster=null!=(w=this.getMediaNode(a,
"thumbnail"))?null!=(x=w["@attributes"])?x.url:void 0:void 0;g.embed=this.createEmbed(a);g.scenes=null!=(y=this.getMediaNode(a,"scenes"))?y["media-scene"]:void 0;t=this.getMediaNode(a,"status",!1);null!=t&&(g.status={state:t["@attributes"].state,reason:t["@attributes"].reason});g.category=a.category;g.category instanceof Array||(g.category=[g.category]);t=this.getMediaNode(a,"category",!1);if(null!=t)for(q=0,u=t.length;q<u;q++)c=t[q],null!=c["#text"]&&""!==c["#text"]&&g.category.push(c["#text"]);
null!=g.category&&g.category.sort(function(a,b){a=a.toLowerCase();b=b.toLowerCase();return a>b?1:a<b?-1:0});t=this.getMediaNode(a,"subTitle");if(null!=t)for(null==g.track&&(g.track=[]),t instanceof Array||(t=[t]),r=0,v=t.length;r<v;r++)m=t[r],null!=m["@attributes"]&&g.track.push({src:m["@attributes"].href,type:m["@attributes"].type,kind:"captions",srclang:m["@attributes"].lang||"en"});c=a.category;c instanceof Array||(c=[c]);g.isLive="live"===a.temporalType||null!=c&&-1!==c.join(",").indexOf("live_stream");
g.temporalType=g.isLive?"live":"vod";for(d in a)n=a[d],d in g||(g.metadata[d]=n)}catch(z){Q.error("[AMP Feed Parse Error] media parse error: "+z.message,z)}return g};var ca=function(a,b,c,e){this.url=a;this.interval=null!=b?b:1E4;this.type=null!=c?c:null;this.headers=null!=e?e:null;ca.__super__.constructor.call(this)};g(ca,ya);ca.prototype.timeout=null;ca.prototype.interval=null;ca.prototype.url=null;ca.prototype.lastModified=null;ca.prototype.contentLenght=null;ca.prototype.data=null;ca.prototype.text=
null;ca.prototype.type=null;ca.prototype.headers=null;ca.prototype.useHeadRequest=!0;ca.prototype.xhr=null;ca.prototype.start=function(){null!=this.url&&""!==this.url&&this.poll()};ca.prototype.poll=function(){var a,b=this;a=f.getXHR();this.useHeadRequest?(a.onload=function(c){var e;304===a.status?b.invoke():(e=a.getResponseHeader("Last-Modified"),c=a.getResponseHeader("Content-Length"),null==e&&null==c||null!=e&&e!==b.lastModified||null!=c&&c!==b.contentLength?(b.lastModified=e,b.contentLength=c,
b.updateData()):b.invoke())},a.onerror=function(a){b.error(a)},a.open("HEAD",f.cacheBust(this.url),!1),this.applyHeaders(),null!=this.lastModified&&a.setRequestHeader("If-Modified-Since",this.lastModified),a.send()):this.updateData()};ca.prototype.applyHeaders=function(){null!=this.headers&&this.xhr.setRequestHeaders(this.headers)};ca.prototype.updateData=function(){var a,b=this;a=f.getXHR();a.open("GET",f.cacheBust(this.url),!0);a.onload=function(c){b.setText(a.responseText);b.invoke()};a.onerror=
function(a){b.error(a)};this.applyHeaders();return a.send()};ca.prototype.setText=function(a){var b;if(a!==this.text){b=this.text=a;if(this.type===f.mimeTypes.json)try{b=this.xhr.response}catch(c){b=this.text}this.setData(b)}return a};ca.prototype.setData=function(a){a!==this.data&&(this.data=a,this.dispatchEvent(new H("datachange",this.data)));return a};ca.prototype.error=function(a){Q.error(event);this.stop()};ca.prototype.invoke=function(){var a=this;this.stop();this.timeout=setTimeout(function(){a.poll()},
this.interval)};ca.prototype.stop=function(){clearTimeout(this.timeout)};var la=function(){la.__super__.constructor.call(this)};g(la,ya);la.prototype.xhr=null;la.prototype.headers=null;la.prototype.response=null;la.prototype.responseXML=null;la.prototype.responseText=null;la.prototype.responseType=null;la.prototype.withCredentials=!1;la.prototype.readyState=0;la.prototype.status=null;la.prototype.open=function(a,b){var c,e,d=this;try{e=new XMLHttpRequest}catch(f){e=new window.ActiveXObject("Microsoft.XMLHTTP")}if(la.isCORS(b))if(Object.prototype.hasOwnProperty.call(e,
"withCredentials"))try{e.withCredentials=this.withCredentials}catch(h){Q.warn("[AMP XHR WARNING]","withCredentials not properly supported in this browser.",h)}else"undefined"!==typeof XDomainRequest&&(c=!0,e=new XDomainRequest);if(null!=e){c&&(e.onprogress=function(){},e.ontimeout=function(){},e.onerror=function(){},e.onload=function(a){"function"===typeof e.onreadystatechange&&(e.readyState=4,e.status=200,e.contentType.match(/\/xml/)&&(e.responseXML=new ActiveXObject("Microsoft.XMLDOM"),e.responseXML.async=
!1,e.responseXML.loadXML(e.responseText)),e.onreadystatechange.call(e,a,!1))});e.onreadystatechange=function(a){var b,c;d.readyState=e.readyState;d.dispatchEvent(new H("readystatechange",e));if(4===e.readyState)if(d.status=e.status,199<(b=d.status)&&400>b||0===d.status){null==e.responseText&&(e.responseText=e.text);d.responseText=e.responseText;if(null!=e.responseXML&&0<(null!=(c=e.responseXML.childNodes)?c.length:void 0))d.response=d.responseXML=e.responseXML,d.responseType="document";else try{d.response=
JSON.parse(e.responseText),d.responseType="json"}catch(h){d.response=e.responseText,d.responseType="text"}d.dispatchEvent(new H("load",d))}else 0!==d.status&&d.dispatchEvent(new H("error",d))};try{"undefined"!==typeof e.onerror&&(e.onerror=function(a){d.dispatchEvent(new H("error",d))})}catch(g){}e.open(a,b)}this.xhr=e};la.prototype.send=function(a){var b,c,e,d=this;if(null!=this.headers)for(b in e=this.headers,e)c=e[b],null!=b&&null!=c&&this.xhr.setRequestHeader(b,c);setTimeout(function(){d.xhr.send(a)},
0)};la.prototype.setRequestHeader=function(a,b){null!=a&&null!=b&&(null==this.headers&&(this.headers={}),this.headers[a]=b)};la.prototype.setRequestHeaders=function(a){return this.headers=a};la.prototype.getResponseHeader=function(a){var b;return null!=(b=this.xhr)?"function"===typeof b.getResponseHeader?b.getResponseHeader(a):void 0:void 0};la.prototype.getAllResponseHeaders=function(){var a;return null!=(a=this.xhr)?"function"===typeof a.getAllResponseHeaders?a.getAllResponseHeaders():void 0:void 0};
la.isCORS=function(a){var b,c;b=document.createElement("a");b.href=a;a=""!==b.hostname?b.hostname:location.hostname;c="0"!==b.port?b.port:location.port;return location.protocol!==(":"!==b.protocol?b.protocol:location.protocol)||location.hostname!==a||location.port!==c&&!(""===location.port&&"80"===c)};var Ib=function(a,b){var c=this;this.delay=a;this.repeatCount=null!=b?b:0;Ib.__super__.constructor.call(this);this._running=!1;this._currentCount=0;this._startTime=this._timeout=null;this._currentTime=
0;this.tick=this.tick.bind(this);this.next=setTimeout.bind(null,this.tick,this.delay);Object.defineProperties(this,{currentCount:{get:function(){return c._currentCount},enumerable:!0,configurable:!1},running:{get:function(){return c._running},enumerable:!0,configurable:!1},time:{get:function(){return c._currentTime+(Date.now()-c._startTime)},enumerable:!0,configurable:!1}})};g(Ib,ya);Ib.prototype.reset=function(){this.stop();this._currentTime=this._currentCount=0;this._startTime=null};Ib.prototype.start=
function(){var a;!0!==this._running&&(a=this.delay-(this._currentTime-this.delay*this._currentCount),this._running=!0,this._timeout=setTimeout(this.tick,a))};Ib.prototype.stop=function(){!1!==this._running&&(clearTimeout(this._timeout),this._currentTime+=Date.now()-this._startTime,this._timeout=null,this._running=!1)};Ib.prototype.tick=function(){var a;clearTimeout(this._timeout);a=0!==this.repeatCount&&this._currentCount>=this.repeatCount;this._currentCount++;this._currentTime+=this.delay;this._startTime=
Date.now();!1===a&&(this._timeout=this.next());this.dispatchEvent(new H("timer",this));!0===a&&(this.stop(),this.dispatchEvent(new H("complete",this)))};var f=function(){};f.blankImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAMAAAAoyzS7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NjI2QkJDQTBCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NjI2QkJDQTFCMzQ4MTFFMUFERDJBRkRGQUQwNTcxRTIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowODg4NjdFQkIzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowODg4NjdFQ0IzNDgxMUUxQUREMkFGREZBRDA1NzFFMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pu0++ecAAAAGUExURf///wAAAFXC034AAAABdFJOUwBA5thmAAAADElEQVR42mJgAAgwAAACAAFPbVnhAAAAAElFTkSuQmCC";
f.mimeTypes={mp4:"video/mp4",flv:"video/x-flv",f4m:"video/f4m",smil:"application/smil",smilxml:"application/smil+xml",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",swf:"application/x-shockwave-flash",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"};
f.flashTypes=[f.mimeTypes.mp4,f.mimeTypes.flv,f.mimeTypes.f4m,f.mimeTypes.smil,f.mimeTypes.smilxml];f.rules={flashTablets:{label:"Android 2 \x26 3 or Kindle Fire 1",regexp:"Android [23]|Silk/1"},html5Phones:{label:"iPhone",regexp:"iPhone"},html5Tablets:{label:"HTML5 Tablets",regexp:"iPad|Android [4-9]|Silk/2"},desktop:{label:"Desktop",regexp:"^((?!iPad|iPhone|Android|BlackBerry|PlayBook|Silk).)*$"}};f.getPlaybackMode=function(a){var b,c,e;null==a&&(a=(null!=(c=La["amp-mode"])?c.toLowerCase():void 0)||
Aa.HTML_AUTO);c=!1;for(b in Aa)if(e=Aa[b],e===a){c=!0;break}c||(a=Aa.AUTO);a===Aa.HTML_AUTO&&(a=this.isHTMLFirst()?Aa.HTML:Aa.AUTO);if(a!==Aa.AUTO)return a!==Aa.FLASH||this.hasFlash()&&"undefined"!==typeof m||(a=this.supportsHTML5Video()?Aa.HTML:Aa.NONE),a;this.hasFlash()||(a=this.supportsHTML5Video()?Aa.HTML:Aa.NONE);a===Aa.AUTO&&(a=this.isHTML5()?Aa.HTML:Aa.FLASH);return a};f.getIEVersion=function(){var a,b,c;b=-1;c=navigator.userAgent;"Microsoft Internet Explorer"===navigator.appName?a=/MSIE ([0-9]{1,}[.0-9]{0,})/:
"Netscape"===navigator.appName?a=/Trident\/.*rv:([0-9]{1,}[.0-9]{0,})/:/Edge\/[0-9\.]+$/.test(c)&&(a=/Edge\/([0-9\.]+)/);null!=(null!=a?a.exec(c):void 0)&&(b=parseFloat(RegExp.$1));return b};f.getFFVersion=function(){var a;a=-1;/Firefox\/([0-9\.]+)$/.exec(navigator.userAgent)&&(a=parseFloat(RegExp.$1));return a};f.getSafariVersion=function(){var a,b;a=-1;b=navigator.userAgent;/Safari\/[0-9\.]+$/.test(b)&&null!=/Version\/([0-9])/.exec(b)&&(a=parseFloat(RegExp.$1));return a};f.isChrome=function(){return/Chrom(e|ium)/.test(navigator.userAgent)};
f.getChromeVersion=function(){var a,b;a=-1;b=navigator.userAgent;/Chrome( Mobile)?\/([0-9\.]+)/.test(b)&&(a=parseFloat(b.match(/Chrome( Mobile)?\/([0-9\.]+)/)[2].split(".").slice(0,2).join(".")));return a};f.isHTMLFirst=function(){return null!=window.MediaSource};f.mergeRules=function(a){var b,c,e;e=[];for(b in a)c=a[b],e.push(f.rules[b]=c);return e};f.checkRules=function(a){var b,c,e;if(null!=a&&0<a.length)for(c=0,e=a.length;c<e;c++)if(b=a[c],b=f.rules[b])if(b=RegExp(b.regexp),b.test(navigator.userAgent))return!0;
return!1};f.selectSource=function(a,b){var c,e,d;e=0;for(d=a.length;e<d;e++)if(c=a[e],f.checkRules(c.rules))return c;e=0;for(d=a.length;e<d;e++)if(c=a[e],""!==b(c.type||f.getMimeType(c.src)))return c;return null};f.getSourceByType=function(a,b){var c,e,d,g;e=null!=a.source?a.source.slice():[];null==a.type&&(a.type=f.getMimeType(a.src));e.unshift(a);d=0;for(g=e.length;d<g;d++)if(c=e[d],c.type===b)return c;return null};f.getMimeType=function(a){return this.mimeTypes[f.getFileExtension(a)]};f.selectTrack=
function(a,b){var c,e,d,f;d=0;for(f=a.length;d<f;d++)if(c=a[d],c.kind===b){e=c;break}return e};f.isIPhone=function(){return/iPhone/.test(navigator.platform)||/iPhone/.test(navigator.userAgent)};f.isIPad=function(){return/iPad/.test(navigator.platform)||/iPad/.test(navigator.userAgent)};f.isAndroid=function(){return/Android [4-9]/.test(navigator.userAgent)};f.isKindleFireHD=function(){return/Silk\/2/.test(navigator.userAgent)};f.isKindleFire=function(){return/Silk\/1/.test(navigator.userAgent)};f.isBlackBerry=
function(){return/BlackBerry;|PlayBook|BB10/.test(navigator.userAgent)};f.isFirefoxOS=function(){return/\(Mobile;.*Firefox\//.test(navigator.userAgent)};f.supportsHTML5Video=function(){return null!=document.createElement("video").canPlayType};f.isHTML5=function(){return this.isIOS()||this.isAndroid()||this.isKindleFireHD()||this.isBlackBerry()||this.isFirefoxOS()};f.isIOS=function(){var a;a=/iP(hone|od|ad)/i;return a.test(navigator.platform)||a.test(navigator.userAgent)};f.getIOSversion=function(){var a;
if(this.isIOS())return a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]};f.hasFlash=function(){var a;try{a=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(b){a="undefined"!==typeof navigator.mimeTypes["application/x-shockwave-flash"]}return a};f.isFullscreenDevice=function(){return this.isKindleFireHD()||this.isIPhone()};f.getDevice=function(){var a;a="desktop";this.isIPhone()?a="iphone":this.isIPad()?a="ipad":/Android/.test(navigator.userAgent)?
a="android":this.isKindleFireHD()?a="kindlefirehd":this.isKindleFire()&&(a="kindlefire");return a};f.xmlToJson=function(a){var b,c,e,d,f;e={};9===a.nodeType&&(a=a.firstChild);if(1===a.nodeType){if(0<a.attributes.length)for(e["@attributes"]={},c=a.attributes,b=d=0,f=c.length;d<f;b=++d)b=c[b],e["@attributes"][b.nodeName]=b.nodeValue}else if(3===a.nodeType||4===a.nodeType)e=a.nodeValue;if(a.hasChildNodes())for(f=a.childNodes,b=a=0,d=f.length;a<d;b=++a)if(c=f[b],3!==c.nodeType||/\S/.test(c.nodeValue))b=
c.nodeName.replace(/:/,"-"),c=this.xmlToJson(c),null==c["@attributes"]&&null!=c["#text"]&&(c=c["#text"]),null==e[b]?e[b]=c:(e[b]instanceof Array||(e[b]=[e[b]]),e[b].push(c));return e};f.getXHR=function(){return new la};f.get=function(a,b,c){var e;null==b&&(b={});null==c&&(c=null);e=f.getXHR();null!=b&&(null!=b.withCredentials&&(e.withCredentials=b.withCredentials),null!=b.onload&&(e.onload=b.onload),null!=b.onerror&&(e.onerror=b.onerror));e.open("GET",a);null!=c&&e.setRequestHeaders(c);e.send();return e};
f.getUTC=function(){return this.request("//time.akamai.com").then(function(a){return 1E3*parseInt(a.responseText)})};f.send=function(a,b,c,e){var d;null==c&&(c={});null==e&&(e={"Content-Type":"String"});d=f.getXHR();null!=c.onload&&(d.onload=c.onload);null!=c.onerror&&(d.onerror=c.onerror);d.open("POST",a);null!=e&&d.setRequestHeaders(e);d.send(b);return d};f.request=function(a){null==a&&(a={});return new Promise(function(b,c){var e,d,f,h;"string"===typeof a&&(a={url:a});null==a.method&&(a.method=
"GET");f=new XMLHttpRequest;f.withCredentials=a.withCredentials;f.onload=function(){return b(f)};f.onerror=function(a){return c(a)};f.open(a.method,a.url);if(null!=a.responseType)try{f.responseType=a.responseType}catch(g){}if(null!=a.headers)for(e in h=a.headers,h)d=h[e],null!=e&&null!=d&&f.setRequestHeader(e,d);return f.send(a.data||a.body)})};f.requestJson=function(a){null==a&&(a={});return this.request(a).then(function(a){return JSON.parse(a.responseText)})};f.loadScript=function(a,b){return new Promise(function(c,
e){var d,f;d=b||document.getElementsByTagName("head")[0];f=document.createElement("script");f.type="text/javascript";f.addEventListener?(f.onload=function(){c(f)},f.onerror=e):f.readyState&&(f.onreadystatechange=function(a){if("loaded"===this.readyState||"complete"===this.readyState)this.onreadystatechange=null,c()});f.src=a;d.appendChild(f)})};f.loadStyleSheet=function(a){var b,c;b=document.getElementsByTagName("head")[0];c=document.createElement("link");c.rel="stylesheet";c.type="text/css";c.href=
a;return b.appendChild(c)};f.read=function(a,b,c,e){var d,g;null==b&&(b={});null==c&&(c="");null==e&&(e=[]);try{return g=this.get(a,b,e),d=g.responseText||g.text,c===f.mimeTypes.json?JSON.parse(d):c===f.mimeTypes.xml&&null!=g.responseXML?g.responseXML:d}catch(h){return"undefined"!==typeof console&&null!==console&&"function"===typeof console.error&&console.error("Read Error: ",h),null}};f.getFileExtension=function(a){null==a&&(a="");return a.replace(/\?.*/,"").split(".").pop()};f.getResponseHeader=
function(a,b,c){var e;null==c&&(c={});e=f.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();return e.getResponseHeader(b)};f.getResponseHeaders=function(a,b,c){var e,d,g;null==c&&(c={});e=f.getXHR();null!=c.onerror&&(e.onerror=c.onerror);e.open("HEAD",a,!1);e.send();c={};if(null==b)return e.getAllResponseHeaders();d=0;for(g=b.length;d<g;d++)a=b[d],c[a]=e.getResponseHeader(a);return c};f.isTouch=null;f.isTouchDevice=function(){if(null==this.isTouch)try{document.createEvent("TouchEvent"),
this.isTouch=!0}catch(a){this.isTouch=!1}return this.isTouch};f.clamp=function(a,b,c){a<b&&(a=b);a>c&&(a=c);return a};f.beacon=function(a,b){var c;null==b&&(b="beaconId");c=document.getElementById(b);null==c&&(c=document.createElement("img"),c.setAttribute("id",b),c.setAttribute("height",0),c.setAttribute("width",0),document.body.appendChild(c),c.style.display="none");c.setAttribute("src",a);return c};f.getElementOffset=function(a,b){var c,e,d,f,h,g;null==b&&(b=document.fullscreenElement||document.webkitFullscreenElement||
document.mozFullScreenElement||document.msFullscreenElement);h=e=0;g=a.offsetWidth;for(c=a.offsetHeight;a&&a!==b;)"BODY"===a.tagName?(d=a.scrollLeft||document.documentElement.scrollLeft,f=a.scrollTop||document.documentElement.scrollTop,e+=a.offsetLeft-d+a.clientLeft,h+=a.offsetTop-f+a.clientTop):(e+=a.offsetLeft-a.scrollLeft+a.clientLeft,h+=a.offsetTop-a.scrollTop+a.clientTop),a=a.offsetParent;return{left:e,top:h,width:g,height:c}};f.override=function(a,b,c){var e;null==c&&(c=!0);if(null==a)return b;
if(null==b)return a;!0===c&&(a=f.clone(a),b=f.clone(b));for(e in b)c=b[e],"object"===typeof c&&null!==c?(null==a[e]&&(a[e]=c instanceof Array?[]:{}),a[e]=f.override(a[e],c,!1)):a[e]=c;return a};f.clone=function(a,b){var c,e,d,f,h,g,t;null==b&&(b=!0);if(null==a)return a;if("object"!==typeof a)c=a;else for(f in c=a instanceof Array?[]:{},a)if(h=a[f],"object"===typeof h&&null!==h&&!0===b)if(h instanceof Array)for(c[f]=[],g=0,t=h.length;g<t;g++)e=h[g],c[f].push(this.clone(e));else for(d in c[f]={},h)e=
h[d],c[f][d]=this.clone(e);else c[f]=h;return c};f.formatTimecode=function(a,b){var c;a=parseInt(a);if(isNaN(a))return"00:00";c=f.formatZeroFill(a%60);a=parseInt(a/60);c=f.formatZeroFill(a%60)+":"+c;a=parseInt(a/60);0<a&&(c=f.formatZeroFill(a)+":"+c);3600<=b&&5===c.length&&(c="00:"+c);return c};f.formatZeroFill=function(a){var b;b=a.toString();10>a&&(b="0"+b);return b};f.flattenTimecode=function(a,b){var c,e,d;null==b&&(b=30);if(null==a||""===a)return NaN;d=a.split(":");c=0;4===d.length?c=parseInt(d.pop())/
b:3===d.length&&(d[2]=d[2].replace(",","."),-1!==d[2].indexOf(".")&&(e=d[2].split(".")),1<(null!=e?e.length:void 0)&&(d[2]=e[0],c=parseInt(e[1])/1E3));for(e=parseInt(d.pop());0<d.length;)e+=Math.pow(60,d.length)*parseInt(d.shift());return e+c};f.cacheBust=function(a,b,c){var e;null==b&&(b="cacheBust");null==c&&(c=Date.now());e=-1===a.indexOf("?")?"?":"\x26";return a+e+b+"\x3d"+c};f.formatStyleName=function(a){return a.replace(/([A-Z])/,"-$1").toLowerCase()};f.trim=function(a){return a.replace(/^\s*(.*)/,
"$1").replace(/(.*)\s*$/,"$1")};f.getFeed=function(a){return this.request(a).then(function(a){return"document"===a.responseType||null!=a.responseXML?f.xmlToJson(a.responseXML):JSON.parse(a.response)})};f.getSource=function(a,b,c){var e;e=f.getPlaybackMode();f.getFeed(a).then(function(a){var c,d;a=(new Fb).createFeed(a);0<(null!=a?null!=(d=a.item)?d.length:void 0:void 0)&&(c=function(a){return"flash"===e&&-1!==f.flashTypes.indexOf(a)||"html"===e&&-1===f.flashTypes.indexOf(a)?"maybe":""},c=f.selectSource(a.item[0].source,
c));"function"===typeof b&&b(c)})["catch"](c)};f.trackMouse=function(){try{null!=document.addEventListener?document.addEventListener("mousemove",this.mouseTracker):null!=document.attachEvent&&document.attachEvent("mousemove",this.mouseTracker)}catch(a){}};f.clientX=0;f.clientY=0;f.pageX=0;f.pageY=0;f.mouseTracker=function(a){f.clientX=a.clientX;f.clientY=a.clientY;f.pageX=a.pageX;f.pageY=a.pageY};f.isMouseOverElement=function(a){var b;b=!1;if(null==a)return b;try{b=a.contains(document.elementFromPoint(f.clientX,
f.clientY))}catch(c){b=!1}return b};f.trackMouse();f.getActualSize=function(a,b){var c,e,d;null==b&&(b=!0);d=a.offsetWidth;c=a.offsetHeight;!0===b&&(e=getComputedStyle(a),d+=parseInt(e.marginLeft)+parseInt(e.marginRight),c+=parseInt(e.marginTop)+parseInt(e.marginBottom));return{width:d,height:c}};f.isVolumeSettable=function(){var a,b;b=navigator.userAgent.toLowerCase();a=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(b);return null==a||"android"===a[0]&&/Firefox/.test(b)?
!0:!1};f.createFlashObject=function(a,b){var c,e,d,g,h,l;if(null!=a){h={allowFullScreen:!0,allowScriptAccess:"always",wmode:"direct",bgColor:"#000000"};f.override(h,a.params,!1);if(null!=a.vars){d=[];l=a.vars;for(g in l)e=l[g],d.push(""+g+"\x3d"+e);h.flashvars=d.join("\x26")}e=(null!=(c=a.attributes)?c.id:void 0)||this.createUID();c={id:e,name:e,width:"100%",height:"100%",type:"application/x-shockwave-flash"};f.override(c,a.attributes,!1);-1!==this.getIEVersion()&&"direct"===h.wmode&&(h.wmode="transparent");
d="\x3cobject ";for(g in c)e=c[g],d+=""+g+'\x3d"'+e+'" ';d+="\x3e\n";for(g in h)e=h[g],d+='\x3cparam name\x3d"'+g+'" value\x3d"'+e+'" /\x3e\n';b.innerHTML=d+"\x3c/object\x3e"}};f.createUID=function(a){var b,c;null==a&&(a=16);b=Date.now();c=2*a-1;return(Math.round(Math.random()*c+a).toString(16)+b.toString(16)).toUpperCase()};f.chain=function(a,b){var c,e,d,f;c=Promise.resolve(b);d=0;for(f=a.length;d<f;d++)e=a[d],c=c.then(e);return c};f.arrayBufferToString=function(a){return String.fromCharCode.apply(null,
new Uint8Array(a))};f.parseJWT=function(a){a=a.split(".");return{header:JSON.parse(atob(a[0])),payload:JSON.parse(atob(a[1])),signature:a[2]}};f.getFullScreenApi=function(a,b){var c;c={};null!=a.webkitRequestFullScreen?(c.enter=a.webkitRequestFullScreen.bind(a),c.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),c.event="onwebkitfullscreenchange",c.element="webkitFullscreenElement",c.error="webkitfullscreenerror"):
null!=a.requestFullscreen?(c.enter=a.requestFullscreen.bind(a),c.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),c.event="onfullscreenchange",c.element="fullscreenElement",c.error="fullscreenerror"):null!=a.mozRequestFullScreen?(c.enter=a.mozRequestFullScreen.bind(a),c.exit=document.mozCancelFullScreen.bind(document),c.event="onmozfullscreenchange",c.element="mozFullscreenElement",c.error="mozfullscreenerror"):null!=a.msRequestFullscreen?
(c.enter=a.msRequestFullscreen.bind(a),c.exit=document.msExitFullscreen.bind(document),c.event="MSFullscreenChange",c.element="msFullscreenElement",c.error="MSFullscreenError"):null!=b.webkitEnterFullscreen&&(c.enter=b.webkitEnterFullscreen.bind(b),c.exit=b.webkitExitFullscreen.bind(b),c.event=null,c.error=null);return c};f.stringToArray=function(a){var b,c,e,d;b=new ArrayBuffer(2*a.length);b=new Uint16Array(b);c=e=0;for(d=a.length-1;0<=d?e<=d:e>=d;c=0<=d?++e:--e)b[c]=a.charCodeAt(c);return b};f.arrayToString=
function(a){return String.fromCharCode.apply(null,new Uint16Array(a.buffer))};f.base64DecodeUint8Array=function(a){var b,c,e,d;c=window.atob(a);e=c.length;a=new Uint8Array(new ArrayBuffer(e));b=d=0;for(e-=1;0<=e?d<=e:d>=e;b=0<=e?++d:--d)a[b]=c.charCodeAt(b);return a};f.base64EncodeUint8Array=function(a){for(var b="",c,e,d,f,h,g,t=0;t<a.length;)c=a[t++],e=t<a.length?a[t++]:Number.NaN,d=t<a.length?a[t++]:Number.NaN,f=c>>2,c=(c&3)<<4|e>>4,h=(e&15)<<2|d>>6,g=d&63,isNaN(e)?h=g=64:isNaN(d)&&(g=64),b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(f)+
"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\x3d".charAt(g);return b};f.getKeySystem=function(){var a;a=navigator.userAgent;return/Edge/.test(a)||/Trident/.test(a)?"com.microsoft.playready":/Chrome/.test(a)||/Firefox/.test(a)?"com.widevine.alpha":"com.apple.fps.1_0"};f.isAutoplaySupported=function(){var a;a=!0;this.isIOS()&&
(-1!==this.getSafariVersion()?a=10<=this.getIOSversion()[0]:this.isChrome()&&(a=53<=this.getChromeVersion()));this.isChrome()&&this.isAndroid()&&(a=53<=this.getChromeVersion());return a};var da=function(){da.__super__.constructor.call(this,this,!1)};g(da,ya);da.UNINITIALIZED=0;da.LOADING=1;da.LOADED=2;da.parseModule=function(a){var b,c,e,d;c={};a=a.childNodes;e=0;for(d=a.length;e<d;e++)b=a[e],1===(null!=b?b.nodeType:void 0)&&(c[b.nodeName]=this.parseItem(b));return c};da.parseItem=function(a){var b,
c,e,d;b=(""+a.getAttribute("type")).toLowerCase();c=a.textContent||a.text||a.innerText;if("object"!==b&&"array"!==b&&/#\{.*\}/.test(c))return c;switch(b){case "object":c=this.parseModule(a);break;case "array":c=[];b=a.childNodes;e=0;for(d=b.length;e<d;e++)a=b[e],1===a.nodeType&&c.push(this.parseItem(a));break;case "boolean":c="true"===c.toLowerCase();break;case "number":c=parseFloat(c)}return c};da.prototype.url=null;da.prototype.data=null;da.prototype.xml=null;da.prototype.readyState=da.UNINITIALIZED;
da.prototype.loaded=!1;da.prototype.flash={PlaybackMetricsPlugin:{src:"#{paths.resources}plugins/PlaybackMetricsPlugin.swf",blocking:!1,host:"akamai",main:"PlaybackMetricsPlugin"},SubclipMonitorPlugin:{src:"#{paths.resources}plugins/SubclipMonitorPlugin.swf",blocking:!1,host:"akamai",main:"SubclipMonitorPlugin"},NetSessionClientPlugin:{src:"#{paths.resources}plugins/NetSessionClientPlugin.swf",blocking:!1,host:"akamai",main:"NetSessionClientPlugin"}};da.prototype.loadURL=function(a,b){var c=this;
null==b&&(b=!1);this.url=a;this.setReadyState(da.LOADING);f.get(a,{withCredentials:b,onload:function(a){a=a.detail;"document"===a.responseType?(c.xml=a.responseXML,a=7!==c.xml.firstChild.nodeType?c.xml.firstChild:c.xml.childNodes[1],a=da.parseModule(a)):(a=a.response,"string"===typeof a&&(a=JSON.parse(a)));c.loadData(a)},onerror:function(a){c.dispatchEvent(new H("error",a));Q.error(a)}})};da.prototype.loadData=function(a){hb.defaults=a;this.setReadyState(da.LOADED)};da.prototype.load=function(a,b){null==
b&&(b=!1);switch(typeof a){case "object":this.loadData(a);break;case "string":this.loadURL(a,b);break;default:throw Error("[AMP ERROR] Invalid default configuration resource");}};da.prototype.setReadyState=function(a){this.readyState=a;this.dispatchEvent(new H("readystatechange",a));a!==da.LOADED||this.loaded||(this.loaded=!0,this.dispatchEvent(new H("load",this.data)))};var mb=function(a,b,c){this.startTime=a;this.endTime=b;this.id=c};mb.prototype.id=null;mb.prototype.startTime=null;mb.prototype.endTime=
null;mb.prototype.text=null;mb.prototype.html=null;mb.prototype.align=null;var Hd=function(){};Hd.prototype.parse=function(a,b){var c,e,d,g,h,l,t,m,n;b=b.replace(/\r/g,"");e=b.split("\n\n");m=0;for(n=e.length;m<n;m++){c=e[m];c=c.split("\n");try{g=c[0],t=c[1].match(/([0-9:\,]+)\s*--\x3e\s*([0-9:\,]+)/).slice(1),h=f.flattenTimecode(t[0]),d=f.flattenTimecode(t[1]),l=c.slice(2)}catch(p){Q.instance.warn("SRT Parsing Warning")}c=new mb(h,d,"cue_"+g);c.html="\x3cp\x3e"+l.join("\x3cbr /\x3e")+"\x3c/p\x3e";
c.text=l.join("\n");a.cues.push(c)}return a};var Id=function(){};Id.prototype.parse=function(a,b){var c,e,d,g,h,l,t,m,n,p,q;b=b.replace(/\r/g,"");e=b.split("\n\n");h=0;/^WEBVTT/.test(e[0])&&e.shift();p=0;for(q=e.length;p<q;p++)if(c=e[p],""!==c){c=c.split("\n");try{h=/^[0-9]+$/.test(c[0])?c.shift():++h,n=c[0].match(/([0-9:\.]+)\s*--\x3e\s*([0-9:\.]+)([^\n]*)/).slice(1),l=n[2],t=f.flattenTimecode(n[0]),g=f.flattenTimecode(n[1]),m=c.slice(1)}catch(r){Q.error("WebVTT Parse Error")}d=new mb(t,g,"cue_"+
h);d.html="\x3cp\x3e"+m.join("\x3cbr /\x3e")+"\x3c/p\x3e";d.text=m.join("\n");null!=l&&l.replace(/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g,function(a,b,c){d[b]=c;return""});a.cues.push(d)}return a};var Fd=function(){};Fd.prototype.parse=function(a,b){var c,e;"string"===typeof b&&(b=Ma.parse(b));Array.prototype.slice.call(b.querySelectorAll("styling style")).forEach(function(b,c,e){var d;d="";c=b.getAttribute("id")||b.getAttribute("xml:id");Array.prototype.slice.call(b.attributes).forEach(function(a,b,c){if("tts"===
a.prefix)return d+=f.formatStyleName(a.localName)+":"+a.nodeValue+";"});a.styles[c]=d});Array.prototype.slice.call(b.querySelectorAll("body [style]")).forEach(function(b,c,e){c=b.getAttribute("style");b.setAttribute("style",a.styles[c])});e=b.querySelector("tt");e=e.getAttribute("lang")||e.getAttribute("xml:lang");if(void 0===a.language||null===a.language)a.language=e;c=Array.prototype.slice.call(b.querySelectorAll("body p[begin]"));c.forEach(function(b,e,d){var g;d=b.getAttribute("begin");b.removeAttribute("begin");
null!=b.getAttribute("end")?(g=b.getAttribute("end"),b.removeAttribute("end")):null!=c[e+1]&&(g=c[e+1].getAttribute("begin"));e=new mb(f.flattenTimecode(d),f.flattenTimecode(g),"cue_"+e);g=b.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign");null!=g&&(e.align="center"===g?"middle":g,b.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"));b=Ma.serialize(b);b=b.replace(/\s*xmlns="[^"]*"/,"");e.html=b;b=b.replace(/^<p[^>]*>/,"");b=b.replace(/<\/p>$/,"");b=b.replace(/<br\/>/,
"\n");b=b.replace(/<span style="([^"]*)"/,"\x3cc.$1");b=b.replace(/<\/span>/,"\x3c/c\x3e");e.text=b;a.cues.push(e)});return a};var xa=function(){var a,b=this;this.captions=[];this.head=document.getElementsByTagName("head")[0];a=window.com||{};a.akamai=a.akamai||{};a.akamai.amp=a.akamai.amp||{};a.akamai.amp.plugins=a.akamai.amp.plugins||{};a.akamai.amp.plugins.subply=a.akamai.amp.plugins.subply||{};a.akamai.amp.plugins.subply.response=function(a){b.parse(a);b.poll()};null==window.com&&(window.com=
a);xa.__super__.constructor.call(this,this.constructor.NAME)};g(xa,puremvc.Proxy);xa.NAME="LiveCaptionProxy";xa.prototype.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1E3};xa.prototype.caption=null;xa.prototype.head=null;xa.prototype.script=null;xa.prototype.timeout=null;xa.prototype.getURL=function(){return this.data.url};xa.prototype.setURL=function(a){return this.data.url=a};xa.prototype.start=function(){this.send()};xa.prototype.poll=function(){var a=this;setTimeout(function(){a.send()},
this.data.interval||1E3)};xa.prototype.send=function(){var a=this;null!=this.script&&this.head.removeChild(this.script);this.script=f.loadScript(this.data.base+this.data.url+".js?nocache\x3d"+Date.now()).then(function(b){return a.script=b})["catch"](function(b){return a.facade.logger.error("[AMP CAPTIONING ERROR]",b)})};xa.prototype.stop=function(){clearTimeout(timeout)};xa.prototype.parse=function(a){var b,c,e,d;if(a.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=a.Ticks)){this.caption=
new mb(f.flattenTimecode(a.From),f.flattenTimecode(a.To),a.Ticks);this.caption.text=a.Text;b="";d=a.Text.split("\n");c=0;for(e=d.length;c<e;c++)a=d[c],""!==b&&(b+="\x3cbr /\x3e"),b+="\x3cspan\x3e"+a+"\x3c/span\x3e";this.caption.html="\x3cp\x3e"+b+"\x3c/p\x3e";this.sendNotification(w.CUE_CHANGE,[this.caption]);return this.caption}};var B=function(){};B.create=function(a,b,c){var e,d;d=Date.now();"string"===typeof a?(e=document.getElementById(a),null==e&&(e=document.querySelector(a))):e=a;if(null==
e)throw Error("[AMP ERROR] Invalid container. Could not find DOM element: "+a);b=b instanceof hb?b:hb.create(b);Q.instance=new Q(b.debug);a=this.getVersion();null==e.dataset&&(e.dataset={});e.dataset["amp.version"]=a;Q.instance.log("[AMP] "+a);a=this.createPlayer(b,e);a.initTime=d;e.amp=a;a.request=this.request.bind(this);a.loadResources=a.loadModuleResources.bind(a);a.onready=c;a.initialize(b);return a};B.createPlayer=function(a,b){var c;c=this.players[a.mode];null!=c&&(c=new c(b));return c};B.getVersion=
function(){return this.VERSION};B.VERSION="AMP v4.82.17";B.defaults=new da;B.plugins=[];B.players={};B.loadDefaults=function(a,b,c,e){null==e&&(e=!1);null!=b&&this.defaults.addEventListener("load",b);null!=c&&this.defaults.addEventListener("error",c);this.defaults.load(a,e)};B.getPlaybackMode=function(){return f.getPlaybackMode()};B.registerPlayer=function(a,b){this.players[a]=b};B.registerPlugin=function(a,b,c){var e,d,f;null==(e=this.plugins)[a]&&(e[a]={});"function"===
typeof b&&(c=[c,b],b=c[0],c=c[1]);"string"===typeof b&&(b=[b]);null==b&&(b=["html","flash"]);d=0;for(f=b.length;d<f;d++)e=b[d],this.plugins[a][e]=c};B.resourceManager=null;B.getResourceManager=function(){null==this.resourceManager&&(this.resourceManager=new sb);return this.resourceManager};B.addResource=function(a){return this.getResourceManager().add(a)};B.addResources=function(a){return this.getResourceManager().addResources(a)};B.request=function(a){return f.request(a)};B.requestJson=function(a){return f.requestJson(a)};
B.getResource=function(a){return this.getResourceManager().item(a)};B.removeResource=function(a){return this.getResourceManager().remove(a)};B.evaluateBindings=function(a,b,c,e){var d,f=this;null==e&&(e=!0);if(null!=a){if("object"===typeof a){e=!0===e?JSON.parse(JSON.stringify(a)):a;if(a instanceof Array)return e.map(function(a){return f.evaluateBindings(a,b,c,!1)});a={};for(d in e)a[d]=this.evaluateBindings(e[d],b,c,!1);return a}return"string"===typeof a?a.replace(/(#|\$){([^#\$]*)}/g,function(e,
d,k){try{return(new Function("params","with (this) { return "+k+" }")).bind(b)(c)}catch(f){return a}}):a}};B.registerPlayer("html",r);B.registerPlayer("flash",m);B.registerPlayer("none",Ed);B.registerPlayer("external",I);var ma=function(){ma.__super__.constructor.call(this)};g(ma,A);ma.prototype.plugin=null;ma.prototype.proxy=null;ma.prototype.initializeNotifier=function(a){ma.__super__.initializeNotifier.call(this,a);this.proxy=this.facade.retrieveProxy(O.NAME);this.plugin=this.facade};var qd=function(){qd.__super__.constructor.call(this)};
g(qd,ma);qd.prototype.execute=function(a){var b;b=a.getBody();a=a.getBody().track;this.proxy.setTracks(a);null==a?this.sendNotification(w.ENABLED,!1):(this.proxy.selectRenderer(b),this.sendNotification(w.ENABLED,!0))};var Wa=function(){Wa.__super__.constructor.call(this)};g(Wa,ma);Wa.prototype.dispatchEvent=function(a,b){var c,e;"string"!==typeof a&&(b=a.getBody(),null==b&&(b={}),a=a.getName());c="function"===typeof(e=this.plugin).getFeatureName?e.getFeatureName():void 0;null!=c&&"auth"!==c&&(a=a.replace(RegExp("^("+
c+")"),""));c=this.plugin.getModuleName();a=a.replace(RegExp("^("+c+")"),"");c=new H(a,b);this.sendNotification(d.DISPATCH_EVENT,c)};Wa.prototype.dispatchEventAfterCommand=function(a,b){setTimeout(this.dispatchEvent.bind(this,a,b),0)};Wa.prototype.execute=function(a){this.dispatchEvent(a)};var Fc=function(){Fc.__super__.constructor.call(this)};g(Fc,Wa);Fc.prototype.execute=function(a){this.proxy.setEnabled(a.getBody());Fc.__super__.execute.call(this,a)};var Gc=function(){Gc.__super__.constructor.call(this)};
g(Gc,Wa);Gc.prototype.execute=function(a){var b;b=!a.getBody();b!==this.proxy.getHidden()&&(this.proxy.setHidden(b),Gc.__super__.execute.call(this,a))};var rd=function(){rd.__super__.constructor.call(this)};g(rd,ma);rd.prototype.execute=function(a){var b,c,e,d,f,h;d=a.getBody();b=this.proxy.getTrack();if(null!=b){a=b.activeCues;e=b.cues;b=!1;f=0;for(h=e.length;f<h;f++)c=e[f],d>=c.startTime&&d<c.endTime?0<=jc.call(a,c)||(a.push(c),b=!0):(c=a.indexOf(c),-1!==c&&(a.splice(c,1),b=!0));!0===b&&this.sendNotification(w.CUE_CHANGE,
a)}};var sd=function(){sd.__super__.constructor.call(this)};g(sd,puremvc.SimpleCommand);sd.prototype.execute=function(a){var b,c;a=this.facade.retrieveProxy(G.NAME);b=a.getTrack();null==b&&0<(null!=(c=a.getTracks())?c.length:void 0)&&(b=a.autoSelectTrack());!0===(null!=b?b.isLive:void 0)&&(this.facade.removeCommand(d.TIME_UPDATE),a=this.facade.retrieveProxy(xa.NAME),null==a&&(a=new xa,this.facade.registerProxy(a)),a.setURL(b.src),a.start())};CaptionParsers={"application/ttml+xml":new Fd,"application/x-subrip":new Hd,
"text/vtt":new Id,undefined:new Fd};var ea=function(a,b){this.player=a;this.config=b;ea.__super__.constructor.call(this);this.dispatcher=new ya(this);this.createDefaults()};g(ea,puremvc.Mediator);ea.NAME="PluginWrapper";ea.prototype.player=null;ea.prototype.config=null;ea.prototype.dispatcher=null;ea.prototype.flashPlugins=null;ea.prototype.createFlashVars=null;ea.prototype.createXML=null;ea.prototype.createDefaults=function(){this.player.createDefaults.call(this)};ea.prototype.addEventListener=function(a,
b){this.dispatcher.addEventListener(a,b)};ea.prototype.logEvent=function(a){};ea.prototype.dispatchEvent=function(a){"timeupdate"!==a.type&&"timeremaining"!==a.type&&this.player.logger.log("[AMP "+this.constructor.NAME.replace("Wrapper","").toUpperCase()+" EVENT] "+a.type,a);a.player=this.player;this.dispatcher.dispatchEvent(a)};ea.prototype.removeEventListener=function(a,b){this.dispatcher.removeEventListener(a,b)};ea.prototype.createElement=function(a,b,c){var e;e=a.createElement("element");e.setAttribute("id",
b);null==c&&(c=this.getControls(a).controls);null!=c&&c.appendChild(e);return e};ea.prototype.createProperty=function(a,b,c,e){var d;d=a.createElement("property");d.setAttribute("key",b);null!=e&&e.appendChild(d);if(null!=c)if("object"!==typeof c||c instanceof Array)a=Ma.createTextContent(a,c.toString()),d.appendChild(a);else for(b in c)e=c[b],this.createProperty(a,b,e,d);return d};ea.prototype.listNotificationInterests=function(){return[x.CREATE_FLASH_VARS,x.CREATE_XML]};ea.prototype.handleNotification=
function(a){var b;b=a.getName();a=a.getBody();switch(b){case x.CREATE_FLASH_VARS:"function"===typeof this.createFlashVars&&this.createFlashVars(a.flashvars);break;case x.CREATE_XML:"function"===typeof this.createXML&&this.createXML(a.xml)}};ea.prototype.destroy=function(){};var nb=function(a,b){var c,e=this;this.kind=a.kind;this.type=a.type;this.src=a.src;this.language=a.srclang;this.label=a.label||this.srclang||this.kind;this.cues=a.cues||[];this.styles=a.styles||{};this.activeCues=[];this.isLive=
/live-subply/.test(this.type);null==this.src||""===this.src||this.isLive?setTimeout(b,1):c=f.get(this.src,{onload:function(){try{CaptionParsers[e.type].parse(e,c.response)}catch(a){Q.error("Could not parse caption track: "+e.src);return}"function"===typeof b&&b()},onerror:function(){Q.error("Could not load caption track: "+e.src)}})};nb.prototype.kind=null;nb.prototype.src=null;nb.prototype.language=null;nb.prototype.cues=null;nb.prototype.label=null;nb.prototype.activeCues=null;nb.prototype.type=
null;nb.prototype.styles=null;nb.prototype.isLive=!1;var pa=function(){pa.__super__.constructor.call(this,null,null,null,null)};g(pa,P);pa.prototype.componentType="overlay";pa.prototype.onRegister=function(){pa.__super__.onRegister.call(this);this.registerOverlay()};pa.prototype.onRemove=function(){pa.__super__.onRemove.call(this);this.removeOverlay()};pa.prototype.registerOverlay=function(){this.sendNotification(d.ADD_OVERLAY,this.viewComponent)};pa.prototype.removeOverlay=function(){this.sendNotification(d.REMOVE_OVERLAY,
this.viewComponent)};var G=function(a){this.activeCaptions=[];this.providers={};this.tracks=[];this.rendererMap=[];this.track={};G.__super__.constructor.call(this,a)};g(G,ga);G.NAME=O.NAME;G.TEXT_TRACK_RENDERER="caption-text";G.prototype.defaults={useNative:!1,crossorigin:null};G.prototype.enabled=!1;G.prototype.hidden=!0;G.prototype.tracks=null;G.prototype.track=null;G.prototype.activeCaptions=null;G.prototype.captions=null;G.prototype.loaded=!0;G.prototype.rendererMap=null;G.prototype.getUseNative=
function(){return this.getValue("useNative")};G.prototype.getCrossOrigin=function(){return this.getValue("crossorigin")};G.prototype.getTracks=function(){return this.tracks};G.prototype.setTracks=function(a){var b,c,e,d,f,h,g=this;this.tracks=[];this.track=null;if(null!=a){b=a.length;e=0;d=function(){e++;e===b&&(g.sendNotification(w.TRACKS_LOADED,g.tracks),g.autoSelectTrack())};f=0;for(h=a.length;f<h;f++)c=a[f],c=new nb(c,d),this.tracks.push(c);return a}};G.prototype.registerRenderer=function(a){null!=
a&&(a.proxy=this,this.rendererMap.push(a))};G.prototype.retrieveRenderer=function(a){var b,c,e,d;d=this.rendererMap;c=0;for(e=d.length;c<e;c++)if(b=d[c],b.getRendererName()===a)return b};G.prototype.removeRenderer=function(a){var b;b=this.retrieveRenderer(a);b.proxy=null;if(null==b)return null;a=this.rendererMap.indexOf(b);this.rendererMap.splice(a,1);return b};G.prototype.getRenderer=function(){return this.renderer};G.prototype.setRenderer=function(a){if(a===this.renderer)return a;null!=this.renderer&&
this.facade.removeMediator(G.TEXT_TRACK_RENDERER);this.renderer=a;null!=this.renderer&&this.facade.registerMediator(this.renderer);return a};G.prototype.selectRenderer=function(a){var b,c,e,d,f,h,g,t;b=null;e=a.track;if(null!=e){d=0;for(h=e.length;d<h;d++){c=e[d];t=this.rendererMap;f=0;for(g=t.length;f<g;f++)if(a=t[f],!0===a.canUseResource(c)){b=a;break}if(null!=b)break}this.setRenderer(b);return b}};G.prototype.getTrack=function(){return this.track};G.prototype.setTrack=function(a){this.track=a;
this.captions=this.track.cues;this.activeCaptions=[];this.sendNotification(w.TRACK_SELECTED,this.track);return a};G.prototype.selectTrackByIndex=function(a){var b;0<=a&&a<this.tracks.length&&(b=this.tracks[a],this.setTrack(b));return b};G.prototype.selectTrackByLanguage=function(a){var b,c,e,d,f;f=this.tracks;e=0;for(d=f.length;e<d;e++)if(b=f[e],b.language===a){c=b;break}null!=c&&this.setTrack(c);return c};G.prototype.getHidden=function(){return this.hidden};G.prototype.setHidden=function(a){return this.hidden=
a};G.prototype.getEnabled=function(){return this.enabled};G.prototype.setEnabled=function(a){return this.enabled=a};G.prototype.autoSelectTrack=function(){var a,b,c;a=null!=(c=this.facade.player.retrieveProxy(T.NAME))?c.getLanguage():void 0;null!=a&&(a=a.split("-").shift(),b=this.selectTrackByLanguage(a));null==b&&(b=this.tracks[0],this.setTrack(b));return b};var ec=function(a,b,c,e){ec.__super__.constructor.call(this,a,b,c,e)};g(ec,P);ec.prototype.initializeNotifier=function(a){ec.__super__.initializeNotifier.call(this,
a);this.plugin=this.facade.retrieveProxy(O.NAME);this.media=this.facade.player.retrieveProxy(q.NAME)};var X=function(a){X.__super__.constructor.call(this,a)};g(X,Qb);X.prototype.video=null;X.prototype.index=-1;X.prototype.plugin=null;X.prototype.parallelement=null;X.prototype.paralleltimer=null;X.prototype.paddingvalue=6;X.prototype.cueChangeListener=null;X.prototype.lineheight=34;X.prototype.playerDefaultHeight=648;X.NAME=G.TEXT_TRACK_RENDERER;X.prototype.getRendererName=function(){return"native"};
X.prototype.canUseResource=function(a){var b,c;if(null==a||null==document.createElement("video").textTracks)return!1;c=[f.mimeTypes.vtt,f.mimeTypes.cea608,f.mimeTypes.cea708];b=a.type;return b===c[1]||b===c[2]?!0:/iphone|ipad/.test(f.getDevice())||this.proxy.getUseNative()?-1!==c.indexOf(a.type):!1};X.prototype.onRegister=function(){this.plugin=this.facade.retrieveProxy(G.NAME);this.cueChangeListener=this.cueChange.bind(this);0>f.getSafariVersion()&&this.facade.player.getMediaElement().textTracks.addEventListener("addtrack",
this.updateTrack.bind(this));this.facade.player.getMediaElement().textTracks.addEventListener("cuechange",this.cueChangeListener);null==this.plugin||null==this.plugin.config||this.plugin.config.hasOwnProperty("useparallelrendering")||(this.plugin.config.useparallelrendering=!1)};X.prototype.listNotificationInterests=function(){return[w.VISIBILITY_CHANGE,w.TRACK_SELECTED,w.TRACKS_LOADED,d.LOADED_METADATA,d.CAN_PLAY_THROUGH,fa.BREAK_START]};X.prototype.handleNotification=function(a){var b,c,e,k,g;b=
a.getBody();switch(a.getName()){case w.TRACKS_LOADED:this.tracks=b;break;case w.TRACK_SELECTED:this.facade.player.getMediaElement().textTracks.length&&(c=this.facade.player.getMediaElement().textTracks[this.index]);null!=c&&(c.mode="hidden");this.index=this.plugin.getTracks().indexOf(b);this.lang=b.language;this.updateTrack();break;case w.VISIBILITY_CHANGE:case d.CAN_PLAY_THROUGH:this.updateTrack();break;case fa.BREAK_START:this.clearCaption();break;case d.LOADED_METADATA:if(null==this.tracks)break;
a=this.facade.player.getMediaElement();c=this.plugin.getCrossOrigin();null!=c&&a.setAttribute("crossorigin",c);g=this.tracks;e=0;for(k=g.length;e<k;e++)c=g[e],c.type===f.mimeTypes.vtt&&(b=document.createElement("track"),b.src=c.src,null!=c.kind&&(b.kind=c.kind),null!=c.language&&(b.srclang=c.language),null!=c.label&&(b.label=c.label),b["default"]="default"in c,a.appendChild(b));this.tracks=null}};X.prototype.updateTrack=function(a){var b,c,e,d,f,h,g,t;b=this.plugin.config;h=this.facade.player.getMediaElement().textTracks;
c=d=0;for(f=h.length;d<f;c=++d)if(e=h[c],/subtitles|captions/.test(e.kind)&&(e.language===this.lang||!e.language.length)){if(null==e)return;this.index=c;1<this.getTracksByKind(e.kind).length&&(this.suppressDupeTracks(e.kind,[1]),1===c&&(e.mode=this.plugin.getHidden()?"hidden":"showing"));"subtitles"===e.kind?e.mode="hidden":!1===b.useparallelrendering&&(e.mode=this.plugin.getHidden()?"hidden":"showing")}a&&"metadata"===(null!=(g=a.track)?g.kind:void 0)||(this.plugin.getHidden()?null!=this.plugin&&
this.plugin.config.useparallelrendering?null!=this.parallelement&&(this.parallelement.style.display="none"):this.clearCaption():null!=this.plugin&&this.plugin.config.useparallelrendering&&null!=this.parallelement&&(this.parallelement.style.display="inline"),null!=(t=this.plugin)&&t.config.useparallelrendering&&(this.parallelement||this.createParallelement(),a?this.useParallelRendering(this.plugin.config.useparallelrendering,a.track):this.useParallelRendering(this.plugin.config.useparallelrendering)))};
X.prototype.createParallelement=function(){if(!this.parallelement)return this.parallelement=document.createElement("div"),this.parallelement.className="akamai-caption-container",this.viewComponent.appendChild(this.parallelement),this.parallelement};X.prototype.useParallelRendering=function(a,b){var c,e;null!=(c=this.plugin)&&(c.config.useparallelrendering=a);!b&&null!=(e=this.facade.player.getMediaElement().textTracks)&&e.length&&(b=this.facade.player.getMediaElement().textTracks[this.index]);if(b)if(!0===
a){if(!1===b.hasCueChangeListener||"undefined"===typeof b.hasCueChangeListener)return b.hasCueChangeListener=!0,b.addEventListener("cuechange",this.cueChangeListener)}else return b.hasCueChangeListener=!1,b.removeEventListener("cuechange",this.cueChangeListener)};X.prototype.cueChange=function(a){var b,c,e,d,f,h,g,t,l;c=this.proxy.track?this.proxy.track.kind===a.target.kind:!0;if(!this.plugin.getHidden()&&c){h=0;this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null);this.parallelement&&
(this.parallelement.innerHTML="");c=[];for(f=0;f<a.target.activeCues.length;){if(/^{".*}$/.test(a.target.activeCues[f].text))return;this.parallelement.style.display="inline";c[f]=document.createElement("div");c[f].className="akamai-caption-text";this.viewComponent.getElementsByClassName("akamai-caption-container")[0].appendChild(c[f]);b=document.createElement("p");c[f].appendChild(b);if(e=window.getComputedStyle(b).lineHeight.replace("px",""))this.lineheight=e;g=-1!==navigator.userAgent.indexOf("Firefox")?
a.target.activeCues[f].position-50+"%":a.target.activeCues[f].position+"%";e=this.facade.player.getMediaElement().getBoundingClientRect().height;d=100*(e/this.playerDefaultHeight);t=a.target.activeCues[f].snapToLines;t=null===t||!0!==a.target.activeCues[f].snapToLines&&"undefined"!==typeof t?10*(e/100)*a.target.activeCues[f].line:a.target.activeCues[f].line*(this.lineheight/100)*d;0<f&&t&&(d=this.viewComponent.getElementsByClassName("akamai-caption-container")[0].childNodes[0].offsetHeight-this.lineheight/
100*d,t+=d*f);t+="px";c[f].style.left=g;c[f].style.top=t;c[f].style.textAlign="left";c[f].style.position="absolute";c[f].style.bottom="auto";c[f].style.display="inline";c[f].style.padding=this.paddingvalue+"px";c[f].style.width="auto";c[f].style["min-height"]="0px";b.innerHTML=a.target.activeCues[f].text;b.style.margin="0px";b.style.display="block";b.style.lineHeight="normal";b=null;try{l=document.createElement("span"),l.style.fontSize=JSON.parse(localStorage.getItem("akamai-captioningDefault")).size,
c[f].appendChild(l),b=window.getComputedStyle(l).fontSize.replace("px",""),l=null}catch(m){}b&&(h=Math.max(h,(Number(t.replace("px",""))||0)+c[f].getBoundingClientRect().height));f===a.target.activeCues.length-1&&(b=a.target.activeCues[f].endTime?a.target.activeCues[f].endTime:0,g=a.target.activeCues[f].startTime?a.target.activeCues[f].startTime:0,b=1E3*(b-g),500<b&&(this.paralleltimer=setTimeout(this.clearCaption.bind(this),b)));f++}if(h>e)for(h-=e,f=0;f<c.length;)c[f].style.top=Number(c[f].style.top.replace("px",
""))-h+"px",f++}};X.prototype.clearCaption=function(){this.paralleltimer&&(clearTimeout(this.paralleltimer),this.paralleltimer=null);this.parallelement&&(this.parallelement.innerHTML="")};X.prototype.getTracksByKind=function(a){var b,c,e,d,f;e=this.facade.player.getMediaElement().textTracks;b=[];d=0;for(f=e.length;d<f;d++)c=e[d],c.kind===a&&"en"===c.language&&b.push(c);return b};X.prototype.suppressDupeTracks=function(a,b){var c,e,d,f,h;h=this.getTracksByKind(a);c=d=0;for(f=h.length;d<f;c=++d)e=h[c],
e.kind!==a||"en"!==e.language||null!=b&&b.includes(c)||(e.mode="hidden");return 0<c};var Oa=function(a){Oa.__super__.constructor.call(this,null,null,a,null)};g(Oa,ec);Oa.prototype.componentName=G.TEXT_TRACK_RENDERER;Oa.prototype.captionText=null;Oa.prototype.onRegister=function(){Oa.__super__.onRegister.call(this);this.settings=this.facade.player._settings.settings.captions||{}};Oa.prototype.getRendererName=function(){return"html"};Oa.prototype.canUseResource=function(a){return null==a?!1:-1!==[f.mimeTypes.srt,
f.mimeTypes.ttml,f.mimeTypes.vtt].indexOf(a.type)};Oa.prototype.getCaptionDisplayHeight=function(){var a,b,c;a=0;for(b=c=this.viewComponent.childNodes.length;b;){--b;if(3===c&&0===b)break;a+=f.getActualSize(this.viewComponent.childNodes[b]).height}return a+"px"};Oa.prototype.scrollCaptions=function(a,b,c){var e,d,f=this;null==a&&(a=this.viewComponent.scrollHeight);null==b&&(b=this.viewComponent.scrollTop);null==c&&(c=20);d=(a-b)/c;e=function(){var c;if(b<a)return f.viewComponent.scrollTop=b+=d,setTimeout(e,
20);for(c=[];2<f.viewComponent.childNodes.length;)c.push(f.viewComponent.removeChild(f.viewComponent.firstChild));return c};e()};Oa.prototype.listNotificationInterests=function(){return[w.CUE_CHANGE,d.CHANGE_MEDIA]};Oa.prototype.handleNotification=function(a){var b,c,e,f,g,h,l,t;b=a.getName();a=a.getBody();switch(b){case d.CHANGE_MEDIA:this.viewComponent.innerHTML="";break;case w.CUE_CHANGE:b="";f=0;for(h=a.length;f<h;f++){e=a[f];t=this.viewComponent.children;g=0;for(l=t.length;g<l;g++)c=t[g],c.outerHTML.includes(e.html);
b+=e.html}"painton"===this.settings.scroll?this.classList.add("captioning-typed"):this.classList.remove("captioning-typed");switch(this.settings.scroll){case "popout":this.viewComponent.innerHTML=b;break;case "rollon":case "painton":a=document.createElement("div");a.innerHTML=b;c=a.childNodes;e=a=0;for(b=c.length;a<b;e=++a)e=c[e],this.viewComponent.children.length&&this.viewComponent.lastChild.innerText.includes(e.innerText)||this.viewComponent.appendChild(e);this.viewComponent.style.maxHeight=this.getCaptionDisplayHeight();
this.scrollCaptions()}}};var w={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",TOGGLE_SETTINGS_VISIBILITY:"togglesettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},u=function(){};u.MSG_LIVE="MSG_LIVE";u.MSG_REPLAY="MSG_REPLAY";u.MSG_BUFFERING="MSG_BUFFERING_TEXT";u.MSG_CC="MSG_CC";u.MSG_CC_TITLE=
"MSG_CC_TITLE";u.MSG_CC_LANGUAGE="MSG_CC_LANGUAGE";u.MSG_CC_PRESETS="MSG_CC_PRESETS";u.MSG_CC_FONT="MSG_CC_FONT";u.MSG_CC_EDGE="MSG_CC_EDGE";u.MSG_CC_SIZE="MSG_CC_SIZE";u.MSG_CC_SCROLL="MSG_CC_SCROLL";u.MSG_CC_COLOR="MSG_CC_COLOR";u.MSG_CC_BACKGROUND="MSG_CC_BACKGROUND";u.MSG_CC_EDGE="MSG_CC_EDGE";u.MSG_CC_WINDOW="MSG_CC_WINDOW";u.MSG_CC_OPACITY="MSG_CC_OPACITY";u.MSG_CC_SHOW_ADVANCED="MSG_CC_SHOW_ADVANCED";u.MSG_CC_HIDE_ADVANCED="MSG_CC_HIDE_ADVANCED";u.MSG_CC_RESET="MSG_CC_RESET";u.MSG_CC_CANCEL=
"MSG_CC_CANCEL";u.MSG_CC_APPLY="MSG_CC_APPLY";u.MSG_CC_PREVIEW_TEXT="MSG_CC_PREVIEW_TEXT";u.MSG_SECONDS="MSG_SECONDS";u.MSG_RECOMMENDATIONS_TITLE="MSG_RECOMMENDATIONS_TITLE";u.MSG_NEXT_VIDEO="MSG_NEXT_VIDEO";u.MSG_NEXT_AD="MSG_NEXT_AD";u.MSG_TIME_SEPARATOR="MSG_TIME_SEPARATOR";u.MSG_VIEW_ALL="MSG_VIEW_ALL";u.MSG_VIDEO="MSG_VIDEO";var Xa=function(){Xa.__super__.constructor.call(this)};g(Xa,pa);Xa.prototype.initializeNotifier=function(a){Xa.__super__.initializeNotifier.call(this,a);this.plugin=this.facade.retrieveProxy(O.NAME);
this.media=this.facade.player.retrieveProxy(q.NAME)};Xa.prototype.onRegister=function(){Xa.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent};var yb=function(a){yb.__super__.constructor.call(this,a)};g(yb,Xa);yb.prototype.componentName="captioning";yb.prototype.onRegister=function(){var a;yb.__super__.onRegister.call(this);a=this.facade.player.settings.captions;this.facade.setHidden(!a.visible);this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],
"style");this.captionningStyle.type="text/css";this.applyStyles(a)};yb.prototype.listNotificationInterests=function(){return[w.VISIBILITY_CHANGE,w.ENABLED,w.TRACK_SELECTED,w.SETTINGS_CHANGE]};yb.prototype.handleNotification=function(a){var b,c,e;c=(b=a.getBody())?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;switch(a.getName()){case w.TRACK_SELECTED:e="cc-embedded";c="embedded"===b.type?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;break;case w.VISIBILITY_CHANGE:e="cc-active";break;case w.ENABLED:c=
b?d.ADD_CONTROL_STATE:d.REMOVE_CONTROL_STATE;e="cc-enabled";b||this.sendNotification(d.REMOVE_APPLICATION_STATE,"cc-active");break;case w.SETTINGS_CHANGE:this.applyStyles(b);return}this.sendNotification(c,e)};yb.prototype.applyStyles=function(a){var b,c,e,d,f,h,g;null!=a.visible&&(this.facade.hidden=!a.visible);d="font-family: "+a.fontFamily+" !important;";e=""+a.edgeType+" "+a.edgeColor+" !important;";f="font-size: "+a.size+" !important;";c="color: "+a.fontColor+" !important;";b="background-color: "+
a.backgroundColor+" !important;";g="background-color: "+a.windowColor+" !important;";a="line-height:2.2em;";h=g.match(/rgba\([^)]+\)/g);null!=h&&h instanceof Array&&0<h.length&&(a=0===Number(h[0].replace(/^.*, (.+)\)/,"$1"))?"":a);h=this.facade.player.viewComponent.id;this.captionningStyle.innerHTML="#"+h+" .akamai-caption-text { "+d+f+e+g+" } #"+h+" .akamai-caption-text p { "+c+b+" } video::-webkit-media-text-track-display { "+g+" } video::-webkit-media-text-track-display span { "+d+f+e+b+" } video::-webkit-media-text-track-display { "+
g+" } video::cue { "+c+d+f+e+b+" } video::-webkit-media-text-track-container {"+a+"} video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}"};var $=function(a,b){$.__super__.constructor.call(this,a,b);Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},
tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1}})};g($,ea);$.NAME="CaptioningWrapper";$.prototype.flashPlugins=[{id:"AdobeCaptionPlugin",src:"#{paths.resources}plugins/AdobeCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AdobeCaptionPlugin",type:"application/x-shockwave-flash"},{id:"AMPCaptionPlugin",src:"#{paths.resources}plugins/AMPCaptionPlugin.swf",blocking:!1,host:"akamai",main:"AMPCaptionPlugin",type:"application/x-shockwave-flash"},
{id:"CaptionSettingsPlugin",src:"#{paths.resources}plugins/CaptionSettingsPlugin.swf",blocking:!1,host:"akamai",main:"CaptionSettingsPlugin",type:"application/x-shockwave-flash"}];$.prototype.flashView={elements:{captionDisplay:{attributes:{defaultMessage:"Sorry! No captions available for this stream",initState:"cookie",position:"relative",settingsEnabled:"true",style:"bottom: 0px; windowColor :0x000000; windowOpacity: 0; font: Monospaced Serif; fontColor: 0xffffff; fontOpacity: 1; fontBGColor: 0x000000; fontBGOpacity: 0; edgeType: none; edgeColor: 0x000000; edgeOpacity: 1; scroll: Pop-Out; fontSize: 12;"}},
controls:{elements:{captionBtn:{}}}}};$.prototype._hidden=!0;$.prototype.createXML=function(a){var b,c,e,d;e=null!=(d=this.config.flash)?d.subply:void 0;if(null!=e)try{null!=e.timeMethod&&(c=a.getElementsByTagName("player")[0],c.setAttribute("subply_time_method",e.timeMethod)),null!=e.plugin&&(b=a.firstChild,e=a.getElementsByTagName("subply")[0],null==e&&(e=a.createElement("subply"),b.appendChild(e)),this.createProperty(a,"SUBPLY_URL",this.config.flash.subply.plugin,e))}catch(f){this.facade.logger.error("[AMP CAPTIONING ERROR]",
f)}};$.prototype.createFlashVars=function(a){var b,c,e,d,g,h;e=this.player.config;if(null!=(null!=(b=e.media)?b.track:void 0)){d=f.selectTrack(e.media.track,"captions");null!=d.src&&""!==d.src&&(a.caption_url=d.src);if(0<e.media.track.length){c=[];b=[];h=e.media.track;e=0;for(g=h.length;e<g;e++)d=h[e],c.push(d.src),b.push(d.srclang);a.caption_url=c.join(",");a.caption_language=b.join(",")}a.caption_type=null!=d.type?encodeURIComponent(d.type):"application/ttml+xml"}null==a.caption_language&&(a.caption_language=
"en-us")};$.prototype.listNotificationInterests=function(){return $.__super__.listNotificationInterests.apply(this,arguments).concat([d.MEDIA_CHANGE,x.CAPTIONING_REQUEST,x.CAPTION_LANG_CHANGE,x.INITIALIZED])};$.prototype.handleNotification=function(a){var b,c,e;$.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case x.CAPTION_LANG_CHANGE:e="";break;case x.CAPTIONING_REQUEST:e="visibilitychange";a=a.enabled;this.hidden=!a;break;case d.MEDIA_CHANGE:b=a;if(null!=b.track){this._tracks=
b.track.map(function(a){return Object.assign({language:a.srclang},a)});c=f.selectTrack(this._tracks,"captions");if(null==c)return;null!=c.src&&""!==c.src&&(b.captioningUrl=c.src);null!=c.type&&(b.captioningType=c.type||"application/ttml+xml");this._track=c}break;case x.INITIALIZED:this.hidden=!this.player.getMediaElement().getPlayerProperty("isCaptionVisible")}null!=e&&""!==e&&this.dispatchEvent(new H(e,a))};$.prototype.getHidden=function(){return this._hidden};$.prototype.setHidden=function(a){this._hidden=
a;this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!a});return a};$.prototype.getVisible=function(){return!this._hidden};$.prototype.setVisible=function(a){this.setHidden(!a);return a};$.prototype.getTracks=function(){return this._tracks||[]};$.prototype.getTrack=function(){return this._track};$.prototype.selectTrackByIndex=function(a){};$.prototype.selectTrackByLanguage=function(a){this.facade.getMediaElement().setTrackByLanguage(a)};$.prototype.changeSettings=function(a){if(null!=
(null!=a?a.fontFamily:void 0)&&"object"===typeof a.fontFamily)return this.facade.getMediaElement().setPlayerProperty("captionSettingsUI",a);null!=(null!=a?a.visible:void 0)&&(this.hidden=!a.visible);this.facade.getMediaElement().setPlayerProperty("captionDisplay",{visible:!this.hidden,style:this.parseObject(a)})};$.prototype.parseObject=function(a){var b,c,e,d;b={};try{for(e in a)switch(e){case "fontFamily":b.font=a[e];break;case "fontColor":case "backgroundColor":case "edgeColor":case "windowColor":c=
"fontColor"===e?"font":"backgroundColor"===e?"fontBG":"edgeColor"===e?"edge":"window";-1!==(null!=(d=a[e])?d.indexOf("rgba"):void 0)&&(b[c+"Color"]=this.parseRGBA(a[e]),b[c+"Opacity"]=a[e].replace(/^.*,(.+)\)/,"$1"));break;default:b[e]=a[e]}delete b.visible}catch(f){this.facade.logger.error("Captioning Settings Parse Error",f)}return b};$.prototype.parseRGBA=function(a){return(a=a.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===a.length?"0x"+("0"+parseInt(a[1],
10).toString(16)).slice(-2)+("0"+parseInt(a[2],10).toString(16)).slice(-2)+("0"+parseInt(a[3],10).toString(16)).slice(-2):""};B.registerPlugin("captioning","flash",$);var Ya=function(){Ya.__super__.constructor.call(this)};g(Ya,sa);Ya.NAME="Feature";Ya.prototype.featureName=null;Ya.prototype.getFeatureName=function(){return this.featureName};Ya.prototype.registerFeature=function(){null!=this.getFeatureName()&&this.player.sendNotification("registerfeature",this)};Ya.prototype.onRegister=function(){this.registerFeature();
Ya.__super__.onRegister.call(this)};Ya.prototype.listNotificationPublications=function(){return Ya.__super__.listNotificationPublications.call(this).concat(["registerfeature"])};var Hc=function(a,b){Hc.__super__.constructor.call(this,a,b);f.flashTypes.push(f.mimeTypes.m3u8)};g(Hc,ea);Hc.NAME="HLSWrapper";Hc.prototype.flashPlugins=[{id:"flashlsOSMF",src:"#{paths.resources}plugins/flashlsOSMF.swf",host:"osmf",type:"application/x-shockwave-flash"}];B.registerPlugin("hls","flash",Hc);var z=function(a,
b){this.plugin=b;z.__super__.constructor.call(this,a.types,a);this.temporalTypes=["vod","live","dvr"]};g(z,aa);z.prototype.playbackCoreName="hls";z.prototype.player=null;z.prototype.hlsConfig=null;z.prototype.fragErrorTime=0;z.prototype.timedMedatadata=null;z.prototype.currentMedatadata=null;z.prototype.id3Track=null;z.prototype.manifestParsed=!1;z.prototype.details=null;z.prototype.getUseMAE=function(){return z.__super__.getUseMAE.call(this)&&"undefined"!==typeof MediaAccelerationHlsJsWrapper&&null!==
MediaAccelerationHlsJsWrapper};z.prototype.getConfig=function(){var a;a=f.clone(this.config.data);!0===this.config.withCredentials&&(a.xhrSetup=function(a,c){a.withCredentials=!0});a.debug=this.plugin.proxy.getDebug();this.getUseMAE()||(a.enableSoftwareAES=null!=a.enableSoftwareAES?a.enableSoftwareAES:!0);return a};z.prototype.load=function(){var a,b,c,e,d,f=this;null!=this.player&&this.destroy();this.manifestParsed=!1;a=this.getConfig();this.getUseMAE()?(a=new MediaAccelerationHlsJsWrapper(this.config.mae,
a),a=a.getPlayer()):a=new Hls(a);a.attachMedia(this.getMediaElement());e=Hls.Events;for(b in e)c=e[b],a.on(c,function(a,b){f.plugin.dispatcher.dispatchEvent(new H(a,b))});a.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this));a.on(Hls.Events.ERROR,this.onError.bind(this));a.on(Hls.Events.FRAG_PARSING_METADATA,this.onFragParsingMetadata.bind(this));a.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this));a.on(Hls.Events.LEVEL_SWITCHING,this.onLevelSwitching.bind(this));a.on(Hls.Events.FRAG_LOADING,
this.onFragmentLoadStart.bind(this));a.on(Hls.Events.FRAG_LOADED,this.onFragmentLoaded.bind(this));try{for(b in d=this.config.quality,d)c=d[b],a[b]=c}catch(h){}this.player=a;this.details=null;z.__super__.load.call(this)};z.prototype.applySrc=function(){this.currentMedatadata=null;this.player.loadSource(this.getSrc());this.getMediaElement().load()};z.prototype.onManifestParsed=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.MANIFEST_PARSED,{event:a,data:b}));this.manifestParsed=
!0;this.sendNotification(d.QUALITY_LEVELS_LOADED,b.levels);this.player.loadLevel=-1};z.prototype.onLevelLoaded=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.LEVEL_LOADED,{event:a,data:b}));this.player.levels[b.level].level=b.level;this.sendNotification(d.QUALITY_CHANGE,this.player.levels[b.level]);this.details=b.details;this.details.totalduration!==this.data.duration&&(this.data.duration=this.details.totalduration,this.sendNotification(d.CHANGE_DURATION,this.data.duration));
!0===b.details.live&&"dvr"!==this.facade.mediaProxy.getTemporalType()&&this.facade.mediaProxy.setTemporalType("live")};z.prototype.onLevelSwitching=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.LEVEL_SWITCHING,{event:a,data:b}));this.sendNotification(d.QUALITY_CHANGING,this.player.levels[b.level])};z.prototype.onFragParsingMetadata=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.FRAG_PARSING_METADATA,{event:a,data:b}))};z.prototype.onFragmentLoadStart=
function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.FRAG_LOADING,{event:a,data:b}));this.sendNotification(d.FRAGMENT_LOAD_START,this.player.levels[b.frag.level].bitrate)};z.prototype.onFragmentLoaded=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H(Hls.Events.FRAG_LOADED,{event:a,data:b}));this.sendNotification(d.FRAGMENT_LOADED,this.player.levels[b.frag.level].bitrate)};z.prototype.ontimeupdate=function(a){a=this.facade.ads||{};!0!==(("function"===typeof a.getInProgress?
a.getInProgress():void 0)||a.inProgress)&&(this.data.currentTime=this.getCurrentTime(),this.sendNotification(d.TIME_UPDATE,this.data.currentTime))};z.prototype.ondurationchange=function(a){a=this.getDetails().totalduration;a===this.data.duration||0===a||isNaN(a)||(this.data.duration=a,this.sendNotification(d.CHANGE_DURATION,a))};z.prototype.getCurrentTime=function(){return this.getMediaElement().currentTime-this.getStartTime()};z.prototype.getDetails=function(){return this.details||{}};z.prototype.getFragmentDuration=
function(){return this.getDetails().targetduration};z.prototype.getUTCStart=function(){return 1E4*this.getDetails().startSN};z.prototype.getUTCTime=function(){return this.getUTCStart()+1E3*this.getCurrentTime()};z.prototype.getUTCEnd=function(){return 1E4*this.getDetails().endSN};z.prototype.getStartTime=function(){return this.getMediaElement().duration-this.getDuration()};z.prototype.goLive=function(){this.setCurrentTime(this.getLiveTime())};z.prototype.getLiveTime=function(){return this.getDuration()-
this.getFragmentDuration()};z.prototype.isLive=function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()};z.prototype.seek=function(a){var b=this;return z.__super__.seek.call(this,a+this.getStartTime()).then(function(a){"dvr"===b.mediaProxy.getTemporalType()&&b.sendNotification(d.IS_LIVE,b.isLive())})};z.prototype.onplaying=function(a){z.__super__.onplaying.call(this);this.retried=!1};z.prototype.onError=function(a,b){this.plugin.sendNotification(d.DISPATCH_EVENT,new H("error",
{event:a,data:b}));if(!0!==this.config.ignoreErrors)if(!1===this.config.retryOnError||!0===this.retried)this.retried=!1,this.error(b);else if(b.fatal&&b.type===Hls.ErrorTypes.MEDIA_ERROR&&b.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(b.fatal=!1),b.fatal)switch(b.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0;this.manifestParsed?this.player.startLoad():this.player.loadSource(this.getSrc());this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",a);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=
!0;this.player.recoverMediaError();this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",a);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",a),this.error(b)}else b.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)};
z.prototype.error=function(a){switch(a.type){case Hls.ErrorTypes.NETWORK_ERROR:a.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:a.code=MediaError.MEDIA_ERR_DECODE;break;default:a.toString=function(){return a.details}}this.sendNotification(d.ERROR,a)};z.prototype.setQuality=function(a){var b;return null!=(b=this.player)?b.currentLevel=a:void 0};z.prototype.getQuality=function(){var a,b,c;a=null!=(b=this.player)?b.currentLevel:void 0;-1===a&&(a=null!=(c=this.player)?c.nextLoadLevel:
void 0);return a};z.prototype.getQualityLevels=function(){var a;return(null!=(a=this.player)?a.levels:void 0)||z.__super__.getQualityLevels.call(this)};z.prototype.getQualityMode=function(){var a;return!0===(null!=(a=this.player)?a.autoLevelEnabled:void 0)?"auto":"manual"};z.prototype.setQualityMode=function(a){var b,c;"auto"===a?null!=(b=this.player)&&(b.currentLevel=-1):"manual"===a?null!=(b=this.player)&&(b.currentLevel=null!=(c=this.player)?c.currentLevel:void 0):a+=" is not a valid key";return a};
z.prototype.destroy=function(){null!=this.player&&(this.player.destroy(),this.player=null)};var td=function(){td.__super__.constructor.call(this)};g(td,ma);td.prototype.execute=function(a){var b;"freewheel"===(null!=(b=a.getBody())?b.partner:void 0)&&this.proxy.destroy()};var fa={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",
AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"},
zb=function(a){zb.__super__.constructor.call(this,a)};g(zb,ga);zb.NAME=O.NAME;zb.prototype.playbackProxy=null;zb.prototype.createPlaybackProxy=function(){};zb.prototype.initialize=function(){var a;this.playbackProxy=this.createPlaybackProxy();null!=this.playbackProxy&&(this.sendNotification(d.INITIALIZED),a=this.facade.player.retrieveProxy(V.NAME),a.registerPlaybackCore(this.playbackProxy))};zb.prototype.destroy=function(){var a;null!=(a=this.playbackProxy)&&a.destroy()};var fc=function(a){fc.__super__.constructor.call(this,
a)};g(fc,zb);fc.NAME=O.NAME;fc.prototype.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableCEA708Captions:!0},mae:null,buffer:null,quality:null,withCredentials:null,retryOnError:!0,ignoreErrors:!1};fc.prototype.createPlaybackProxy=function(){if(null!=(window.MediaSource||window.WebKitMediaSource)&&Hls.isSupported())return new z(this.getConfigurationData(),this.facade)};var M=function(a){M.__super__.constructor.call(this,a.types,a);this.buffer=a.buffer;this.temporalTypes=["vod",
"live","dvr"]};g(M,aa);M.prototype.playbackCoreName="dash";M.prototype.context=null;M.prototype.player=null;M.prototype.buffer=null;M.prototype.resumecomplete=function(){var a,b,c;try{b=null!=(c=this.facade.getMediaElement())?c.textTracks:void 0,0!==(null!=b?b.length:void 0)&&(a=b[0],null!=a&&(a.mode="hidden"))}catch(e){}M.__super__.resumecomplete.call(this)};M.prototype.onerror=function(){};M.prototype.createTracks=function(){var a,b,c,e,d,f,h,g;a=this.player.getTracksFor("audio");c=this.player.getCurrentTrackFor("audio");
f=this.facade.tracks.getAudioTracks();b=a.length;e=h=0;for(g=a.length;h<g;e=++h)d=a[e],f.add(new Ta({kind:d.roles.join(" "),label:d.id,language:d.lang,id:d.id,enabled:d===c}),e+1===b)};M.prototype.getUseMAE=function(){return M.__super__.getUseMAE.call(this)&&"undefined"!==typeof MediaAccelerationDashJsWrapper&&null!==MediaAccelerationDashJsWrapper};M.prototype.load=function(){var a;null==this.player&&(this.getUseMAE()?(a=new MediaAccelerationDashJsWrapper(this.config.mae),this.player=a.getPlayer()):
this.player=dashjs.MediaPlayer().create(),this.player.enableBufferOccupancyABR(!0),this.player.on("error",this.onError.bind(this)),this.player.on("fragmentLoadingStarted",this.onFragmentLoadStart.bind(this)),this.player.on("fragmentLoadingCompleted",this.onFragmentLoaded.bind(this)),this.player.on("qualityChangeRequested",this.onLevelSwitching.bind(this)),this.player.getDebug().setLogToBrowserConsole(this.facade.logger.enabled),this.player.initialize(this.getMediaElement(),null,!1),null!=this.config.initialBitrate&&
this.player.setInitialBitrateFor(this.facade.getMedia().medium,this.config.initialBitrate));M.__super__.load.call(this)};M.prototype.applySrc=function(){var a;a=this.facade.getMedia().keys;null!=a&&this.player.setProtectionData(a);this.player.attachSource(this.getSrc());this.getMediaElement().load()};M.prototype.seek=function(a){return Promise.resolve(this.player.seek(a))};M.prototype.getCurrentTime=function(){var a;return(null!=(a=this.player)?a.time():void 0)||0};M.prototype.getDuration=function(){var a;
return(null!=(a=this.player)?a.duration():void 0)||0};M.prototype.getStats=function(){return{}};M.prototype.onFragmentLoadStart=function(a){this.sendNotification(d.FRAGMENT_LOAD_START,a.request.mediaInfo.bitrateList[a.request.quality].bandwidth)};M.prototype.onFragmentLoaded=function(a){this.sendNotification(d.FRAGMENT_LOADED,a.request.mediaInfo.bitrateList[a.request.quality].bandwidth)};M.prototype.onLevelSwitching=function(a){this.sendNotification(d.QUALITY_CHANGING,this.getQualityLevels()[a.newQuality])};
M.prototype.onError=function(a){this.facade.logger.error("DASH JS Playback Error:",a)};M.prototype.setQuality=function(a){var b,c,e;null!=(b=this.player)&&b.setAutoSwitchQualityFor(null!=(c=this.facade.getMedia())?c.medium:void 0,-1===a);if(-1!==a)return null!=(e=this.player)?e.setQualityFor("video",a):void 0};M.prototype.getQuality=function(){var a;return null!=(a=this.player)?a.getQualityFor("video"):void 0};M.prototype.getQualityLevels=function(){var a;return(null!=(a=this.player)?a.getBitrateInfoListFor("video"):
void 0)||M.__super__.getQualityLevels.call(this)};M.prototype.getQualityMode=function(){var a,b;return!0===(null!=(a=this.player)?a.getAutoSwitchQualityFor(null!=(b=this.facade.getMedia())?b.medium:void 0):void 0)?"auto":"abr"};M.prototype.setQualityMode=function(a){var b,c;return"auto"!==a?a+" is not a valid key":null!=(b=this.player)?b.setAutoSwitchQualityFor(null!=(c=this.facade.getMedia())?c.medium:void 0,a):void 0};M.prototype.destroy=function(){var a;null!=(a=this.player)&&a.reset()};var Y=
function(){Y.__super__.constructor.call(this);Object.defineProperties(this,{enabled:{get:this.getEnabled,set:this.setEnabled,enumerable:!0,configurable:!1},hidden:{get:this.getHidden,set:this.setHidden,enumerable:!0,configurable:!1},visible:{get:this.getVisible,set:this.setVisible,enumerable:!0,configurable:!1},tracks:{get:this.getTracks,enumerable:!0,configurable:!1},track:{get:this.getTrack,set:this.setTrack,enumerable:!0,configurable:!1}})};g(Y,Ya);Y.prototype.featureName="captioning";Y.prototype.moduleName=
"captioning";Y.prototype.createController=function(){Y.__super__.createController.call(this);this.registerCommand(d.CHANGE_MEDIA,qd);this.registerCommand(d.STARTED,sd);this.registerCommand(d.TIME_UPDATE,rd);this.registerCommand(w.VISIBILITY_CHANGE,Gc);this.registerCommand(w.ENABLED,Fc);this.registerCommand(w.TRACK_SELECTED,Wa);this.registerCommand(w.TRACKS_LOADED,Wa);this.registerCommand(w.CUE_CHANGE,Wa)};Y.prototype.createModel=function(){this.proxy=new G(this.config);this.registerProxy(this.proxy)};
Y.prototype.createView=function(){var a;a=new yb;this.registerMediator(a);a=a.viewComponent;this.proxy.registerRenderer(new X(a));this.proxy.registerRenderer(new Oa(a))};Y.prototype.listNotificationInterests=function(){return[d.LOADED_METADATA,d.CAN_PLAY_THROUGH,d.CHANGE_MEDIA,d.STARTED,d.TIME_UPDATE,w.TRACK_SELECTED]};Y.prototype.listNotificationPublications=function(){return Y.__super__.listNotificationPublications.call(this).concat([w.CUE_CHANGE,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,w.VISIBILITY_CHANGE,
w.SETTINGS_CHANGE])};Y.prototype.getEnabled=function(){return this.proxy.getEnabled()};Y.prototype.setEnabled=function(a){this.sendNotification(w.ENABLED,a);return a};Y.prototype.getHidden=function(){return this.proxy.getHidden()};Y.prototype.setHidden=function(a){this.sendNotification(w.VISIBILITY_CHANGE,!a);return a};Y.prototype.getVisible=function(){return!this.proxy.getHidden()};Y.prototype.setVisible=function(a){this.sendNotification(w.VISIBILITY_CHANGE,a);return a};Y.prototype.getTracks=function(){return this.proxy.getTracks()};
Y.prototype.getTrack=function(){return this.proxy.getTrack()};Y.prototype.setTrack=function(a){this.proxy.setTrack(a);return a};Y.prototype.selectTrackByIndex=function(a){return this.proxy.selectTrackByIndex(a)};Y.prototype.selectTrackByLanguage=function(a){return this.proxy.selectTrackByLanguage(a)};Y.prototype.changeSettings=function(a){this.sendNotification(w.SETTINGS_CHANGE,a);return a};Y.prototype.useParallelRendering=function(a){var b;(b=this.proxy.getRenderer())&&b.useParallelRendering(a);
return a};B.registerPlugin("captioning","html",Y);var ud=function(){ud.__super__.constructor.call(this)};g(ud,puremvc.SimpleCommand);ud.prototype.execute=function(a){var b,c,e,f,g=this;e=a.getBody();this.facade.retrieveProxy(p.NAME);a=this.facade.getMediaElement();null!=a&&a.webkitSupportsFullscreen&&(c=this.facade.retrieveProxy(v.NAME),c.setDisplayState(e),b={},f=this.facade.viewComponent,null!=f.requestFullscreen?(b.enter=function(){return f.requestFullscreen()},b.exit=function(){return document.cancelFullscreen()},
b.event="onfullscreenchange",b.element="fullscreenElement"):null!=f.webkitRequestFullScreen?(b.enter=function(){return f.webkitRequestFullScreen()},b.exit=function(){return document.webkitCancelFullScreen()},b.event="onwebkitfullscreenchange",b.element="webkitFullscreenElement"):null!=f.mozRequestFullScreen?(b.enter=function(){return f.mozRequestFullscreen()},b.exit=function(){return document.mozCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"):null!=f.msRequestFullScreen&&
(b.enter=function(){return f.msRequestFullscreen()},b.exit=function(){return document.msCancelFullScreen()},b.event="onmozfullscreenchange",b.element="mozFullscreenElement"),e===R.FULL_SCREEN?(b.enter(),null!=b.event&&(a[b.event]=function(a){if(null==document[b.element])return g.sendNotification(d.CHANGE_DISPLAY_STATE,R.NORMAL)})):e===R.NORMAL&&(b.exit(),a[b.event]=null),this.facade.dispatchEvent(new H("fullscreenchange",e===R.FULL_SCREEN)))};var gc=function(a){gc.__super__.constructor.call(this,
a)};g(gc,zb);gc.NAME=O.NAME;gc.prototype.defaults={types:["application/dash+xml"],buffer:null,mae:null,initialBitrate:null};gc.prototype.createPlaybackProxy=function(){if(null!=(window.MediaSource||window.WebKitMediaSource))return new M(this.getConfigurationData())};var F=function(a){var b,c,e;this.shim=a;F.__super__.constructor.call(this);this.state=cast.receiver.media.PlayerState.IDLE;try{e=document.createElement("style"),e.type="text/css",e.appendChild(document.createTextNode("")),document.head.appendChild(e),
c=e.sheet,b=c.insertRule(".akamai-html5.akamai-video::cue {color: #FFFFFF; background: #000000; visibility: hidden;}",0),this.cssRule=c.rules[b]}catch(d){Q.error(d)}};g(F,ya);F.prototype.player=null;F.prototype.callbackMap=null;F.prototype.state=null;F.prototype.activeTrackId=null;F.prototype.cssRule=null;F.prototype.textTrackStyle=null;F.prototype.ccHandler=null;F.prototype.feed=null;F.prototype.media=null;F.prototype.tracks=null;F.prototype.registerPlayer=function(a){var b,c=this;this.player=a;
b=this.dispatchEvent.bind(this);["loadedmetadata","ended","error"].forEach(function(c){return a.addEventListener(c,b)});this.player.once("ready",function(){c.applyMedia();c.applyFeed();c.applyClassName()});this.player.addEventListener("playing",this.setState.bind(this,cast.receiver.media.PlayerState.PLAYING));this.player.addEventListener("pause",this.setState.bind(this,cast.receiver.media.PlayerState.PAUSED));this.player.addEventListener("waiting",this.setState.bind(this,cast.receiver.media.PlayerState.BUFFERING))};
F.prototype.setState=function(a){if(a!==this.state)return this.state=a,this.shim.mediaManager.broadcastStatus(!0),a};F.prototype.registerErrorCallback=function(a){this.onerror=a};F.prototype.registerEndedCallback=function(a){this.onended=a};F.prototype.registerLoadCallback=function(a){this.onloadedmetadata=a};F.prototype.unregisterErrorCallback=function(){this.onerror=null};F.prototype.unregisterEndedCallback=function(){this.onended=null};F.prototype.unregisterLoadCallback=function(){this.onloadedmetadata=
null};F.prototype.load=function(a,b,c,e){var d,f,h,g,l,m,n;f=this.shim.mediaManager.getMediaInformation();d=f.customData||{};g=f.metadata||{};null!=e?this.editTracksInfo(e):this.activeTrackId=null;if(null!=d.feed&&null!=(null!=(l=this.player)?l.feed:void 0))this.feed=d.feed,this.media=null,this.applyFeed();else{this.feed=null;a={src:a,type:f.contentType,title:g.title,poster:null!=(m=g.images)?m.url:void 0,description:g.subtitle,pubDate:new Date(f.releaseDate),metadata:d,duration:f.duration,startTime:c||
(null!=(n=d.media)?n.startTime:void 0),autoplay:b};if(null!=d.media)for(h in m=d.media,m)d=m[h],null==a[h]&&(a[h]=d);this.tracks=f.tracks;this.media=a;this.applyMedia()}};F.prototype.applyMedia=function(){null!=this.player&&null!=this.media&&(this.player.once("loadedmetadata",this.loadTracks.bind(this,this.tracks)),this.player.setMedia(this.media),this.setState(cast.receiver.media.PlayerState.BUFFERING))};F.prototype.loadTracks=function(a,b){var c,d,f;0<(null!=a?a.length:void 0)&&(d=this.getTrack(0),
null!=d&&(f=/ttml/.test(d.trackContentType)?"ttml":d.trackContentType,c=this.player.retrieveProxy("PlayerProxy").getActivePlaybackCore(),c.player.enableCaptions(!0,f,d.trackContentId)))};F.prototype.applyFeed=function(){null!=this.player&&null!=this.feed&&(this.player.once("mediachange",this.mediachangeHandler.bind(this)),null!=this.feed.data?this.player.feed.setData(this.feed.data):null!=feed.url&&this.player.feed.setURL(this.feed.url))};F.prototype.mediachangeHandler=function(a){var b;a=this.player.getMedia();
b=new cast.receiver.media.MediaInformation;b.contentId=a.src;b.contentType=a.type;b.customData=a.metadata;b.duration=a.duration;b.metadata={title:a.title,subtitle:a.description,images:[{url:a.poster}],releaseDate:a.pubDate.toISOString()};this.media=a;this.shim.mediaManager.setMediaInformation(b,!0)};F.prototype.reset=function(){};F.prototype.play=function(){this.player.play()};F.prototype.seek=function(a,b){this.player.setCurrentTime(a);switch(b){case cast.receiver.media.SeekResumeState.PLAYBACK_PAUSE:this.player.pause();
break;case cast.receiver.media.SeekResumeState.PLAYBACK_START:this.player.play()}};F.prototype.pause=function(){return this.player.pause()};F.prototype.getState=function(){return this.state};F.prototype.getCurrentTimeSec=function(){return null!=this.player?this.player.getCurrentTime():0};F.prototype.getDurationSec=function(){return null!=this.player?this.player.getDuration():0};F.prototype.getVolume=function(){var a;a=new cast.receiver.media.Volume;a.level=this.player.getVolume();a.muted=this.player.getMuted();
return a};F.prototype.setVolume=function(a){null!=a.level&&this.player.setVolume(a.level);!0===a.muted?this.player.setMuted(!0):!0===this.player.getMuted()&&this.player.setMuted(!1);return a};F.prototype.editTracksInfo=function(a){var b;null!=a.activeTrackIds&&(b=a.activeTrackIds[0],this.activeTrackId!==b&&(this.activeTrackId=b,this.applyClassName()));a=a.textTrackStyle;null!=a&&null!=this.cssRule&&(this.textTrackStyle=a,null!=a.foregroundColor&&(this.cssRule.style.color=this.hexToRgba(a.foregroundColor)),
null!=a.backgroundColor&&(this.cssRule.style.backgroundColor=this.hexToRgba(a.backgroundColor)),a.windowType===cast.receiver.media.TextTrackWindowType.ROUNDED_CORNERS&&(this.cssRule.style.borderRadius=a.windowRoundedCornerRadius+"px"),null!=a.fontScale&&(this.cssRule.style.fontSize=a.fontScale+"em"),null!=a.fontFamily&&(this.cssRule.style.fontFamily=a.fontFamily))};F.prototype.applyClassName=function(a){null!=this.player&&(a=this.player.getMediaElement().classList,null!=this.activeTrackId?a.add("akamai-cc"):
a.remove("akamai-cc"))};F.prototype.hexToRgba=function(a){var b,c,d;if(!/^#[A-Fa-f0-9]{6}([A-Fa-f0-9]{2})?$/.test(a))return a;d=parseInt(a.substring(1,3),16);c=parseInt(a.substring(3,5),16);b=parseInt(a.substring(5,7),16);a=9===a.length?parseInt(a.substring(7,9),16)/256:1;return"rgba("+d+","+c+","+b+","+a+")"};F.prototype.getTrack=function(a){var b;null==a&&(a=this.activeTrackId);b=this.tracks.filter(function(b){return b.trackId===a})[0];null!=b&&null==b.trackContentType&&(b.trackContentType=cast.player.api.CaptionsType.CEA608);
return b};var Nd=[f.mimeTypes.m3u8,f.mimeTypes.mp4,f.mimeTypes.mpd,f.mimeTypes.ism,f.mimeTypes.webm,f.mimeTypes.mp3],y=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";y.__super__.constructor.call(this,a.sender)};g(y,ga);y.NAME=O.NAME;y.prototype.defaults={applicationID:"CC1AD845"};y.prototype.session=null;y.prototype.media=null;y.prototype.messageBus=null;y.prototype.feed=null;y.prototype.currentTime=null;y.prototype.duration=null;y.prototype.receiverAvailable=!1;y.prototype.currentTime=
0;y.prototype.duration=0;y.prototype.playerState=null;y.prototype.displayTimeTimeout=null;y.prototype.initialize=function(){var a,b=this;"undefined"!==typeof chrome&&null!==chrome&&null!=(a=chrome.cast)&&a.isAvailable?this.initializeCastApi():window.__onGCastApiAvailable=function(a,d){!0===a?b.initializeCastApi():b.logError("cast load error",d)}};y.prototype.initializeCastApi=function(){var a;a=this.getConfigurationData().applicationID;a=new chrome.cast.SessionRequest(a);a=new chrome.cast.ApiConfig(a,
this.sessionListener.bind(this),this.receiverListener.bind(this),chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED);chrome.cast.initialize(a,this.onInitSuccess.bind(this),this.onInitError.bind(this))};y.prototype.onInitSuccess=function(a){this.logEvent("init success",a)};y.prototype.onInitError=function(a){this.logError("init error",a)};y.prototype.receiverListener=function(a){this.receiverAvailable="available"===a;this.sendNotification(Za.AVAILABILITY_CHANGE,this.receiverAvailable);this.logEvent("receiver "+
(this.receiverAvailable?"found":"list empty"))};y.prototype.sessionListener=function(a){this.logEvent("session listener",a);if(0!==a.media.length)this.onMediaDiscovered(a.media[0]);else this.onRequestSessionSuccess(a)};y.prototype.launch=function(){chrome.cast.requestSession(this.onRequestSessionSuccess.bind(this),this.onLaunchError.bind(this))};y.prototype.send=function(a){var b;null!=(b=this.session)&&"function"===typeof b.sendMessage&&b.sendMessage(this.messageBus,a,this.onMessageSuccess.bind(this),
this.onMessageError.bind(this))};y.prototype.onLaunchError=function(a){this.logError("launch error.",a)};y.prototype.onRequestSessionSuccess=function(a){this.logEvent("request session success.",a);this.session=a;this.session.addMessageListener(this.messageBus,this.onMessage.bind(this));this.session.addUpdateListener(this.onUpdate.bind(this));this.session.sendMessage(this.messageBus,{type:"createPlayer",config:this.facade.player.getConfig()},this.onCreateSucess.bind(this),this.onMessageError.bind(this));
a=this.facade.player.retrieveProxy(p.NAME);0===this.session.media.length&&this.loadMedia(a.getCurrentTime())};y.prototype.onUpdate=function(a){a||(this.sendNotification(d.CHANGE_PLAYBACK_TARGET,"amp"),this.stopDisplayTimeUpdate())};y.prototype.onCreateSucess=function(a){this.logEvent("MPL created",a);this.sendNotification(d.CHANGE_PLAYBACK_TARGET,"chromecast")};y.prototype.onMessageSuccess=function(a){this.logEvent("message sent",a)};y.prototype.onMessageError=function(a){this.logError("message error",
a)};y.prototype.onMessage=function(a,b){var c,e;b=JSON.parse(b);e=b.type;c=b.detail||{};switch(e){case "dispatchevent":e="player"===c.target?this.facade.player:this.facade.player[c.target],null!=e&&e.dispatchEvent(c.event)}this.sendNotification(d.DISPATCH_EVENT,{type:"message",message:b})};y.prototype.onStop=function(a){this.logEvent("stop");this.session.stop(this.onStopSuccess.bind(this),this.onStopError.bind(this))};y.prototype.onStopSuccess=function(a){this.logEvent("stop success",a)};y.prototype.onStopError=
function(a){this.logError("stop error",a)};y.prototype.logEvent=function(a,b){null==a&&(a=b.type||"");this.facade.logger.log("[AMP CHROMECAST] "+a,b)};y.prototype.logError=function(a,b){this.facade.logger.error("[AMP CHROMECAST ERROR] "+a,b)};y.prototype.loadMedia=function(a){var b,c,d,g,l;null==a&&(a=0);d=this.facade.player.retrieveProxy(q.NAME).getData();null!=d&&(b=function(a){return-1<Nd.indexOf(a)?"maybe":""},g=f.selectSource(d.source,b),null!=g&&(b={media:d},c=null!=(l=this.facade.player.getModules())?
l.feed:void 0,null!=c&&(b.feed={data:c.getData(),url:c.getURL()}),a=this.mediaToLoadRequest(d,g,a,b),this.session.loadMedia(a,this.onMediaDiscovered.bind(this),this.onMediaError.bind(this))))};y.prototype.mediaToLoadRequest=function(a,b,c,d){var f,g,h;g=new chrome.cast.media.GenericMediaMetadata;g.title=a.title;g.subtitle=a.description;g.image=[new chrome.cast.Image(a.poster)];g.releaseDate=null!=(f=a.pubDate)?"function"===typeof f.toISOString?f.toISOString():void 0:void 0;b=new chrome.cast.media.MediaInfo(b.src,
b.type);b.duration=a.duration;b.customData=d;b.metadata=g;if(0<(null!=(h=a.track)?h.length:void 0))for(b.tracks=[],h=a.track,f=d=0,g=h.length;d<g;f=++d)a=h[f],f=new chrome.cast.media.Track(f,chrome.cast.media.TrackType.TEXT),f.subtype=chrome.cast.media.TextTrackType.CAPTIONS,f.name="Closed Captions",f.language=a.srclang,f.customData=a,f.trackContentId=a.src,f.trackContentType=a.type,b.tracks.push(f);b=new chrome.cast.media.LoadRequest(b);b.currentTime=c;return b};y.prototype.onMediaDiscovered=function(a){null!=
this.media&&this.media.removeUpdateListener(this.mediaStatusUpdate);this.media=a;this.mediaStatusUpdate=this.onMediaStatusUpdate.bind(this);this.media.addUpdateListener(this.mediaStatusUpdate);this.sendNotification(d.CHANGE_PLAYBACK_TARGET,"chromecast")};y.prototype.onMediaStatusUpdate=function(a){this.logEvent("mediastatusupdate",a);this.updatePlayerState(this.media.playerState);this.updateDisplayTime();!1===a&&this.stopDisplayTimeUpdate()};y.prototype.updatePlayerState=function(a){var b;if(a!==
this.playerState){this.playerState=a;switch(this.playerState){case chrome.cast.media.PlayerState.BUFFERING:b=L.WAITING;break;case chrome.cast.media.PlayerState.PLAYING:b=L.PLAYING;break;case chrome.cast.media.PlayerState.PAUSED:b=L.PAUSED}this.sendNotification(d.CHANGE_PLAY_STATE,b);this.playerState===chrome.cast.media.PlayerState.PLAYING?this.startDisplayTimeUpdate():this.stopDisplayTimeUpdate()}};y.prototype.startDisplayTimeUpdate=function(){this.stopDisplayTimeUpdate();this.displayTimeTimeout=
setInterval(this.updateDisplayTime.bind(this),100)};y.prototype.stopDisplayTimeUpdate=function(){clearInterval(this.displayTimeTimeout);this.displayTimeTimeout=null};y.prototype.updateDisplayTime=function(){var a,b,c;a=this.media.getEstimatedTime()||0;b=(null!=(c=this.media.media)?c.duration:void 0)||a;b!==this.duration?(this.duration=b,this.sendNotification(d.CHANGE_DURATION,this.duration)):a!==this.currentTime&&(this.currentTime=a,this.sendNotification(d.DISPLAY_TIME,{currentTime:this.currentTime,
duration:this.duration}))};y.prototype.onMediaError=function(a){this.logError("media error",a);this.stopDisplayTimeUpdate()};y.prototype.play=function(){this.media.play()};y.prototype.pause=function(){this.media.pause()};y.prototype.setCurrentTime=function(a){var b;b=new chrome.cast.media.SeekRequest;b.currentTime=a;this.media.seek(b)};y.prototype.getCurrentTime=function(){return this.currentTime};y.prototype.isReceiverAvailable=function(){return this.receiverAvailable};var Ic=function(){Ic.__super__.constructor.call(this)};
g(Ic,ma);Ic.prototype.execute=function(a){this.proxy.launch()};var vd=function(){vd.__super__.constructor.call(this)};g(vd,ma);vd.prototype.execute=function(a){this.proxy.send({type:"captioning.visibilitychange",detail:{visibility:a.getBody()}})};var wd=function(){wd.__super__.constructor.call(this)};g(wd,ma);wd.prototype.execute=function(a){this.proxy.send({type:"captioning.settingschange",detail:a.getBody()})};var xd=function(){xd.__super__.constructor.call(this)};g(xd,ma);xd.prototype.execute=
function(a){this.facade.player.getViewComponent().hidden=!1;this.proxy.ready()};var yd=function(){yd.__super__.constructor.call(this)};g(yd,ma);yd.prototype.execute=function(a){this.facade.logger.debug("ChromeCastBreakStartCommand");a=this.facade.player.retrieveProxy(V.NAME).getActivePlaybackCore();"chromecast"===a.getPlaybackCoreName()&&(a.unload(),a.src=null)};var qa=function(a,b){this.receiver=b;qa.__super__.constructor.call(this,a)};g(qa,aa);qa.prototype.initialized=!0;qa.prototype.player=null;
qa.prototype.host=null;qa.prototype.protocol=null;qa.prototype.playbackCoreName="chromecast";qa.prototype.manifest=null;qa.prototype.xhr=null;qa.prototype.trackInfo=null;qa.prototype.receiver=null;qa.prototype.reset=function(){qa.__super__.reset.call(this);this.manifest=this.xhr=null};qa.prototype.unload=function(){null!=this.player&&(this.trackInfo={activeTrackIds:[this.receiver.chromecastPlayer.activeTrackId],textTrackStyle:this.receiver.chromecastPlayer.textTrackStyle},this.receiver.chromecastPlayer.activeTrackId=
null,this.receiver.chromecastPlayer.textTrackStyle=null,this.player.unload(),this.player=null)};qa.prototype.load=function(){var a=this;null!=this.xhr?null!=this.manifest&&this.loadMediaPlayer():(this.xhr=new XMLHttpRequest,this.xhr.onload=function(b){200===a.xhr.status&&(a.manifest=a.xhr.responseText,a.loadMediaPlayer())},this.xhr.onerror=function(b){a.facade.logger.error(b);a.player.unload()},this.xhr.open("GET",this.getSrc()),this.xhr.send())};qa.prototype.loadMediaPlayer=function(){var a,b,c=
this;this.playWhenLoaded=this.data.loading=!0;this.unload();a=this.facade.getMediaElement();a.addEventListener("loadedmetadata",this.resumeHandlers.loadedmetadata);a.addEventListener("loadedmetadata",this.handlers.loadedmetadata);a.addEventListener("durationchange",this.handlers.durationchange);a.addEventListener("canplaythrough",this.handlers.canplaythrough);!0===this.facade.logger.enabled&&cast.player.api.setLoggerLevel(cast.player.api.LoggerLevel.DEBUG);this.host=new cast.player.api.Host({mediaElement:a,
url:this.getSrc()});this.host.updateManifestRequestInfo=function(a){a.url===c.getSrc()&&(a.skipRequest=!0,a.setResponse(c.manifest))};this.host.onError=function(a){c.facade.logger.error("Google Media Player Fatal Error - "+a);c.player.unload()};a=this.facade.retrieveProxy(q.NAME).getType();b=f.mimeTypes;switch(a){case b.m3u8:this.protocol=cast.player.api.CreateHlsStreamingProtocol(this.host);break;case b.mpd:this.protocol=cast.player.api.CreateDashStreamingProtocol(this.host);break;case b.ism:this.protocol=
cast.player.api.CreateSmoothStreamingProtocol(this.host)}null!=this.protocol?(this.player=new cast.player.api.Player(this.host),this.player.load(this.protocol,0)):this.facade.logger.error("Google Media Player Error: Could not create protocol")};qa.prototype.resumecomplete=function(){qa.__super__.resumecomplete.call(this)};var zd=function(){zd.__super__.constructor.call(this)};g(zd,ma);zd.prototype.execute=function(a){"chromecast"===this.applicationState.getPlaybackTarget()&&(this.facade.logger.debug("ChromeCastMediaChangeCommand"),
this.proxy.loadMedia())};var Jc=function(){Jc.__super__.constructor.call(this)};g(Jc,Xa);Jc.prototype.onRegister=function(){Jc.__super__.onRegister.call(this);this.sendNotification(d.ADD_APPLICATION_STATE,"chromecast-receiver")};var $a=function(){$a.__super__.constructor.call(this)};g($a,Xa);$a.prototype.componentName="chromecast";$a.prototype.controls=null;$a.prototype.onRegister=function(){$a.__super__.onRegister.call(this);this.controls=new ab};$a.prototype.registerOverlay=function(){};$a.prototype.listNotificationInterests=
function(){return[d.PLAYBACK_TARGET_CHANGE,d.CHANGE_PLAY_STATE]};$a.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAYBACK_TARGET_CHANGE:b=a.value;"chromecast"===b?this.facade.registerMediator(this.controls):this.facade.removeMediator(this.controls.getMediatorName());break;case d.CHANGE_PLAY_STATE:this.controls.setState(a)}};var ob=function(){ob.__super__.constructor.call(this)};g(ob,$a);ob.prototype.chromeCastButton=null;ob.prototype.onRegister=function(){ob.__super__.onRegister.call(this);
this.chromeCastButton=new hc;this.facade.registerMediator(this.chromeCastButton)};ob.prototype.listNotificationInterests=function(){return ob.__super__.listNotificationInterests.call(this).concat([Za.AVAILABILITY_CHANGE])};ob.prototype.handleNotification=function(a){var b;ob.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case Za.AVAILABILITY_CHANGE:!0===a?(this.sendNotification(d.ADD_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(d.ADD_CONTROL,this.chromeCastButton.getViewComponent())):
(this.sendNotification(d.REMOVE_CONTROL_STATE,"chromecast"),this.facade.player.sendNotification(d.REMOVE_CONTROL,this.chromeCastButton.getViewComponent()))}};var N=function(a){this.messageBus=a.messageBus||"urn:x-cast:com.akamai.amp.cast";N.__super__.constructor.call(this,a.receiver)};g(N,ga);N.NAME=O.NAME;N.prototype.defaults={shim:null,types:["application/x-mpegURL","application/dash+xml","application/vnd.ms-sstr+xml"]};N.prototype.messageBus=null;N.prototype.castReceiverManager=null;N.prototype.castMessageBus=
null;N.prototype.startTime=0;N.prototype.currentTime=0;N.prototype.boundHandler=null;N.prototype.amp=null;N.prototype.mediaManager=null;N.prototype.playbackCore=null;N.prototype.teardownTimeout=null;N.prototype.chromecastPlayer=null;N.prototype.initialize=function(){var a;N.__super__.initialize.call(this);this.sendNotification(d.INITIALIZED);a=new qa(this.getConfigurationData().types,this);this.facade.player.retrieveProxy(V.NAME).registerPlaybackCore(a)};N.prototype.ready=function(){!0===this.facade.logger.enabled&&
cast.receiver.logger.setLevelValue(cast.receiver.LoggerLevel.DEBUG);this.shim=Ia.getInstance();this.castReceiverManager=this.shim.castReceiverManager;this.castReceiverManager.onReady=this.castReceiverManager.onSystemVolumeChanged=this.castReceiverManager.onVisibilityChanged=this.logEvent.bind(this);this.castReceiverManager.onSenderConnected=this.onSenderConnected.bind(this);this.castReceiverManager.onSenderDisconnected=this.onSenderDisconnected.bind(this);this.amp=this.facade.player;this.chromecastPlayer=
this.shim.player;this.chromecastPlayer.registerPlayer(this.amp);this.mediaManager=this.shim.mediaManager;this.castMessageBus=this.shim.castMessageBuses[this.messageBus];this.castMessageBus.onMessage=this.onMessage.bind(this);this.amp.addEventListener("seeking",this.eventHandler.bind(this));this.amp.addEventListener("seeked",this.eventHandler.bind(this));this.amp.addEventListener("pause",this.startTeardownTimeout.bind(this,1200));this.amp.addEventListener("ended",this.startTeardownTimeout.bind(this,
300));this.amp.addEventListener("error",this.startTeardownTimeout.bind(this,300));this.amp.addEventListener("playing",this.stopTeardownTimeout.bind(this));this.amp.addEventListener("loadedmetadata",this.stopTeardownTimeout.bind(this));null!=this.amp.ads&&(this.amp.ads.addEventListener("breakstart",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("breakend",this.onBreakEnd.bind(this)),this.amp.ads.addEventListener("started",this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("ended",
this.dispatchEvent.bind(this,"ads")),this.amp.ads.addEventListener("companion",this.dispatchEvent.bind(this,"ads")));this.startTeardownTimeout(300)};N.prototype.onBreakEnd=function(a){this.dispatchEvent("ads",a);!0===this.amp.getEnded()&&this.startTeardownTimeout(300)};N.prototype.logEvent=function(a,b){null==a?a=b.type||"":null==b&&(b=a.data,a=b.type);this.facade.logger.log("[CHROMECAST] ",a,b)};N.prototype.onSenderConnected=function(a){this.logEvent("senderconnected",a);setTimeout(this.sendNotification.bind(this,
d.DISPATCH_EVENT,new H("senderconnected",a)),0)};N.prototype.onSenderDisconnected=function(a){this.logEvent("sender disconnected",a);0===this.castReceiverManager.getSenders().length&&a.reason===cast.receiver.system.DisconnectReason.REQUESTED_BY_SENDER&&this.teardown();setTimeout(this.sendNotification.bind(this,d.DISPATCH_EVENT,new H("senderdisconnected",a)),0)};N.prototype.onMessage=function(a){var b,c,e,f,g;this.logEvent("message from sender",a);try{if(e=a.data||a.message,null!=e&&(g=e.type,b=e.detail,
"string"===typeof b&&(b=JSON.parse(b)),null!=b)){switch(g){case "captioning.visibilitychange":c=[];!0===b.visibility&&c.push(0);this.chromecastPlayer.editTracksInfo({activeTrackIds:c});break;case "captioning.settingschange":f=new cast.receiver.media.TextTrackStyle;f.foregroundColor=b.fontColor;f.backgroundColor=b.backgroundColor;f.fontScale=b.size;f.windowColor=b.windowColor;f.fontFamily=b.fontFamily;f.edgeColor=b.edgeColor;f.edgeType=b.edgeType;this.chromecastPlayer.editTracksInfo({textTrackStyle:f});
break;case "stats.visibilitychange":this.amp.stats.setHidden(!b.visibility)}this.sendNotification(d.DISPATCH_EVENT,a)}}catch(h){this.error(h)}};N.prototype.onClose=function(a){this.logEvent("message channel closed",a)};N.prototype.eventHandler=function(a){var b;b={type:a.type};null!=a.detail&&(b.detail=a.detail);this.send(b)};N.prototype.dispatchEvent=function(a,b){this.send({type:"dispatchevent",detail:{target:a,event:{type:b.type,detail:b.detail}}})};N.prototype.send=function(a){this.castMessageBus.broadcast(a)};
N.prototype.startTeardownTimeout=function(a){this.stopTeardownTimeout();this.teardownTimeout=setTimeout(this.teardown.bind(this),1E3*a)};N.prototype.stopTeardownTimeout=function(){clearTimeout(this.teardownTimeout)};N.prototype.teardown=function(){window.close()};var Ad=function(){Ad.__super__.constructor.call(this)};g(Ad,ma);Ad.prototype.execute=function(a){var b;"function"===typeof(b=this.proxy).setFeed&&b.setFeed(a.getBody())};var Kc=function(){Kc.__super__.constructor.call(this)};g(Kc,ma);Kc.prototype.execute=
function(a){this.facade.logger.debug("ChromeCastSeekCommand");this.plugin.setCurrentTime(a.getBody())};var Ab=function(){Ab.__super__.constructor.call(this)};g(Ab,pa);Ab.prototype.componentName="context-menu";Ab.prototype.contextMenu=null;Ab.prototype.onRegister=function(){var a=this;Ab.__super__.onRegister.call(this);l.create(this.facade.player.viewComponent,l.CONTEXTMENU,function(b){b.preventDefault();a.contextMenuHandler(b);return!1})};Ab.prototype.contextMenuHandler=function(a){var b,c,d=this;
this.contextMenu&&this.removeContextMenu();this.contextMenu=va.create("context-menu",document.body,"ul");va.create("context-item",this.contextMenu,"li",this.facade.player.getVersion());"undefined"!==typeof akamaiGetViewerId&&null!==akamaiGetViewerId&&(b=akamaiGetViewerId(),c=va.create("context-item",this.contextMenu,"li",""+(this.localizationManager.getString("MSG_VIEWER_ID")||"Viewer ID: ")),va.create("selectable",c,"span",""+(null!=b?b:"N/A")));this.contextMenu.style.top=a.pageY+"px";this.contextMenu.style.left=
a.pageX+"px";l.create(document.body,l.CLICK,function(a){if(/selectable/.test(a.target.className))return!1;d.removeContextMenu(a);return!1})};Ab.prototype.removeContextMenu=function(a){try{l.clear(document.body,l.CLICK),document.body.removeChild(this.contextMenu),this.contextMenu=null}catch(b){}};var pb=function(){pb.__super__.constructor.call(this)};g(pb,pa);pb.prototype.componentName="title-bar";pb.prototype.title=null;pb.prototype.description=null;pb.prototype.onRegister=function(){pb.__super__.onRegister.call(this);
this.title=this.create("title-text");this.description=this.create("description-text")};pb.prototype.listNotificationInterests=function(){return[d.CHANGE_MEDIA]};pb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.CHANGE_MEDIA:a=a.getBody(),b=this.facade.player.evaluateBinding(a.title),null==b||""===b||"undefined"===b?this.classList.add("hidden"):(this.title.innerHTML=b,this.description.innerHTML=a.description?a.description:"",this.classList.remove("hidden"))}};var qb=function(){qb.__super__.constructor.call(this)};
g(qb,pa);qb.prototype.componentName="replay";qb.prototype.replay=null;qb.prototype.icon=null;qb.prototype.label=null;qb.prototype.onRegister=function(){qb.__super__.onRegister.call(this);this.replay=this.create("replay-button");this.replay.onclick=this.onclick.bind(this);this.icon=this.create("replay-icon",this.replay);this.label=this.createText("replay-label",this.localizationManager.getString(u.MSG_REPLAY),this.replay)};qb.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.REPLAY);
return!1};var Bb=function(){Bb.__super__.constructor.call(this)};g(Bb,Na);Bb.prototype.message=null;Bb.prototype.componentName="error";Bb.prototype.onRegister=function(){Bb.__super__.onRegister.call(this);this.message=this.create("error-message")};Bb.prototype.listNotificationInterests=function(){return[d.ERROR]};Bb.prototype.handleNotification=function(a){var b;switch(a.getName()){case d.ERROR:a=a.getBody();b=/^(Error: )/.test(a.toString())?"":"Error: ";switch(a.code){case MediaError.MEDIA_ERR_ABORTED:b+=
"Media was aborted.";break;case MediaError.MEDIA_ERR_DECODE:b+="Decode Error.";break;case MediaError.MEDIA_ERR_NETWORK:b+="Network Error.";break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:b+="Source not supported.";break;default:b+=a}this.message.textContent=b}};var Bd=function(){Bd.__super__.constructor.call(this)};g(Bd,pa);Bd.prototype.componentName="loading";var Jb=function(){Jb.__super__.constructor.call(this)};g(Jb,pa);Jb.prototype.componentName="waiting";Jb.prototype.bar=null;Jb.prototype.text=
null;Jb.prototype.onRegister=function(){Jb.__super__.onRegister.call(this);this.bar=this.create("waiting-bar");this.text=this.createText("waiting-text",this.localizationManager.getString(u.MSG_BUFFERING))};var bb=function(){bb.__super__.constructor.call(this)};g(bb,pa);bb.prototype.componentName="poster";bb.prototype.poster=null;bb.prototype.clickHandler=null;bb.prototype.onRegister=function(){bb.__super__.onRegister.call(this);this.poster=this.create("poster-content");this.poster.onclick=this.onclick.bind(this)};
bb.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(Ha.TOGGLE_PLAY_PAUSE,!0);return!1};bb.prototype.listNotificationInterests=function(){return[d.SET_MEDIA]};bb.prototype.handleNotification=function(a){switch(a.getName()){case d.SET_MEDIA:a=a.getBody().poster,a=null!=a&&""!==a?'\x3cimg src\x3d"'+a+'" class\x3d"'+this.cssPrefix+'poster-image" /\x3e':"",this.poster.innerHTML=a}};var Kb=function(){Kb.__super__.constructor.call(this)};g(Kb,pa);Kb.prototype.componentName=
"end-slate";Kb.prototype.onRegister=function(){null!=this.facade.config.endslate&&Kb.__super__.onRegister.call(this)};Kb.prototype.listNotificationInterests=function(){return[d.MEDIA_CHANGE]};Kb.prototype.handleNotification=function(a){var b,c,e;switch(a.getName()){case d.MEDIA_CHANGE:c=a.getBody(),b=this.facade.config.endslate,e=this.getViewComponent(),a="",null!=b&&(b=!0===b.usePoster?c.poster:b.url,null!=b&&""!==b&&(a='\x3cimg src\x3d"'+b+'" class\x3d"end-slate-image" /\x3e')),null!=e&&(e.innerHTML=
a)}};var na=function(a,b,c,d,f){this.labelText=a;this.onclick=null!=f?f:this.onclick;na.__super__.constructor.call(this,d,null,b,c)};g(na,P);na.prototype.componentType="button";na.prototype.icon=null;na.prototype.label=null;na.prototype.onclick=null;na.prototype.labelText=null;na.prototype.onRegister=function(){na.__super__.onRegister.call(this);this.icon=this.create("icon");this.createLabel(this.labelText)};na.prototype.createLabel=function(a){null!=a&&(this.label=this.createText("label",a))};na.prototype.setLabel=
function(a){null==this.label?this.createLabel(a):this.label.textContent=a;return a};na.prototype.getLabel=function(){var a;return null!=(a=this.label)?a.textContent:void 0};var Lb=function(a){Lb.__super__.constructor.call(this,null,null,a)};g(Lb,P);Lb.prototype.componentName="logo";Lb.prototype.url=null;Lb.prototype.onRegister=function(){Lb.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};Lb.prototype.onclick=function(a){a.stopImmediatePropagation();
this.sendNotification(d.DISPATCH_EVENT,new H("controlsLogoClicked"));return!1};var rb=function(a){rb.__super__.constructor.call(this,null,a)};g(rb,na);rb.prototype.componentName="full-screen";rb.prototype.onRegister=function(){rb.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,this.componentName+"-enabled")};rb.prototype.onclick=function(a){a.stopImmediatePropagation();this.sendNotification(d.TOGGLE_FULL_SCREEN);return!1};rb.prototype.listNotificationInterests=function(){return[d.DISABLE_FULL_SCREEN,
d.ENABLE_FULL_SCREEN]};rb.prototype.handleNotification=function(a){var b;b=a.getName();a.getBody();switch(b){case d.DISABLE_FULL_SCREEN:this.setDisabled(!0);break;case d.ENABLE_FULL_SCREEN:this.setDisabled(!1)}};var E=function(a,b){this.direction=null!=b?b:this.direction;E.__super__.constructor.call(this,null,null,a)};g(E,P);E.prototype.componentType="slider";E.prototype.trackView=null;E.prototype.handleView=null;E.prototype.valueView=null;E.prototype.startCapView=null;E.prototype.endCapView=null;
E.prototype.clickView=null;E.prototype.min=0;E.prototype.max=1;E.prototype.value=0;E.prototype.draggable=!1;E.prototype.dragging=!1;E.prototype.draggingInterval=null;E.prototype.draggingDelay=250;E.prototype.direction="vertical";E.prototype.pressHandler=null;E.prototype.releaseHandler=null;E.prototype.moveHandler=null;E.prototype.clickHandler=null;E.prototype.onRegister=function(){E.__super__.onRegister.call(this);this.startCapView=this.create("start-cap");this.endCapView=this.create("end-cap");this.trackView=
this.create("track");this.valueView=this.create("value",this.trackView);this.clickView=this.create("click",this.trackView);this.handleView=this.create("handle",this.trackView);this.pressHandler=l.create(this.handleView,l.PRESS,this.handlePressHandler.bind(this));this.releaseHandler=l.create(window,l.RELEASE,this.handleReleaseHandler.bind(this));this.releaseHandler.unbind();this.moveHandler=l.create(window,l.MOVE,this.updateHandler.bind(this,this.draggable));this.moveHandler.unbind();this.clickHandler=
l.create(this.clickView,l.CLICK,this.updateHandler.bind(this,!0))};E.prototype.setDirection=function(a){return this.direction=a};E.prototype.getDirection=function(){return this.direction};E.prototype.setValue=function(a){this.updateValue(a);this.valueChanged();return a};E.prototype.getValue=function(){return this.value};E.prototype.setDragging=function(a){if(a!==this.dragging)return this.dragging=a,this.sendNotification(d.IS_USER_ACTIVE,this.dragging),!0===this.dragging?this.draggingInterval=setInterval(this.valueChanged.bind(this),
this.draggingDelay):(clearInterval(this.draggingInterval),this.valueChanged()),this.dragging};E.prototype.getDragging=function(){return this.dragging};E.prototype.setDraggable=function(a){if(a!==this.draggable)return this.draggable=a};E.prototype.getDraggable=function(){return this.draggable};E.prototype.updateValue=function(a,b){var c;null==b&&(b=!1);if(a!==this.value||!1!==b)this.value=f.clamp(a,this.min,this.max),"vertical"===this.direction?(a="height",c="bottom"):(a="width",c="left"),this.valueView.style[a]=
this.handleView.style[c]=""+100*this.value+"%"};E.prototype.calculateValue=function(a){var b,c;b=a.pageX-(window.scrollX||window.pageXOffset)||a.targetTouches[0].pageX-window.scrollX;a=a.pageY-(window.scrollY||window.pageYOffset)||a.targetTouches[0].pageY-window.scrollY;c=f.getElementOffset(this.viewComponent);b="vertical"===this.getDirection()?1-(a-c.top)/c.height:(b-c.left)/c.width;return f.clamp(b,0,1)};E.prototype.blockEvent=function(a){null!=a&&(a.stopImmediatePropagation(),a.preventDefault())};
E.prototype.handlePressHandler=function(a){this.moveHandler.bind();this.releaseHandler.bind();this.clickHandler.unbind();this.setDragging(!0);this.blockEvent(a);return!1};E.prototype.handleReleaseHandler=function(a){this.moveHandler.unbind();this.releaseHandler.unbind();this.clickHandler.bind();this.setDragging(!1);this.blockEvent(a);return!1};E.prototype.updateHandler=function(a,b){var c;this.blockEvent(b);c=/click/.test(b.type)&&this.classList.contains("scrubbing")?this.getValue():this.calculateValue(b);
!0===a?this.setValue(c):this.updateValue(c);return!1};E.prototype.valueChanged=function(){};var Pa={ADD_PANEL:"addPanel",REMOVE_PANEL:"removePanel",OPEN_PANEL:"openPanel",CLOSE_PANEL:"closePanel",TOGGLE_PANEL:"togglePanel",CLOSE_ALL_PANELS:"closeAllPanels"},Fa=function(a){Fa.__super__.constructor.call(this,null,null,a)};g(Fa,P);Fa.prototype.componentName="time-display";Fa.prototype.duration=null;Fa.prototype.currentTimeDisplay=null;Fa.prototype.separatorDisplay=null;Fa.prototype.durationDisplay=null;
Fa.prototype.liveDisplay=null;Fa.prototype.onRegister=function(){Fa.__super__.onRegister.call(this);this.liveDisplay=this.createText("live-display",this.localizationManager.getString(u.MSG_LIVE));this.currentTimeDisplay=this.createText("current-time-display","00:00",this,"span");this.separatorDisplay=this.createText("separator-display",this.localizationManager.getString(u.MSG_TIME_SEPARATOR),this,"span");this.durationDisplay=this.createText("duration-display","00:00",this,"span")};Fa.prototype.listNotificationInterests=
function(){return[d.PLAY,d.DURATION_CHANGE,d.ENDED,d.DISPLAY_TIME]};Fa.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.PLAY:this.updateDuration();break;case d.DURATION_CHANGE:this.updateCurrentTime();this.updateDuration(a);break;case d.ENDED:this.updateCurrentTime(this.duration);this.updateDuration();break;case d.DISPLAY_TIME:this.updateCurrentTime(a.currentTime,a.duration),this.updateDuration(a.duration)}};Fa.prototype.updateCurrentTime=function(a,b){null!=
a&&(this.currentTime=a);null!=b&&(this.duration=b);this.currentTimeDisplay.textContent=f.formatTimecode(this.currentTime,this.duration)};Fa.prototype.updateDuration=function(a){null!=a&&(this.duration=a);this.durationDisplay.textContent=f.formatTimecode(this.duration)};var Cb=function(a){Cb.__super__.constructor.call(this,null,a)};g(Cb,na);Cb.prototype.componentName="go-live";Cb.prototype.onRegister=function(){Cb.__super__.onRegister.call(this);this.createLabel(this.localizationManager.getString("MSG_LIVE"))};
Cb.prototype.listNotificationInterests=function(){return[d.IS_LIVE]};Cb.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case d.IS_LIVE:this.setLabel(!0===a?this.localizationManager.getString("MSG_LIVE"):this.localizationManager.getString("MSG_GO_LIVE"))}};Cb.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(Ha.GO_LIVE);return!1};var ta=function(){ta.__super__.constructor.call(this)};g(ta,pa);ta.prototype.duration=
null;ta.prototype.currentTime=null;ta.prototype.container=null;ta.prototype.banner=null;ta.prototype.text=null;ta.prototype.adText=null;ta.prototype.bg=null;ta.prototype.totalAds=null;ta.prototype.adPosition=null;ta.prototype.adContainerRequired=!0;ta.prototype.componentName="ads";ta.prototype.onRegister=function(){ta.__super__.onRegister.call(this);this.adContainerRequired&&(this.container=this.create("ad-container"));this.banner=this.create("ad-banner");this.bg=this.create("ad-text-bg",this.banner);
this.adText=this.create("ad-text-title",this.banner);this.text=this.create("ad-text",this.banner);this.adContainerRequired&&(this.viewComponent.container=this.container);this.sendNotification(fa.AD_CONTAINER_CREATED,this.viewComponent)};ta.prototype.listNotificationInterests=function(){return[fa.BREAK_START,fa.BREAK_END,fa.AD_TIME_REMAINING,fa.AD_STARTED]};ta.prototype.handleNotification=function(a){var b;switch(a.getName()){case fa.BREAK_END:this.text.textContent="";this.adText.textContent="";break;
case fa.AD_TIME_REMAINING:a=Math.round(a.getBody());b=null!=this.totalAds&&0<this.totalAds&&null!=this.adPosition&&this.adPosition!==this.totalAds?0<a?""+this.localizationManager.getString(u.MSG_NEXT_AD)+a+" "+this.localizationManager.getString(u.MSG_SECONDS):"":0<a?""+this.localizationManager.getString(u.MSG_NEXT_VIDEO)+a+" "+this.localizationManager.getString(u.MSG_SECONDS):"";this.text.textContent=b;break;case fa.AD_STARTED:a=a.getBody(),this.totalAds=a.totalAds,this.adPosition=a.position,b="Ad "+
a.position+" of "+a.totalAds,null!=a.position&&null!=a.totalAds&&1<=a.totalAds&&(this.adText.textContent=b)}};var Ja=function(a){Ja.__super__.constructor.call(this,null,null,null,a,onclick)};g(Ja,na);Ja.prototype.panel=null;Ja.prototype.timeout=null;Ja.prototype.closePanelDelayed=null;Ja.prototype.onRegister=function(){this.closePanelDelayed=this.delayedClosePanel.bind(this);"desktop"===f.getDevice()?(this.onmouseleave=this.closePanelDelayed,this.onmouseenter=this.openPanel,this.onclick=this.clickHandler):
this.onclick=this.togglePanel;Ja.__super__.onRegister.call(this);this.sendNotification(d.ADD_CONTROL_STATE,""+this.componentName+"-enabled");this.sendNotification(d.ADD_CONTROL,this.viewComponent)};Ja.prototype.openPanel=function(){clearTimeout(this.timeout);this.sendNotification(Pa.OPEN_PANEL,this.panel);this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed)};Ja.prototype.closePanel=function(){f.isMouseOverElement(this.panel.viewComponent)||f.isMouseOverElement(this.viewComponent)||
this.facade.player.retrieveProxy(v.NAME).getIsUserActive()||(this.panel.viewComponent.addEventListener("mouseleave",this.closePanelDelayed),this.sendNotification(Pa.CLOSE_PANEL,this.panel))};Ja.prototype.delayedClosePanel=function(){this.timeout=setTimeout(this.closePanel.bind(this),350)};Ja.prototype.togglePanel=function(a){a.stopImmediatePropagation();this.sendNotification(Pa.TOGGLE_PANEL,this.panel)};Ja.prototype.clickPanel=function(){};var Sb=function(a){Sb.__super__.constructor.call(this,a,null,
null,null)};g(Sb,P);Sb.prototype.componentType="panel";Sb.prototype.control=null;Sb.prototype.onRegister=function(){Sb.__super__.onRegister.call(this);this.sendNotification(Pa.ADD_PANEL,this)};var Mb=function(a){Mb.__super__.constructor.call(this,a)};g(Mb,Xa);Mb.prototype.componentName="captioning";Mb.prototype.captionButton=null;Mb.prototype.onRegister=function(){var a;this.captioning=this.facade.player.captioning;a=new na(this.localizationManager.getString(u.MSG_CC),this.viewComponent,null,"caption",
this.onclick.bind(this));this.facade.registerMediator(a);this.captionButton=a.getViewComponent();this.sendNotification(d.ADD_CONTROL,this.captionButton);Mb.__super__.onRegister.call(this)};Mb.prototype.onclick=function(a){var b;a.stopImmediatePropagation();"embedded"===(null!=(b=this.captioning.getTrack())?b.type:void 0)?this.captioning.setHidden(!this.captioning.getHidden()):a.currentTarget===this.captionButton&&this.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,this.captioning.getHidden());return!1};
var Z=function(a){this.list={font:null,language:null,edge:null,size:null,scroll:null};this.picker={color:null,background:null,edge:null,window:null};this.toggle={ON:null,OFF:null,disabled:!1};this.captioningObject={"default":{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"small",scroll:"popout",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},appliedStyleText:"",
selected:{fontFamily:null,size:null,fontColor:null,edgeType:null,edgeColor:null,backgroundColor:null,windowColor:null},preset1:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset2:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",
edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0)"},preset3:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,255,1)",edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 0)",backgroundColor:"rgba(0,0,0,1)",windowColor:"rgba(0,0,0,0)"},preset4:{fontFamily:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",size:"medium",fontColor:"rgba(255,255,0,1)",
edgeType:"text-shadow: 0px 0px 0px",edgeColor:"rgba(0, 0, 0, 1)",backgroundColor:"rgba(0,0,0,0)",windowColor:"rgba(0,0,0,0.5)"},instance:null};Z.__super__.constructor.call(this,null,null,a,null)};g(Z,ec);Z.prototype.componentName="captioning-settings";Z.prototype.settingsUiVisible=!1;Z.prototype.captionningStyle=null;Z.prototype.swatchColorCurr=null;Z.prototype.swatchOpacityCurr=null;Z.prototype.colorPicker=null;Z.prototype.colorPickerOpacity=null;Z.prototype.advancedSettingContainer=null;Z.prototype.scroll=
{type:"popout",typeSpeed:5,lines:2,scrollTimer:[],speed:10,popout:null,rollup:null,painton:null};Z.prototype.onRegister=function(){var a,b,c,d,f,g,h=this;Z.__super__.onRegister.call(this);this.captioning=this.facade.player.captioning;c=this.create("captioning-titlebar");this.create("captioning-title",c,"span",this.localizationManager.getString(u.MSG_CC_TITLE));this.toggle.OFF=this.create("captioning-toggle-btn",c,"div","OFF");this.toggle.ON=this.create("captioning-toggle-btn",c,"div","ON");l.create(this.toggle.ON,
l.CLICK,function(a){a.stopImmediatePropagation();h.toggle.disabled||h.toggleButtonHandler(!0);return!1});this.toggle.disabled||ja.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix);l.create(this.toggle.OFF,l.CLICK,function(a){a.stopImmediatePropagation();h.toggle.disabled||h.toggleButtonHandler(!1);return!1});c=this.create("captioning-row");this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_LANGUAGE));this.list.language=this.create("captioning-dropdown",
c,"select");this.languageListPopulate();l.create(this.list.language,"change",function(a){var b;a.stopImmediatePropagation();b="None"!==a.target.selectedValue;h.captioining.setHidden(!b);b&&h.captioning.setTrack(h.captioning.selectTrackByIndex(a.target.selectedIndex));return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_PRESETS));a=this.create(["captioning-preset","captioning-preset1"],c,null,"Aa");b=this.create(["captioning-preset","captioning-preset2"],c,
null,"Aa");g=this.create(["captioning-preset","captioning-preset3"],c,null,"Aa");c=this.create(["captioning-preset","captioning-preset4"],c,null,"Aa");l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset1);h.applyCaptioningStyle();return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset2);h.applyCaptioningStyle();return!1});l.create(g,l.CLICK,
function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset3);h.applyCaptioningStyle();return!1});l.create(c,l.CLICK,function(a){a.stopImmediatePropagation();h.captioningObject.selected=h.cloneObject(h.captioningObject.preset4);h.applyCaptioningStyle();return!1});this.advancedSettingContainer=this.create("captioning-advanced-container");c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_FONT));
this.list.font=this.create("captioning-dropdown",c,"select");this.create(null,this.list.font,"option","Monospaced Serif").value="'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace";this.create(null,this.list.font,"option","Proportional Serif").value="'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif";this.create(null,this.list.font,"option","Monospaced Sans-Serif").value="'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace";this.create(null,
this.list.font,"option","Proportional Sans-Serif").value="Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif";this.create(null,this.list.font,"option","Casual").value="'Comic Sans MS', Impact, Handlee, fantasy";this.create(null,this.list.font,"option","Cursive").value="'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive";this.create(null,this.list.font,"option","Small Capitals").value="'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps";
l.create(this.list.font,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.fontFamily=a.target.value;h.applyCaptioningStyle(!1);return!1});c.appendChild(this.list.font);this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_EDGE));this.list.edge=this.create("captioning-dropdown",c,"select");this.create(null,this.list.edge,"option","None").value="text-shadow: 0px 0px 0px";this.create(null,this.list.edge,"option","Depressed").value="text-shadow: 0px 1px 0px";
this.create(null,this.list.edge,"option","Left Drop Shadow").value="text-shadow: -3px 3px 2px";this.create(null,this.list.edge,"option","Raised").value="text-shadow: 0px 1px 1px";this.create(null,this.list.edge,"option","Right Drop Shadow").value="text-shadow: 3px 3px 2px";this.create(null,this.list.edge,"option","Uniform").value="text-shadow: 0px 0px 4px";l.create(this.list.edge,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.edgeType=a.target.value;h.applyCaptioningStyle(!1);
return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_SIZE));this.list.size=this.create("captioning-dropdown",c,"select");this.create(null,this.list.size,"option","Extra Small").value="x-small";this.create(null,this.list.size,"option","Small").value="small";this.create(null,this.list.size,"option","Medium").value="medium";this.create(null,this.list.size,"option","Large").value="large";this.create(null,
this.list.size,"option","Extra Large").value="x-large";this.list.size.selectedIndex=1;l.create(this.list.size,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.size=a.target.value;h.applyCaptioningStyle(!1);return!1});this.create("captioning-label",c,"span",this.localizationManager.getString(u.MSG_CC_SCROLL));this.list.scroll=this.create("captioning-dropdown",c,"select");this.create(null,this.list.scroll,"option","Pop-Out").value="popout";this.create(null,this.list.scroll,
"option","Roll-On").value="rollon";this.create(null,this.list.scroll,"option","Paint-On").value="painton";l.create(this.list.scroll,"change",function(a){a.stopImmediatePropagation();h.captioningObject.selected.scroll=h.scroll.type=a.target.value;return!1});c=this.create("captioning-row",this.advancedSettingContainer);this.create("captioning-label-small",c,"span",this.localizationManager.getString(u.MSG_CC_COLOR));this.picker.color=this.create("captioning-color-picker",c);this.picker.color.style.backgroundColor=
this.captioningObject["default"].fontColor;l.create(this.picker.color,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="152px",h.colorPicker.name="fontColor",h.captioningObject.instance=h.picker.color,-1!==h.picker.color.style.backgroundColor.indexOf("rgba")&&
(b=h.picker.color.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(u.MSG_CC_BACKGROUND));this.picker.background=this.create("captioning-color-picker",c);this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor;l.create(this.picker.background,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();
h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="264px",h.colorPicker.name="backgroundColor",h.captioningObject.instance=h.picker.background,-1!==h.picker.background.style.backgroundColor.indexOf("rgba")&&(b=h.picker.background.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:
1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(u.MSG_CC_EDGE));this.picker.edge=this.create("captioning-color-picker",c);this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor;l.create(this.picker.edge,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&
(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="212px",h.colorPicker.name="edgeColor",h.captioningObject.instance=h.picker.edge,-1!==h.picker.edge.style.backgroundColor.indexOf("rgba")&&(b=h.picker.edge.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});this.create("captioning-label-small",c,"span",this.localizationManager.getString(u.MSG_CC_WINDOW));this.picker.window=this.create("captioning-color-picker",c);this.picker.window.style.backgroundColor=
this.captioningObject["default"].windowColor;l.create(this.picker.window,l.CLICK,function(a){var b;a.stopImmediatePropagation();h.colorPickerHandler();h.colorPicker.style.display="block"===h.colorPicker.style.display?"none":"block";"block"===h.colorPicker.style.display&&(null!=(a=h.swatchColorCurr)&&(a.style.borderColor="rgba(0,0,0,0.3)"),h.colorPicker.style.left="300px",h.colorPicker.name="windowColor",h.captioningObject.instance=h.picker.window,-1!==h.picker.window.style.backgroundColor.indexOf("rgba")&&
(b=h.picker.window.style.backgroundColor.replace(/^rgba?\(|\s+|\)$/g,"").split(",")[3]),h.colorPickerOpacity.value=null!=b?b:1);return!1});c=this.create(["caption-text","caption-text-preview"]);this.create(null,c,"p",this.localizationManager.getString(u.MSG_CC_PREVIEW_TEXT));c=this.create("captioning-footer-container");a=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(u.MSG_CC_APPLY));b=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(u.MSG_CC_CANCEL));
g=this.create("captioning-footer-button",c,"div",this.localizationManager.getString(u.MSG_CC_RESET));0<=this.captioning.getViewComponent().clientWidth&&(c=this.create("captioning-advanced-button",c,"div",this.localizationManager.getString(u.MSG_CC_SHOW_ADVANCED)),l.create(c,l.CLICK,function(a){a.stopImmediatePropagation();"block"===h.advancedSettingContainer.style.display?(a.target.innerHTML=h.localizationManager.getString(u.MSG_CC_SHOW_ADVANCED),h.advancedSettingContainer.style.display="none",h.colorPicker.style.display=
"none"):(a.target.innerHTML=h.localizationManager.getString(u.MSG_CC_HIDE_ADVANCED),h.advancedSettingContainer.style.display="block");return!1}));l.create(a,l.CLICK,function(a){a.stopImmediatePropagation();h.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,h.settingsUiVisible);h.applyCaptioningStyle(!1,!0);h.sendNotification(w.SETTINGS_CHANGE,h.captioningObject.selected);return!1});l.create(b,l.CLICK,function(a){a.stopImmediatePropagation();h.sendNotification(w.SETTINGS_VISIBILITY_CHANGE,h.settingsUiVisible);
return!1});l.create(g,l.CLICK,function(a){a.stopImmediatePropagation();h.colorPicker.style.display="none";h.applyCaptioningStyle(!0);return!1});this.captionningStyle=this.create(null,document.getElementsByTagName("head")[0],"style");this.captionningStyle.type="text/css";c="#000000 #660000 #990000 #ff0000 #000066 #660066 #990066 #ff0066 #006600 #666600 #996600 #ff6600 #006666 #666666 #996666 #ff6666 #009900 #669966 #999900 #ff9900 #009966 #669966 #999966 #ff9966 #00ff00 #66ff00 #99ff00 #ffff00 #00ff66 #66ff66 #99ff66 #ffff66 #000099 #660099 #990099 #ff0099 #0000ff #6600ff #9900ff #ff00ff #006699 #666699 #996699 #ff6699 #0066ff #6666ff #9966ff #ff66ff #009999 #669999 #999999 #ff9999 #0099ff #6699ff #9999ff #ff99ff #0099ff #66ff99 #99ff99 #ffff99 #00ffff #66ffff #99ffff #ffffff".split(" ");
this.colorPicker=this.create("colorpicker-palette",this.viewComponent.parentElement);a=this.create("colorpicker-swatch",!1,null,"\x26nbsp;");b=0;for(g=c.length;b<g;b++)d=c[b],a.style.backgroundColor=d,d=a.cloneNode(),l.create(d,l.CLICK,function(a){a.stopImmediatePropagation();null!==h.swatchColorCurr&&(h.swatchColorCurr.style.borderColor="rgba(0,0,0,0.3)");h.swatchColorCurr=a.target;h.swatchColorCurr.style.borderColor="rgba(255, 50, 50, 1)";h.captioningObject.instance.style.backgroundColor=h.captioningObject.selected[h.colorPicker.name]=
h.toRGBA(a.target.style.backgroundColor);h.applyCaptioningStyle(!1);return!1}),this.colorPicker.appendChild(d);this.create("opacity-label",this.colorPicker,"span",this.localizationManager.getString(u.MSG_CC_OPACITY));this.colorPickerOpacity=this.create("colorpicker-slider",this.colorPicker,"input");this.colorPickerOpacity.type="range";this.colorPickerOpacity.min=0;this.colorPickerOpacity.max=1;this.colorPickerOpacity.step=0.1;this.colorPickerOpacity.value=1;l.create(this.colorPickerOpacity,"change",
function(a){a.stopImmediatePropagation();h.captioningObject.instance.style.backgroundColor=h.captioningObject.selected[h.colorPicker.name]=h.toRGBA(h.captioningObject.instance.style.backgroundColor);h.applyCaptioningStyle(!1);return!1});this.swatchOpacityCurr=this.colorPickerOpacity;try{null!=localStorage.getItem(Ob.PREFIX+"captioningDefault")?(this.captioningObject.selected=JSON.parse(localStorage.getItem(Ob.PREFIX+"captioningDefault")),this.applyCaptioningStyle(!1,!this.captioning.getHidden())):
(f=!(null!=this.captioning.config.style||"undefined"!==this.captioning.config.style),f||(this.captioningObject.selected=this.cloneObject(this.captioning.config.style)),this.applyCaptioningStyle(f))}catch(m){}this.setSettings(0<Object.keys(this.captioningObject.selected).length?this.captioningObject.selected:this.captioningObject["default"]);this.toggleButtonHandler(!this.captioning.getHidden(),!1)};Z.prototype.toRGBA=function(a){a=a.replace(/^rgba?\(|\s+|\)$/g,"").split(",");return"rgba("+a[0]+","+
a[1]+","+a[2]+","+this.swatchOpacityCurr.value+")"};Z.prototype.onScrollListChange=function(a){var b;null!=a&&(this.captioningObject.selected.scroll=this.scroll.type=a);this.setSettings({scroll:this.scroll.type});try{null!=(null!=(b=this.captioning.proxy.renderer)?b.viewComponent:void 0)&&("painton"===this.scroll.type?ja.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):ja.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent))}catch(c){this.facade.logger.error("AMP Captioning Error",
c)}};Z.prototype.languageListPopulate=function(){var a,b,c,d,f,g;c=this.captioning.getTracks();if(null!=c){this.list.language.innerHTML="";d=0;for(f=c.length;d<f;d++)b=c[d],a=b.language,a=this.facade.player.retrieveProxy(T.NAME).getLanguageString(a),null!=a&&""!==a&&(this.create(null,this.list.language,"option",a).value=b.language);this.toggle.disabled=0===this.list.language.childElementCount;this.toggle.disabled&&this.create(null,this.list.language,"option","None");this.list.language.value=null!=
(g=this.captioning.getTrack())?g.language:void 0}};Z.prototype.colorPickerHandler=function(a){var b=this;null==a&&(a=!1);if(a)return l.unbind(document,l.CLICK);l.create(document,l.CLICK,function(a){a.stopImmediatePropagation();b.colorPickerHandler(!0);"akamai-colorpicker-palette"!==a.target.className&&"akamai-opacity-label"!==a.target.className&&"akamai-colorpicker-slider"!==a.target.className&&"none"!==b.colorPicker.style.display&&(b.colorPicker.style.display="none");return!1})};Z.prototype.cloneObject=
function(a){var b,c;b={};for(c in a)b[c]=a[c];return b};Z.prototype.applyCaptioningStyle=function(a,b,c){var d,f,g,h,l,m,n,p,q;null==a&&(a=!1);null==b&&(b=!1);null==c&&(c=!1);a?(this.captioningObject.selected=this.cloneObject(this.captioningObject["default"]),this.list.font.value=this.captioningObject["default"].fontFamily,this.list.edge.value=null!=this.captioningObject["default"].edgeType?this.captioningObject["default"].edgeType:"text-shadow: 0px 0px 0px",this.list.size.value=this.captioningObject["default"].size,
this.list.scroll.value=this.captioningObject["default"].scroll,this.picker.color.style.backgroundColor=this.captioningObject["default"].fontColor,this.picker.background.style.backgroundColor=this.captioningObject["default"].backgroundColor,this.picker.edge.style.backgroundColor=this.captioningObject["default"].edgeColor,this.picker.window.style.backgroundColor=this.captioningObject["default"].windowColor):(null==this.captioningObject.selected.fontFamily||c||(this.list.font.value=this.captioningObject.selected.fontFamily),
this.list.edge.value=null!=this.captioningObject.selected.edgeType?this.captioningObject.selected.edgeType:"text-shadow: 0px 0px 0px",null!=this.captioningObject.selected.size&&(this.list.size.value=this.captioningObject.selected.size),null!=this.captioningObject.selected.scroll?this.list.scroll.value=this.captioningObject.selected.scroll:this.captioningObject.selected.scroll=this.list.scroll.value,this.picker.color.style.backgroundColor=this.captioningObject.selected.fontColor,null!=this.captioningObject.selected.backgroundColor&&
(this.picker.background.style.backgroundColor=this.captioningObject.selected.backgroundColor),null!=this.captioningObject.selected.edgeColor&&(this.picker.edge.style.backgroundColor=this.captioningObject.selected.edgeColor),null!=this.captioningObject.selected.windowColor&&(this.picker.window.style.backgroundColor=this.captioningObject.selected.windowColor));l="font-family: "+(a?this.captioningObject["default"].fontFamily:c?this.captioningObject.selected.fontFamily:this.list.font.value)+" !important;";
h=(a?this.captioningObject["default"].edgeType+this.captioningObject["default"].edgeColor:this.list.edge.value+" "+this.picker.edge.style.backgroundColor)+" !important;";m="font-size: "+(a?this.captioningObject["default"].size:this.list.size.value)+" !important;";f="color: "+(a?this.captioningObject["default"].fontColor:this.picker.color.style.backgroundColor)+" !important;";d="background-color: "+(a?this.captioningObject["default"].backgroundColor:this.picker.background.style.backgroundColor)+" !important;";
p="background-color: "+(a?this.captioningObject["default"].windowColor:this.picker.window.style.backgroundColor)+" !important;";g="line-height:2.2em;";q=p.match(/rgba\([^)]+\)/g);null!=q&&q instanceof Array&&0<q.length&&(g=0===Number(q[0].replace(/^.*, (.+)\)/,"$1"))?"":g);if(b){this.onScrollListChange();n=this.facade.player.viewComponent.id;this.captionningStyle.innerHTML=this.captioningObject.appliedStyleText="#"+n+" .akamai-caption-text { "+l+m+h+p+" } #"+n+" .akamai-caption-text p { "+f+d+" } video::-webkit-media-text-track-display { "+
p+" } video::-webkit-media-text-track-display span { "+l+m+h+d+" } video::-webkit-media-text-track-display { "+p+" } video::cue { "+f+l+m+h+d+" } video::-webkit-media-text-track-container {"+g+"} video::-webkit-media-text-track-display-backdrop { background-color: rgba(0, 0, 0, 0) !important;}";try{!1!==a||c||localStorage.setItem(Ob.PREFIX+"captioningDefault",JSON.stringify(this.captioningObject.selected))}catch(r){this.facade.logger.error("LocalStorage Not Supported on this Browser",r)}}else this.captionningStyle.innerHTML=
this.captioningObject.appliedStyleText+"#"+n+" .akamai-caption-text.akamai-caption-text-preview { "+l+m+h+p+" } #"+n+" .akamai-caption-text.akamai-caption-text-preview p { "+f+d+" }"};Z.prototype.toggleButtonHandler=function(a,b){null==a&&(a=!1);null==b&&(b=!0);a?(ja.add("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix),ja.remove("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix)):(ja.add("captioning-floater-btnselected",this.toggle.OFF,this.classList.prefix),
ja.remove("captioning-floater-btnselected",this.toggle.ON,this.classList.prefix));b&&this.captioning.setHidden(!a);this.sendNotification("updatesettings",{captioning:{hidden:!a}})};Z.prototype.setSettings=function(a){return this.settings=a};Z.prototype.getSettings=function(){return this.settings};Z.prototype.listNotificationInterests=function(){return[w.SETTINGS_VISIBILITY_CHANGE,w.TOGGLE_SETTINGS_VISIBILITY,w.SETTINGS_CHANGE]};Z.prototype.handleNotification=function(a){var b,c,e,f,g,h,l,m,n,p;e=
a.getName();a=a.getBody();switch(e){case w.SETTINGS_VISIBILITY_CHANGE:case w.TOGGLE_SETTINGS_VISIBILITY:this.settingsUiVisible&&(this.colorPicker.style.display="none");(this.settingsUiVisible=!this.settingsUiVisible)&&1===this.list.language.length&&this.languageListPopulate();b=this.settingsUiVisible?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE;this.toggleButtonHandler(!this.captioning.getHidden(),!1);this.list.language.value=this.captioning.getTrack().language;this.onScrollListChange(this.captioningObject.selected.scroll);
this.sendNotification(b,"cc-setting-active");break;case w.SETTINGS_CHANGE:e=!1;for(f in a)switch(l=a[f],f){case "fontFamily":case "fontSize":case "scroll":case "edgeType":g="fontFamily"===f?"font":"fontSize"===f?"size":"edgeType"===f?"edge":"scroll";p=this.list[g].options;c=m=0;for(n=p.length;m<n;c=++m)if(h=p[c],"fontFamily"===f&&"object"===typeof l)for(b in l)c=l[b],"default"===b&&(this.captioningObject.selected.fontFamily=c,e=!0),RegExp(b,"i").test(h.label)&&(RegExp("^"+c).test(h.value)||(h.value=
c+","+h.value),h.selected&&(this.captioningObject.selected.fontFamily=h.value));else if(RegExp("^"+l+"$","i").test(h.label)&&(this.list[g].selectedIndex=c,"fontSize"===f&&(f="size"),this.captioningObject.selected[f]=h.value,"scroll"===f)){this.scroll.type=this.captioningObject.selected.scroll=h.value;this.setSettings({scroll:this.scroll.type});try{"painton"===h.value?ja.add("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent):ja.remove("akamai-captioning-typed",this.captioning.proxy.renderer.viewComponent)}catch(q){this.facade.logger.error("AMP Captioning Error",
q)}}break;case "backgroundColor":case "edgeColor":case "fontColor":case "windowColor":this.captioningObject.selected[f]=l}this.applyCaptioningStyle(!1,!0,e);null!=a.visible&&a.visible!==!this.captioning.getHidden()&&this.captioning.setHidden(!a.visible)}};var Lc=function(){Lc.__super__.constructor.call(this)};g(Lc,pa);Lc.prototype.componentName="play";Lc.prototype.onclick=function(a){a.stopImmediatePropagation();a.preventDefault();this.sendNotification(Ha.TOGGLE_PLAY_PAUSE);return!1};var Cd=function(a){Cd.__super__.constructor.call(this,
a)};g(Cd,Ja);Cd.prototype.clickHandler=function(){this.sendNotification(d.TOGGLE_MUTED)};var Nb=function(a,b){Nb.__super__.constructor.call(this,a,b)};g(Nb,E);Nb.prototype.componentName="volume";Nb.prototype.draggable=!0;Nb.prototype.valueChanged=function(){this.sendNotification(d.CHANGE_VOLUME,this.value);this.sendNotification("updatesettings",{volume:this.value})};Nb.prototype.listNotificationInterests=function(){return[d.VOLUME_CHANGE,d.READY]};Nb.prototype.handleNotification=function(a){switch(a.getName()){case d.READY:this.updateValue(this.facade.player.getVolume(),
!0);break;case d.VOLUME_CHANGE:this.updateValue(a.getBody())}};var ua=function(){ua.__super__.constructor.call(this);this.controls={}};g(ua,Xa);ua.prototype.panel=null;ua.prototype.control=null;ua.prototype.separator=null;ua.prototype.controls=null;ua.prototype.labels=null;ua.prototype.closed=!0;ua.prototype.panelClass=Sb;ua.prototype.controlClass=Ja;ua.prototype.onRegister=function(){this.panel=this.createPanel(this.componentName);this.control=this.createControl(this.componentName);this.separator=
this.createSeparator(this.componentName);this.panel.control=this.control;this.control.panel=this.panel;null==this.labels&&(this.labels={});this.createPanelControls(this.componentName)};ua.prototype.createControl=function(a){a=new this.controlClass(a);this.facade.registerMediator(a);return a};ua.prototype.createPanel=function(a){a=new this.panelClass(a);this.facade.registerMediator(a);return a};ua.prototype.createSeparator=function(a){return this.create(["separator","icon"],this.panel)};ua.prototype.createPanelControls=
function(a){var b,c,d;a=("function"===typeof(c=this.plugin).getConfigurationData?c.getConfigurationData():void 0)||this.facade.getConfig()[this.componentName];for(b in a)c=a[b],!0===c&&(this.controls[b]=this.addPanelControl(new na(this.localizationManager.getString(this.labels[b]),null,null,b,null!=(d=this.panelButtonClickHandler)?"function"===typeof d.bind?d.bind(this,b):void 0:void 0)))};ua.prototype.addPanelControl=function(a){this.facade.registerMediator(a);this.panel.getViewComponent().appendChild(a.getViewComponent());
return a};ua.prototype.panelButtonClickHandler=function(){this.sendNotification(Pa.CLOSE_PANEL,this.panel)};var Ka=function(){Ka.__super__.constructor.call(this)};g(Ka,ua);Ka.prototype.componentName="volume";Ka.prototype.slider=null;Ka.prototype.level=null;Ka.prototype.controlClass=Cd;Ka.prototype.onRegister=function(){var a;Ka.__super__.onRegister.call(this);this.slider=new Nb(this.panel,null!=(a=this.facade.getConfig().volume)?a.direction:void 0);this.facade.registerMediator(this.slider)};Ka.prototype.updateVolumeButton=
function(a){a=Math.ceil(10*a);a!==this.level&&(null!=this.level&&this.sendNotification(d.REMOVE_CONTROL_STATE,"volume-"+this.level),this.level=a,this.sendNotification(d.ADD_CONTROL_STATE,"volume-"+this.level))};Ka.prototype.listNotificationInterests=function(){return Ka.__super__.listNotificationInterests.apply(this,arguments).concat([d.VOLUME_CHANGE])};Ka.prototype.handleNotification=function(a){Ka.__super__.handleNotification.call(this,a);switch(a.getName()){case d.VOLUME_CHANGE:this.updateVolumeButton(a.body)}};
var Ba=function(a){this.panels=[];this.closeHandler=this.mouseupHandler.bind(this);Ba.__super__.constructor.call(this,null,null,a)};g(Ba,P);Ba.prototype.componentName="panels";Ba.prototype.activePanel=null;Ba.prototype.panels=null;Ba.prototype.closeHandler=null;Ba.prototype.listNotificationInterests=function(){var a,b,c;c=[];for(a in Pa)b=Pa[a],c.push(b);return c.concat([])};Ba.prototype.handleNotification=function(a){var b;b=a.getName();a=a.getBody();switch(b){case Pa.ADD_PANEL:this.addPanel(a);
break;case Pa.REMOVE_PANEL:this.removePanel(a);break;case Pa.OPEN_PANEL:this.openPanel(a);break;case Pa.CLOSE_PANEL:this.closePanel(a);break;case Pa.CLOSE_ALL_PANELS:this.closeAllPanels(a);break;case Pa.TOGGLE_PANEL:this.togglePanel(a)}};Ba.prototype.addPanel=function(a){this.panels.push(a);this.viewComponent.appendChild(a.getViewComponent())};Ba.prototype.removePanel=function(a){this.panels.splice(this.panels.indexOf(a),1);this.viewComponent.removeChild(a.getViewComponent())};Ba.prototype.openPanel=
function(a){a!==this.activePanel&&null!=a&&(this.closeAllPanels(),this.activePanel=a,this.activePanel.classList.add("active"),"desktop"!==f.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!0),document.addEventListener("mouseup",this.closeHandler))};Ba.prototype.closePanel=function(a){a.classList.remove("active");null!=this.activePanel&&(this.activePanel=null,"desktop"!==f.getDevice()&&this.sendNotification(d.IS_USER_ACTIVE,!1),document.removeEventListener("mouseup",this.closeHandler))};Ba.prototype.togglePanel=
function(a){a===this.activePanel?this.closePanel(a):this.openPanel(a)};Ba.prototype.closeAllPanels=function(){var a,b,c,d;d=this.panels;b=0;for(c=d.length;b<c;b++)a=d[b],this.closePanel(a)};Ba.prototype.mouseupHandler=function(a){var b,c;b=document.elementFromPoint(a.clientX,a.clientY);c=this.activePanel.getViewComponent();a=this.activePanel.control.getViewComponent();b!==c&&!1===c.contains(b)&&b!==a&&!1===a.contains(b)&&this.closeAllPanels()};var D=function(a){D.__super__.constructor.call(this,a,
"horizontal")};g(D,E);D.prototype.componentName="progress";D.prototype.bufferValue=null;D.prototype.scrubTime=null;D.prototype.scrubTimeSeparator=null;D.prototype.cuePoints=null;D.prototype.cues=null;D.prototype.duration=0;D.prototype.isLive=!1;D.prototype.seeking=!1;D.prototype.previewData={src:null,previewWidth:null,previewHeight:null,imgWidth:null,imgHeight:null,count:null};D.prototype.hoverHandler=null;D.prototype.mouseoutHandler=null;D.prototype.mouseMoveHandler=null;D.prototype.previewMoveHandler=
null;D.prototype.onRegister=function(){D.__super__.onRegister.call(this);this.bufferValue=this.create("buffer-value",!1);this.trackView.insertBefore(this.bufferValue,this.trackView.lastChild);this.cuePoints=this.create("cue-points",this.trackView);this.scrubTimeSeparator=this.create("scrub-time-separator");this.scrubTime=this.create("scrub-time");this.thumbPreview=this.create("thumb-preview",this.trackView);this.previewMoveHandler=l.create(this.clickView,l.MOVE,this.updatePreviewHandler.bind(this));
this.previewMoveHandler.unbind();this.hoverHandler=l.create(this.clickView,l.HOVER,this.handlehoverHandler.bind(this));this.mouseoutHandler=l.create(this.clickView,l.HOVEROUT,this.handlemouseoutHandler.bind(this));this.mouseoutHandler.unbind();l.create(this.clickView,l.HOVER,this.mouseOverHandler.bind(this));l.create(this.clickView,l.HOVEROUT,this.mouseOutHandler.bind(this));this.mouseMoveBinding=l.create(document,l.MOVE,this.mouseMoveHandler.bind(this));this.mouseMoveBinding.unbind()};D.prototype.listNotificationInterests=
function(){return[d.ENDED,d.MEDIA_CHANGE,d.DURATION_CHANGE,d.PROGRESS,d.CUES_CHANGE,d.DISPLAY_TIME,fa.BREAK_START]};D.prototype.handleNotification=function(a){var b;D.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case d.MEDIA_CHANGE:this.isLive="live"===a.temporalType;this.updateValue(0);this.bufferValue.style.width="0%";this.updatePreview(a.metadata);break;case d.PROGRESS:b=f.clamp(100*(a/this.duration),0,100);this.bufferValue.style.width=b+"%";break;case d.DURATION_CHANGE:this.duration=
a;this.updateCuePoints();break;case d.ENDED:this.updateValue(1);break;case d.CUES_CHANGE:this.cues=a;this.updateCuePoints();break;case d.DISPLAY_TIME:!1===this.dragging&&this.updateValue(a.currentTime/a.duration,a.duration);break;case fa.BREAK_START:this.getDragging()&&this.handleReleaseHandler()}};D.prototype.updateCuePoints=function(){var a,b,c,d,f;if(null!=this.cues&&!1!==this.facade.config.displaySceneMarkers)for(this.removeCuePoints(),f=this.cues,c=0,d=f.length;c<d;c++)a=f[c],0!==a.startTime&&
-1!==a.startTime&&(b=this.create("cue-point",this.cuePoints),b.style.left=100*(a.startTime/this.duration)+"%")};D.prototype.preloadPreviewImages=function(a){var b,c;for(b=1;b<a.previewThumbnailCount;)c=new Image,c.src=a.previewThumbnailSrc+"out"+b+".png",b++};D.prototype.updatePreview=function(a){this.preloadPreviewImages(a);this.previewData.src=a.previewThumbnailSrc;this.previewData.previewHeight=a.previewThumbnailHeight;this.previewData.previewWidth=a.previewThumbnailWidth;this.previewData.count=
a.previewThumbnailCount;void 0===this.previewData.src&&this.hoverHandler.unbind()};D.prototype.handlehoverHandler=function(a){this.previewMoveHandler.bind();this.mouseoutHandler.bind();this.hoverHandler.unbind();this.updatePreviewHandler(a);a.stopImmediatePropagation();return!1};D.prototype.handlemouseoutHandler=function(a){this.previewMoveHandler.unbind();this.mouseoutHandler.unbind();this.hoverHandler.bind();a.stopImmediatePropagation();return!1};D.prototype.mouseOverHandler=function(a){this.mouseOver=
!0;this.classList.add("active");this.mouseMoveBinding.bind()};D.prototype.mouseOutHandler=function(a){this.mouseOver=!1;!0!==this.getDragging()&&(this.classList.remove("active"),this.mouseMoveBinding.unbind())};D.prototype.mouseMoveHandler=function(a){a=this.calculateValue(a);this.scrubTime.textContent=f.formatTimecode(Math.round(a*this.duration));this.scrubTime.style.left=this.scrubTimeSeparator.style.left=""+(100*a).toFixed(2)+"%"};D.prototype.updatePreviewHandler=function(a){a=this.calculateValue(a);
this.previewInterval=this.duration/this.previewData.count;this.previewImgIndex=Math.floor(a*this.duration/this.previewInterval);this.previewData.src&&(this.thumbPreview.style.backgroundImage="url("+this.previewData.src+"out"+(this.previewImgIndex+1)+".png)");this.thumbPreview.style.width=this.previewData.previewWidth+"px";this.thumbPreview.style.height=this.previewData.previewHeight+"px";a=f.clamp((100*a-10).toFixed(2),1,80);this.thumbPreview.style.left=""+a+"%"};D.prototype.removeCuePoints=function(){null!=
this.cuePoints&&(this.cuePoints.innerHTML="")};D.prototype.valueChanged=function(){this.sendNotification(Ha.SEEK,this.value*this.facade.player.retrieveProxy(p.NAME).getDuration())};D.prototype.updateValue=function(a){a!==this.value&&(!0===this.isLive&&(a=1),!0===isNaN(a)&&(a=0),D.__super__.updateValue.call(this,a),this.getDragging()&&this.value>=this.max&&(this.handleReleaseHandler(),this.sendNotification(d.END)))};D.prototype.updateHandler=function(a,b){D.__super__.updateHandler.call(this,a,b);this.mouseMoveHandler(b)};
D.prototype.handlePressHandler=function(a){D.__super__.handlePressHandler.call(this,a);this.classList.add("scrubbing")};D.prototype.handleReleaseHandler=function(a){var b;D.__super__.handleReleaseHandler.call(this,a);b=this;setTimeout(function(){return b.classList.remove("scrubbing")},500);!1===this.mouseOver&&this.mouseOutHandler()};var Mc=function(a){Mc.__super__.constructor.call(this,null,a)};g(Mc,na);Mc.prototype.componentName="play-pause";Mc.prototype.onclick=function(a){a.stopImmediatePropagation();
a.preventDefault();this.sendNotification(Ha.TOGGLE_PLAY_PAUSE);return!1};var Nc=function(){Nc.__super__.constructor.call(this)};g(Nc,ma);Nc.prototype.execute=function(a){switch(this.applicationState.getPlayState()){case L.ENDED:this.plugin.setCurrentTime(0);this.plugin.play();break;case L.PAUSED:case L.READY:this.plugin.play();break;case L.PLAYING:case L.WAITING:this.plugin.pause()}};var hc=function(){hc.__super__.constructor.call(this)};g(hc,na);hc.prototype.componentName="chromecast";hc.prototype.onclick=
function(a){a.stopImmediatePropagation();this.sendNotification(Za.LAUNCH);return!1};var cb=function(){cb.__super__.constructor.call(this)};g(cb,Na);cb.prototype.componentName="controls";cb.prototype.activeControlPanel=null;cb.prototype.controlBar=null;cb.prototype.panels=null;cb.prototype.onRegister=function(){this.facade.registerMediator(new Bb);!0!==this.facade.player.config.debug&&this.facade.player.config.contextmenu&&!1!==this.facade.player.config.contextmenu.enabled&&this.facade.registerMediator(new Ab);
cb.__super__.onRegister.call(this);this.facade.viewComponent=this.viewComponent;this.facade.registerMediator(new bb);this.facade.registerMediator(new Bd);this.facade.registerMediator(new Jb);this.facade.registerMediator(new qb);this.facade.registerMediator(new Kb);!1!==(this.facade.config.titlebar||this.facade.player.config.titlebar||{}).enabled&&this.facade.registerMediator(new pb);this.controlBar=this.create("control-bar");this.facade.registerMediator(new Ba(this.viewComponent));this.facade.registerMediator(new Mc(this.controlBar));
this.facade.registerMediator(new Fa(this.controlBar));this.facade.registerMediator(new D(this.controlBar));null!=this.facade.config.logo&&this.facade.registerMediator(new Lb(this.controlBar));this.facade.registerMediator(new Cb(this.controlBar));null!=this.facade.player.captioning&&(this.facade.registerMediator(new Mb),this.facade.registerMediator(new Z(this.viewComponent)));this.facade.registerMediator(new Ka);this.facade.ads=new ta;this.facade.registerMediator(this.facade.ads);this.facade.registerMediator(new Lc);
this.create("separator",this.controlBar)};cb.prototype.listNotificationInterests=function(){return[d.READY,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.SET_MEDIA,fa.BREAK_START,fa.BREAK_END]};cb.prototype.handleNotification=function(a){var b,c;b=a.getName();a=a.getBody();switch(b){case d.READY:!1!==(null!=(c=a.fullscreen)?c.enabled:void 0)&&this.facade.registerMediator(new rb(this.controlBar));break;case d.SET_MEDIA:case fa.BREAK_END:this.sendNotification(d.REMOVE_APPLICATION_STATE,
"ad-mode");break;case fa.BREAK_START:this.sendNotification(d.ADD_APPLICATION_STATE,"ad-mode");break;case d.ADD_CONTROL_STATE:this.classList.add(a);break;case d.REMOVE_CONTROL_STATE:this.classList.remove(a);break;case d.ADD_CONTROL:this.controlBar.appendChild(a);break;case d.REMOVE_CONTROL:this.controlBar.contains(a)&&this.controlBar.removeChild(a)}};var ab=function(){ab.__super__.constructor.call(this)};g(ab,cb);ab.prototype.componentName="chromecast-controls";ab.prototype.message=null;ab.prototype.messageContainer=
null;ab.prototype.button=null;ab.prototype.captioningActive=!1;ab.prototype.onRegister=function(){var a,b,c;ab.__super__.onRegister.call(this);this.messageContainer=this.create("chromecast-message-container");this.message=this.createText("chromecast-message",this.localizationManager.getString("MSG_CHROMECAST_MESSAGE"),this.messageContainer);this.button=new hc;this.facade.registerMediator(this.button);a=new rb(this.controlBar);this.facade.registerMediator(a);a.setDisabled(!0);this.sendNotification(d.ADD_CONTROL,
this.button.getViewComponent());this.viewComponent.getElementsByClassName("akamai-caption akamai-button").length||!0!==(null!=(b=this.facade.player.captioning)?null!=(c=b.config)?c.enabled:void 0:void 0)||(a=new na(this.localizationManager.getString(u.MSG_CC),this.viewComponent.getElementsByClassName("akamai-control-bar")[0],null,"caption",this.captionButtonClick.bind(this)),this.facade.registerMediator(a),this.captionButton=a.getViewComponent(),this.sendNotification(d.ADD_CONTROL,this.captionButton),
this.sendNotification(d.ADD_CONTROL_STATE,"cc-enabled"))};ab.prototype.captionButtonClick=function(){this.captioningActive=!this.captioningActive;try{this.facade.player.parent.chromecast.postMessage({type:"captioning.visibilitychange",detail:{visibility:this.captioningActive}})}catch(a){this.facade.logger.error("[AMP Chromecast Captioning Error]",a)}this.sendNotification(this.captioningActive?d.ADD_APPLICATION_STATE:d.REMOVE_APPLICATION_STATE,"cc-active")};var Oc=function(){Oc.__super__.constructor.call(this)};
g(Oc,ma);Oc.prototype.execute=function(a){var b,c=this;a=a.getBody().target;"chromecast"===a?this.player.pause():"amp"===a&&(a=this.proxy.getCurrentTime(),b=this.player.getDuration(),0!==a&&(a!==b&&(this.seekedHandler=this.seeked.bind(this),this.player.once("seeked",function(a){c.player.play()})),this.player.setCurrentTime(a)))};var S=function(){S.__super__.constructor.call(this)};g(S,sa);S.prototype.moduleName="chromecast";S.prototype.isAvailable=function(){return this.isSender()||this.isReceiver()};
S.prototype.createModel=function(){this.proxy=this.isSender()?new y(this.config):new N(this.config);this.registerProxy(this.proxy)};S.prototype.createController=function(){S.__super__.createController.call(this);this.isSender()?(this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Oc),this.registerCommand(Za.LAUNCH,Ic),this.registerCommand(Ha.TOGGLE_PLAY_PAUSE,Nc),this.registerCommand(Ha.SEEK,Kc),this.registerCommand(w.VISIBILITY_CHANGE,vd),this.registerCommand(w.SETTINGS_CHANGE,wd),this.registerCommand(d.MEDIA_CHANGE,
zd),this.registerCommand(Za.AVAILABILITY_CHANGE,Wa)):this.isReceiver()&&(this.registerCommand(d.READY,xd),this.registerCommand(fa.BREAK_START,yd))};S.prototype.createView=function(){this.isSender()?this.registerMediator(new ob):this.isReceiver()&&this.registerMediator(new Jc)};S.prototype.isSender=function(){return!S.prototype.isReceiver()&&/Chrome/.test(navigator.userAgent)};S.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};S.prototype.listNotificationInterests=function(){return[d.READY,
w.VISIBILITY_CHANGE,w.SETTINGS_CHANGE,fa.BREAK_START,d.PLAYBACK_TARGET_CHANGE,d.MEDIA_CHANGE]};S.prototype.listNotificationPublications=function(){return S.__super__.listNotificationPublications.apply(this,arguments).concat([d.INITIALIZED,d.ADD_CONTROL,d.REMOVE_CONTROL,d.ADD_CONTROL_STATE,d.REMOVE_CONTROL_STATE,d.CHANGE_PLAYBACK_TARGET,Za.AVAILABILITY_CHANGE,d.CHANGE_PLAY_STATE,d.CHANGE_DURATION,d.DISPLAY_TIME])};S.prototype.play=function(){var a;"function"===typeof(a=this.proxy).play&&a.play()};
S.prototype.pause=function(){var a;"function"===typeof(a=this.proxy).pause&&a.pause()};S.prototype.setCurrentTime=function(a){this.proxy.setCurrentTime(a);return a};S.prototype.isReceiverAvailable=function(){var a;return(null!=(a=this.proxy)?"function"===typeof a.isReceiverAvailable?a.isReceiverAvailable():void 0:void 0)||!1};S.prototype.getMedia=function(){return this.proxy.media};S.prototype.getSession=function(){return this.proxy.session};S.prototype.getMediaManager=function(){return this.proxy.mediaManager};
S.prototype.getCastReceiverManager=function(){return this.proxy.castReceiverManager};S.prototype.getCastMessageBus=function(){return this.proxy.shim.castMessageBuses[this.proxy.messageBus]};S.prototype.postMessage=function(a){this.proxy.send(a)};S.prototype.launch=function(){this.proxy.launch()};B.registerPlugin("chromecast","html",S);var Db=function(){Db.__super__.constructor.call(this)};g(Db,S);Db.NAME="ChromeCastFlashPlugin";Db.prototype.createModel=function(){this.proxy=new y(this.config);this.registerProxy(this.proxy)};
Db.prototype.createController=function(){Db.__super__.createController.call(this);this.registerCommand(d.PLAYBACK_TARGET_CHANGE,Oc);this.registerCommand(Za.LAUNCH,Ic);this.registerCommand("feedchanged",Ad);this.registerCommand(Ha.TOGGLE_PLAY_PAUSE,Nc);this.registerCommand(Ha.SEEK,Kc)};Db.prototype.createView=function(){this.registerMediator(new $a)};Db.prototype.listNotificationInterests=function(){return["feedchanged",d.CHANGE_MEDIA,d.PLAYBACK_TARGET_CHANGE]};var Za={LAUNCH:"launch",AVAILABILITY_CHANGE:"availabilitychange"},
ha=function(a,b){if(!S.prototype.isSender())throw Error("Chromecast not supported on this platform. Skipping plugin initialization.");ha.__super__.constructor.call(this,a,b);this.plugin=new Db;this.plugin.initialize(b,this.player);a.registerModule(this.plugin)};g(ha,ea);ha.NAME="ChromeCastWrapper";ha.prototype.buttonId="chromecastBtn";ha.prototype.plugin=null;ha.prototype.flashView={elements:{controls:{elements:{chromecastBtn:{}}}}};ha.prototype.listNotificationInterests=function(){return ha.__super__.listNotificationInterests.call(this).concat([x.ELEMENT_EVENT,
x.LOAD_STATE_READY,x.LOAD_STATE_LOADING,x.APPLICATION_STATE_CHANGE,Za.AVAILABILITY_CHANGE])};ha.prototype.handleNotification=function(a){var b,c;ha.__super__.handleNotification.call(this,a);b=a.getName();a=a.getBody();switch(b){case x.ELEMENT_EVENT:"click"===a.type&&a.element===this.buttonId&&this.plugin.sendNotification(Za.LAUNCH);break;case Za.AVAILABILITY_CHANGE:null!=(null!=(c=this.player.mediaElement)?c.setPlayerProperty:void 0)&&this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:a});
break;case x.APPLICATION_STATE_CHANGE:case x.LOAD_STATE_READY:case x.LOAD_STATE_LOADING:(b=this.plugin.isReceiverAvailable())&&this.player.mediaElement.setPlayerProperty(this.buttonId,{state:1}),this.player.mediaElement.setPlayerProperty(this.buttonId,{visible:b})}};ha.prototype.play=function(){this.plugin.play()};ha.prototype.pause=function(){this.plugin.pause()};ha.prototype.setCurrentTime=function(a){this.plugin.setCurrentTime(a);return a};ha.prototype.isReceiverAvailable=function(){return this.plugin.isReceiverAvailable()};
ha.prototype.getMedia=function(){return this.plugin.getMedia()};ha.prototype.getSession=function(){return this.plugin.getSession()};ha.prototype.getMediaManager=function(){return this.plugin.getMediaManager()};ha.prototype.getCastReceiverManager=function(){return this.plugin.getCastReceiverManager()};ha.prototype.getCastMessageBus=function(){return this.plugin.getCastMessageBuses()};ha.prototype.postMessage=function(a){this.plugin.postMessage(a)};ha.prototype.launch=function(){this.plugin.launch()};
B.registerPlugin("chromecast","flash",ha);var Ga=function(){Ga.__super__.constructor.call(this)};g(Ga,sa);Ga.prototype.moduleName="hls";Ga.prototype.createModel=function(){this.proxy=new fc(this.config);this.registerProxy(this.proxy)};Ga.prototype.createController=function(){this.registerCommand(fa.BREAK_START,td);Ga.__super__.createController.call(this)};Ga.prototype.logEvent=function(a){!0!==/(hlsFragLoading|hlsFragLoaded)/.test(a.type)&&Ga.__super__.logEvent.call(this,a)};Ga.prototype.getPlaybackProxy=
function(){return this.proxy.playbackProxy};Ga.prototype.getInstance=function(){return this.getPlaybackProxy().player};Ga.prototype.listNotificationInterests=function(){return Ga.__super__.listNotificationInterests.call(this).concat([fa.BREAK_START])};Ga.prototype.listNotificationPublications=function(){return Ga.__super__.listNotificationPublications.call(this).concat([d.TIMED_METADATA,d.QUALITY_LEVELS_LOADED,d.QUALITY_CHANGE,d.QUALITY_CHANGING,d.FRAGMENT_LOAD_START,d.FRAGMENT_LOADED])};B.registerPlugin("hls",
"html",Ga);var Ia=function(a,b){var c,d;if(/CrKey/.test(navigator.userAgent)&&"undefined"!==typeof cast&&null!==cast){Ia.__super__.constructor.call(this);this.castReceiverManager=cast.receiver.CastReceiverManager.getInstance();this.castReceiverManager.onReady=this.dispatchEvent.bind(this,{type:"ready"});this.castReceiverManager.onSenderConnected=this.dispatchEvent.bind(this,{type:"senderconnected"});this.castReceiverManager.onSenderDisconnected=this.dispatchEvent.bind(this,{type:"senderdisconnected"});
this.castReceiverManager.onShutdown=this.dispatchEvent.bind(this,{type:"shutdown"});this.castReceiverManager.onStandbyChanged=this.dispatchEvent.bind(this,{type:"standbychange"});this.castReceiverManager.onSystemVolumeChanged=this.dispatchEvent.bind(this,{type:"systemvolumechanged"});this.castReceiverManager.onVisibilityChanged=this.dispatchEvent.bind(this,{type:"visibilitychanged"});this.player=new F(this);this.mediaManager=new cast.receiver.MediaManager(this.player);null==b&&(b={});b["urn:x-cast:com.akamai.amp.cast"]=
cast.receiver.CastMessageBus.MessageType.JSON;this.castMessageBuses={};for(c in b)d=b[c],this.castMessageBuses[c]=this.castReceiverManager.getCastMessageBus(c,d),this.castMessageBuses[c].addEventListener("message",this.dispatchEvent.bind(this));this.castReceiverManager.start(a)}};g(Ia,ya);Ia.prototype.castReceiverManager=null;Ia.prototype.mediaManager=null;Ia.prototype.castMessageBuses=null;Ia.prototype.player=null;Ia.prototype.isSender=function(){return!this.isReceiver()&&/Chrome/.test(navigator.userAgent)};
Ia.prototype.isReceiver=function(){return/CrKey/.test(navigator.userAgent)};Ia.getInstance=function(){return this.instance};Ia.instance=new Ia;var Pc=function(a,b){Pc.__super__.constructor.call(this,a,b)};g(Pc,ea);Pc.NAME="OctoshapeWrapper";Pc.prototype.flashPlugins=[{id:"OctoShapeStreamingPlugin",src:"#{paths.resources}plugins/infinitehd-osmf-plugin-1511180@v330-OSMF_1_6_MA.swf",host:"osmf",main:"com.octoshape.osmf.streamingplugin.OctoshapeStreamingPluginInfo"}];B.registerPlugin("octoshape","flash",
Pc);var db=function(){db.__super__.constructor.call(this)};g(db,sa);db.prototype.moduleName="dash";db.prototype.createModel=function(){this.registerProxy(new gc(this.config))};db.prototype.getPlaybackProxy=function(){return this.proxy.playbackProxy};db.prototype.getInstance=function(){return this.getPlaybackProxy().player};db.prototype.registered=function(){this.player.registerCommand(d.CHANGE_DISPLAY_STATE,ud);db.__super__.registered.call(this)};db.prototype.listNotificationPublications=function(){return db.__super__.listNotificationPublications.call(this).concat([d.FRAGMENT_LOAD_START,
d.FRAGMENT_LOADED])};B.registerPlugin("dash","html",db);var Dd=function(){Dd.__super__.constructor.call(this)};g(Dd,sa);Dd.prototype.moduleName="octoshape";B.registerPlugin("octoshape","html",Dd);var Jd=function(a){function b(a,d){babelHelpers.classCallCheck(this,b);var f=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));f.player=a;f.config=d||{};f.logger=new Q(f.debug);var g=void 0;Events.values.forEach(function(a){g=f["on"+a];null!=g&&"function"==typeof g&&
(g=f["on"+a]=g.bind(f),f.player.addEventListener(a,g))});return f}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"bindHandlers",value:function(a){var b=this;!1==a instanceof Array&&(a=[a]);a.forEach(function(a){b[a]=b[a].bind(b)})}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}}],[{key:"create",value:function(a,b){var d=this;return new Promise(function(f,g){try{var l=new d(a,b);f(l)}catch(m){g(m)}})}},{key:"factory",get:function(){return this.create.bind(this)}}]);
return b}(ya),Od=function(a){function b(a,d){babelHelpers.classCallCheck(this,b);return babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a,d))}babelHelpers.inherits(b,a);babelHelpers.createClass(b,[{key:"dispatchEvent",value:function(a){this.player.sendNotification("ads"+a.type,a.detail);babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"dispatchEvent",this).call(this,a)}}]);return b}(Jd);ic.akamai={amp:{AMP:B,utils:{Timer:Ib,Utils:f,
QueryString:La,Logger:Q.instance,MRSSHelper:Fb},Timer:Ib,Utils:f,Poller:ca,PlayState:L,DisplayState:R,QueryString:La,Logger:Q,Config:hb,chromecast:{ChromeCastShim:"undefined"!=typeof Ia?Ia.getInstance():null},XHR:la,Resource:dc,Media:ka,Authorization:Rc,Event:H,Events:Events,EventDispatcher:ya,Plugin:Jd,AdPlugin:Od}};"undefined"!=typeof AdVO&&(ic.akamai.amp.AdVO=AdVO);"undefined"!=typeof fa&&(ic.akamai.amp.AdEvents=function(){var a,b,c={values:[]};for(a in fa)b=fa[a].replace(/^ads/,""),c[a.replace(/^AD_/,
"")]=b,c.values.push(b);return c}());window.AKAMAI_MEDIA_PLAYER.saveSDK("AMP v4.82.17",ic)}window.AKAMAI_MEDIA_PLAYER.setVersion("AMP v4.82.17")})();