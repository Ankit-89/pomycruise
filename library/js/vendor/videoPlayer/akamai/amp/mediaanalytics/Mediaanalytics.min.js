!function(a){"use strict";var e=function(a){function e(a,t){return babelHelpers.classCallCheck(this,e),babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,a,t))}return babelHelpers.inherits(e,a),babelHelpers.createClass(e,null,[{key:"create",value:function(a,t){var i=this;return window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=t.config,akamai.amp.AMP.addResources(t.sdk).then(function(){return babelHelpers.get(e.__proto__||Object.getPrototypeOf(e),"create",i).call(i,a,t)})}}]),babelHelpers.createClass(e,[{key:"setDimensions",value:function(a){var e=this.config.dimensions;for(var t in a){var i=a[t];null!=i&&(e[t]=i)}return this.applyDimensions(e),a}},{key:"applyDimensions",value:function(a){if("function"==typeof window.setAkamaiMediaAnalyticsData){try{for(var e in a)setAkamaiMediaAnalyticsData(e,a[e])}catch(a){this.player.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set dimensions:",a)}!1===this.config.iplookup&&"function"==typeof akamaiDisableServerIpLookup&&akamaiDisableServerIpLookup()}}},{key:"onready",value:function(a){try{!0===this.debug&&(window.AkamaiAnalytics_debug=1),window.akamaiSetVideoObject(this.player.mediaElement)}catch(a){this.player.logger.error("[AMP MEDIA ANALYTICS ERROR]","Could not set video tag",a)}var e=this.player.ads;null!=e&&(e.addEventListener("breakstart",this.onadbreakstart.bind(this)),e.addEventListener("breakend",this.onadbreakend.bind(this)),e.addEventListener("loaded",this.onadloaded.bind(this)),e.addEventListener("started",this.onadstarted.bind(this)),e.addEventListener("ended",this.onadended.bind(this)),e.addEventListener("firstquartile",this.onadfirstquartile.bind(this)),e.addEventListener("midpoint",this.onadmidpoint.bind(this)),e.addEventListener("thirdquartile",this.onadthirdquartile.bind(this)))}},{key:"onmediachange",value:function(a){var e=a.detail,t=null;"function"==typeof akamaiSetStreamURL&&akamaiSetStreamURL(e.src,!1);var i=this.config.viewerId||this.config.viewerID||this.config["std:viewerId"];null!=i&&"function"==typeof akamaiSetViewerId&&akamaiSetViewerId(i);var n=e.mediaanalytics;t=null!=n&&null!=n.dimensions?akamia.amp.Utils.override(this.config.dimensions,n.dimensions):this.config.dimensions,"function"==typeof akamaiHandleStreamSwitch&&akamaiHandleStreamSwitch(),this.applyDimensions(t)}},{key:"updateMedia",value:function(a){"function"==typeof akamaiHandleTitleSwitch&&akamaiHandleTitleSwitch(a)}},{key:"onfragmentloadstart",value:function(a){"function"==typeof fragmentDownloadStarted&&fragmentDownloadStarted(a.detail)}},{key:"onfragmentloaded",value:function(a){"function"==typeof fragmentDownloadCompleted&&fragmentDownloadCompleted(a.detail)}},{key:"onbitratechange",value:function(a){"function"==typeof akamaiHandleBitRateSwitch&&akamaiHandleBitRateSwitch(a.detail.bitrate)}},{key:"onadbreakstart",value:function(){this.player.mediaElement.dataset.isad=!0}},{key:"onadbreakend",value:function(){this.player.mediaElement.dataset.isad=!1}},{key:"onadloaded",value:function(a){try{var e=a.data,t={adDuration:e.duration,adPartnerId:e.partner,adTitle:e.title,adId:e.id};"function"==typeof akamaiHandleAdLoaded&&akamaiHandleAdLoaded(t)}catch(a){this.player.logger.error("[AMP MEDIA ANALYTICS ERROR]",a)}}},{key:"onadstarted",value:function(){"function"==typeof akamaiHandleAdStarted&&akamaiHandleAdStarted()}},{key:"onadfirstquartile",value:function(){"function"==typeof akamaiHandleAdFirstQuartile&&akamaiHandleAdFirstQuartile()}},{key:"onadmidpoint",value:function(){"function"==typeof akamaiHandleAdMidpoint&&akamaiHandleAdMidpoint()}},{key:"onadthirdquartile",value:function(){"function"==typeof akamaiHandleAdThirdQuartile&&akamaiHandleAdThirdQuartile()}},{key:"onadended",value:function(){"function"==typeof akamaiHandleAdCompleted&&akamaiHandleAdCompleted(),this.player.getMediaElement().dataset.isad=!0}}]),e}(akamai.amp.Plugin);akamai.amp.AMP.registerPlugin("mediaanalytics",e.factory),a.MediaAnalytics=e}(this.akamai.amp.mediaanalytics=this.akamai.amp.mediaanalytics||{});
//# sourceMappingURL=akamai/amp/mediaanalytics/Mediaanalytics.min.js.map